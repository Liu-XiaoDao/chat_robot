<div class="wrapper wrapper-library">
  <div class="container">
    <div class="row">
      <%= render 'golden_idea/application/left' %>
      <div class="span9">
        <%= render "golden_idea/application/flash" %>
        <div class="content">
          <div class="module">
            <div class="module-head">
               <h3><%= t 'menu.all_season' %></h3>
            </div>
            <% if signed_in? && current_employee.is_golden_idea_admin? %>
              <div class="module-option clearfix">
                  <div class="pull-right">
                     <%= link_to t('new'), new_golden_idea_season_path, class: "btn btn-primary","data-toggle"=>"modal", "data-target"=>"#myModal" %>
                  </div>
              </div>
            <% end %>
            <div class="module-body">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th><%= t 'table.title' %></th>
                    <th><%= t 'table.begin_time' %></th>
                    <th><%= t 'table.end_date' %></th>
                    <th><%= t 'table.collector' %></th>
                    <th><%= t 'table.description' %></th>
                    <th><%= t 'table.idea_count' %></th>
                    <% if signed_in? && current_employee.is_golden_idea_admin? %>
                      <th class="cell-btn align-right"><%= t 'table.action' %></th>
                      <th class="cell-btn align-right"></th>
                    <% end %>
                  </tr>
                </thead>
                <tbody>
                  <% @seasons.each do |season| %>
                    <tr>
                      <td><%= link_to season.name, golden_idea_season_path(season) %></td>
                      <td><%= season.start_date %></td>
                      <td><%= season.end_date %></td>
                      <td>
                        <% if season.collecters.present? %>
                          <% season.collecters.split(',').each do |u_id| %>
                            <% user = Employee.find(u_id) %>
                            <%= link_to user.name, user %>
                          <% end %>
                        <% end %>
                      </td>
                      <td><%= season.description %></td>
                      <td><%= season.ideas.count %></td>
                    <% if signed_in? && current_employee.is_golden_idea_admin? %>
                      <td class="cell-btn align-right"><%= link_to t('edit'), edit_golden_idea_season_path(season), class: "btn btn-mini btn-primary","data-toggle"=>"modal", "data-target"=>"#myModal" %></td>
                      <td class="cell-btn align-right"><%= link_to t('delete'), golden_idea_season_path(season), method: :delete, data: {confirm: 'Are you sure?'}, class: "btn btn-mini btn-danger" %></td>
                    <% end %>
                    </tr>
                  <% end %>
                </tbody>
              </table>
              <%= will_paginate @seasons, renderer: WillPaginate::ActionView::BlogLinkRenderer %>
            </div>
          </div>
        </div><!--/.content-->
      </div><!--/.span9-->
    </div>
  </div><!--/.container-->
</div><!--/.wrapper-->



<div class="modal fade production-task-model-config" id="myModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal">x</button>
       <h3>编辑</h3>
    </div>
    <div class="modal-content">
      <div class="modal-body">
        <div style="width:10px;height:10px;"></div>
      </div>
    </div>
    <div class="modal-footer">
       <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
       <button type="submit" class="btn btn-primary" onclick="document.getElementById('season_form').submit();">Submit</button>
    </div>
   </div>
</div>
<script>
  $("#myModal").on("hidden", function() {
    $(this).removeData("modal");
  });

  $('#closebtn').on('click', function(){
    $(".modal-body input[value='Save']").click();
    setTimeout("location.reload()",500);
  });
</script>

<style type="text/css">
.modal-backdrop, .modal-backdrop.fade.in {
  background: #000000;
  opacity: .8
}
</style>
