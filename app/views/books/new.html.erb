<%= form_for @book, url: books_path, html: { class: "form-horizontal row-fluid", id: "create_book_classification_form" }  do |f| %>
  <div class="control-group">
    <label class="control-label" for="basicinput">Book Name</label>
    <div class="controls">
      <%= f.text_field  :name, placeholder: "Type something here...", class: "span8" %>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="basicinput">Title</label>
    <div class="controls">
      <%= f.text_field  :author, placeholder: "Type something here...", class: "span8" %>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="basicinput">Category</label>
    <div class="controls">
      <%= f.select :book_classification_id, options_from_collection_for_select(BookClassification.all, "id", "name"), options = { include_blank: true }, class: "span8", "data-placeholder": "Select here..",tabindex: "1" %>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="basicinput">Content</label>
    <div class="controls">
      <%= f.text_area  :intro, rows: 8, class: "span8", style: "display:none;" %>
      <%#= q.text_area  :intro_html, rows: 8, class: "span8", style: "display:none;" %>
      <div id="editor">
      </div>
    </div>
  </div>
<% end %>


<script type="text/javascript">
  var E = window.wangEditor
  var editor = new E('#editor')
  var $text1 = $('#question_content')
  var $text1_html = $('#question_content_html')
  editor.customConfig.onchange = function (html) {
      // 监控变化，同步更新到 textarea
      $text1.val(editor.txt.text())
      $text1_html.val(html)
  }
  // 配置图片上传
  editor.customConfig.uploadImgServer = '/questions/upload_img'
  editor.customConfig.uploadFileName = 'fileimg'
  editor.create()
  // 初始化 textarea 的值
  $text1.val(editor.txt.text())
  $text1_html.val(editor.txt.html())
</script>
