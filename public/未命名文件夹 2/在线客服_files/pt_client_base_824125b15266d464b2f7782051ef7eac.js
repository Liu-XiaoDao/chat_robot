if("undefined"==typeof I$)I$=function(){var e={},t=function(){return!1},i={};var n=function(t,i){return e.toString.call(t)==="[object "+i+"]"};return function(e,a){var o=i[e],s=n(a,"Function");if(null!=a&&!s)o=a;if(s){var r=[];for(var _=2,c=arguments.length;_<c;_++)r.push(arguments.callee(arguments[_]));var d={};r.push.call(r,d,{},t,[]);var f=a.apply(null,r)||d;if(!o||!n(f,"Object"))o=f;else if(Object.keys)for(var l=Object.keys(f),_=0,c=l.length,u;_<c;_++){u=l[_];o[u]=f[u]}else for(var u in f)o[u]=f[u]}if(null==o)o={};i[e]=o;return o}}();I$("c27e07105db4b2613e9811a6e5ceab90",function(e,t,i,n){var a=Function.prototype;a._$aop=function(e,t){var t=t||i,e=e||i,a=this;return function(){var i={args:n.slice.call(arguments,0)};e(i);if(!i.stopped){i.value=a.apply(this,i.args);t(i)}return i.value}};a._$bind=function(){var e=arguments,t=arguments[0],i=this;return function(){var a=n.slice.call(e,1);n.push.apply(a,arguments);return i.apply(t||null,a)}};a._$bind2=function(){var e=arguments,t=n.shift.call(e),i=this;return function(){n.push.apply(arguments,e);return i.apply(t||null,arguments)}};var a=String.prototype;if(!a.trim)a.trim=function(){var e=/(?:^\s+)|(?:\s+$)/g;return function(){return this.replace(e,"")}}();if(!this.console)this.console={log:i,error:i};if(!0){NEJ=this.NEJ||{};NEJ.copy=function(e,i){e=e||{};i=i||t;for(var n in i)if(i.hasOwnProperty(n))e[n]=i[n];return e};NEJ=NEJ.copy(NEJ,{O:t,R:n,F:i,P:function(e){if(!e||!e.length)return null;var t=window;for(var i=e.split("."),n=i.length,a="window"==i[0]?1:0;a<n;t=t[i[a]]=t[i[a]]||{},a++);return t}});return NEJ}return e});I$("36a6fbaf69e2e99627069e3675a1e068",function(e,t,i,n){e.__forIn=function(e,t,i){if(!e||!t)return null;var n=Object.keys(e);for(var a=0,o=n.length,s,r;a<o;a++){s=n[a];r=t.call(i||null,e[s],s,e);if(r)return s}return null};e.__forEach=function(e,t,i){e.forEach(t,i)};e.__col2array=function(e){return n.slice.call(e,0)};e.__str2time=function(e){return Date.parse(e)};return e});I$("b5a2ea56adb918d7d443468b3a9b53d1",function(e,t,i,n,a){var o=this.navigator.platform,s=this.navigator.userAgent;var r={mac:o,win:o,linux:o,ipad:s,ipod:s,iphone:o,android:s};t._$IS=r;for(var _ in r)r[_]=new RegExp(_,"i").test(r[_]);r.ios=r.ipad||r.iphone||r.ipod;r.tablet=r.ipad;r.desktop=r.mac||r.win||r.linux&&!r.android;t._$is=function(e){return!!r[e]};var c={engine:"unknow",release:"unknow",browser:"unknow",version:"unknow",prefix:{css:"",pro:"",clz:""}};t._$KERNEL=c;if(/msie\s+(.*?);/i.test(s)||/trident\/.+rv:([\d\.]+)/i.test(s)){c.engine="trident";c.browser="ie";c.version=RegExp.$1;c.prefix={css:"ms",pro:"ms",clz:"MS",evt:"MS"};var d={6:"2.0",7:"3.0",8:"4.0",9:"5.0",10:"6.0",11:"7.0"};c.release=d[document.documentMode]||d[parseInt(c.version)]}else if(/webkit\/?([\d.]+?)(?=\s|$)/i.test(s)){c.engine="webkit";c.release=RegExp.$1||"";c.prefix={css:"webkit",pro:"webkit",clz:"WebKit"}}else if(/rv\:(.*?)\)\s+gecko\//i.test(s)){c.engine="gecko";c.release=RegExp.$1||"";c.browser="firefox";c.prefix={css:"Moz",pro:"moz",clz:"Moz"};if(/firefox\/(.*?)(?=\s|$)/i.test(s))c.version=RegExp.$1||""}else if(/presto\/(.*?)\s/i.test(s)){c.engine="presto";c.release=RegExp.$1||"";c.browser="opera";c.prefix={css:"O",pro:"o",clz:"O"};if(/version\/(.*?)(?=\s|$)/i.test(s))c.version=RegExp.$1||""}if("unknow"==c.browser){var d=["chrome","maxthon","safari"];for(var f=0,l=d.length,u;f<l;f++){u="safari"==d[f]?"version":d[f];if(new RegExp(u+"/(.*?)(?=\\s|$)","i").test(s)){c.browser=d[f];c.version=RegExp.$1.trim();break}}}t._$SUPPORT={};t._$support=function(e){return!!t._$SUPPORT[e]};if(!0)e.copy(e.P("nej.p"),t);return t},"c27e07105db4b2613e9811a6e5ceab90");I$("bcd64a407d00eaec725a70b03e0fbaf3",function(e,t,i,n,a,o){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("5836d4adc09828a293f42826fab27b1f",function(){e.__forIn=function(e,t,i){if(e&&t){var n;for(var a in e)if(e.hasOwnProperty(a)){n=t.call(i,e[a],a,e);if(n)return a}else;}};e.__forEach=function(e,t,i){for(var n=0,a=e.length;n<a;n++)t.call(i,e[n],n,e)};e.__col2array=function(e){var t=[];if(e&&e.length)for(var i=0,n=e.length;i<n;i++)t.push(e[i]);return t};e.__str2time=function(){var e=/-/g;return function(t){return Date.parse(t.replace(e,"/").split(".")[0])}}()});return e},"36a6fbaf69e2e99627069e3675a1e068","b5a2ea56adb918d7d443468b3a9b53d1");I$("2ad7178887dc8cdca6f726aa3bb0d129",function(e,t,i,n,a,o){var s=function(e,t){try{t=t.toLowerCase();if(null===e)return"null"==t;if(void 0===e)return"undefined"==t;else return n.toString.call(e).toLowerCase()=="[object "+t+"]"}catch(i){return!1}};i._$isFunction=function(e){return s(e,"function")};i._$isString=function(e){return s(e,"string")};i._$isNumber=function(e){return s(e,"number")};i._$isBoolean=function(e){return s(e,"boolean")};i._$isDate=function(e){return s(e,"date")};i._$isArray=function(e){return s(e,"array")};i._$isObject=function(e){return s(e,"object")};i._$length=function(){var e=/[^\x00-\xff]/g;return function(t){return(""+(t||"")).replace(e,"**").length}}();i._$loop=function(e,n,a){if(i._$isObject(e)&&i._$isFunction(n))return t.__forIn.apply(t,arguments);else return null};i._$indexOf=function(e,t){var n=i._$isFunction(t)?t:function(e){return e===t},a=i._$forIn(e,n);return null!=a?a:-1};i._$binSearch=function(){var e;var t=function(i,n,a){if(n>a)return-1;var o=Math.ceil((n+a)/2),s=e(i[o],o,i);if(0==s)return o;if(s<0)return t(i,n,o-1);else return t(i,o+1,a)};return function(i,n){e=n||a;return t(i,0,i.length-1)}}();i._$reverseEach=function(e,t,n){if(e&&e.length&&i._$isFunction(t))for(var a=e.length-1;a>=0;a--)if(t.call(n,e[a],a,e))return a;return null};i._$forEach=function(e,n,a){if(e&&e.length&&i._$isFunction(n))if(!e.forEach)i._$forIn.apply(i,arguments);else t.__forEach(e,n,a)};i._$forIn=function(e,t,n){if(!e||!i._$isFunction(t))return null;if(i._$isNumber(e.length)){for(var a=0,o=e.length;a<o;a++)if(t.call(n,e[a],a,e))return a}else if(i._$isObject(e))return i._$loop(e,t,n);return null};i._$encode=function(e,t){t=""+t;if(!e||!t)return t||"";else return t.replace(e.r,function(t){var i=e[!e.i?t.toLowerCase():t];return null!=i?i:t})};i._$escape=function(){var e=/<br\/?>$/,t={r:/\<|\>|\&|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(n){n=i._$encode(t,n);return n.replace(e,"<br/><br/>")}}();i._$unescape=function(){var e={r:/\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&#39;":"'","&quot;":'"',"<br/>":"\n"};return function(t){return i._$encode(e,t)}}();i._$format=function(){var e={i:!0,r:/\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\b/g},t=["上午","下午"],n=["A.M.","P.M."],a=["日","一","二","三","四","五","六"],o=["一","二","三","四","五","六","七","八","九","十","十一","十二"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];var r=function(e){e=parseInt(e)||0;return(e<10?"0":"")+e};var _=function(e){return e<12?0:1};return function(c,d,f){if(!c||!d)return"";c=i._$var2date(c);e.yyyy=c.getFullYear();e.yy=(""+e.yyyy).substr(2);e.M=c.getMonth()+1;e.MM=r(e.M);e.eM=s[e.M-1];e.cM=o[e.M-1];e.d=c.getDate();e.dd=r(e.d);e.H=c.getHours();e.HH=r(e.H);e.m=c.getMinutes();e.mm=r(e.m);e.s=c.getSeconds();e.ss=r(e.s);e.ms=c.getMilliseconds();e.w=a[c.getDay()];var l=_(e.H);e.ct=t[l];e.et=n[l];if(f)e.H=e.H%12;return i._$encode(e,d)}}();i._$var2date=function(e){var n=e;if(i._$isString(e))n=new Date(t.__str2time(e));if(!i._$isDate(n))n=new Date(e);return n};i._$fixed=function(e,t){return parseFloat(new Number(e).toFixed(t))};i._$absolute=function(){var e=/([^\/:])\/.*$/,t=/\/[^\/]+$/,i=/[#\?]/,n=location.href.split(/[?#]/)[0],a=document.createElement("a");var o=function(e){return(e||"").indexOf("://")>0};var s=function(e){return(e||"").split(i)[0].replace(t,"/")};var r=function(t,i){if(0==t.indexOf("/"))return i.replace(e,"$1")+t;else return s(i)+t};n=s(n);return function(e,t){e=(e||"").trim();if(!o(t))t=n;if(!e)return t;if(o(e))return e;e=r(e,t);a.href=e;e=a.href;return o(e)?e:a.getAttribute("href",4)}}();i._$url2origin=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){if(e.test(t||""))return RegExp.$1.toLowerCase();else return""}}();i._$string2object=function(e,t){var n={};i._$forEach((e||"").split(t),function(e){var t=e.split("=");if(t&&t.length){var i=t.shift();if(i)n[decodeURIComponent(i)]=decodeURIComponent(t.join("="))}});return n};i._$object2string=function(e,t,n){if(!e)return"";var a=[];i._$loop(e,function(e,t){if(!i._$isFunction(e)){if(i._$isDate(e))e=e.getTime();else if(i._$isArray(e))e=e.join(",");else if(i._$isObject(e))e=JSON.stringify(e);if(n)e=encodeURIComponent(e);a.push(encodeURIComponent(t)+"="+e)}});return a.join(t||",")};i._$query2object=function(e){return i._$string2object(e,"&")};i._$object2query=function(e){return i._$object2string(e,"&",!0)};i._$object2array=function(e){return t.__col2array(e)};i._$array2object=function(e,t){var n={};i._$forEach(e,function(e){var i=e;if(t)i=t(e);if(null!=i)n[i]=e});return n};i._$number2string=function(e,t){var i=(""+e).length,n=Math.max(1,parseInt(t)||0),a=n-i;if(a>0)e=new Array(a+1).join("0")+e;return""+e};i._$safeDelete=function(e,t){if(!i._$isArray(t))try{delete e[t]}catch(n){e[t]=void 0}else i._$forEach(t,function(t){i._$safeDelete(e,t)})};i._$randString=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";return function(t){t=t||10;var i=[];for(var n=0,a;n<t;++n){a=Math.floor(Math.random()*e.length);i.push(e.charAt(a))}return i.join("")}}();i._$randNumber=function(e,t){return Math.floor(Math.random()*(t-e)+e)};i._$randNumberString=function(e){e=Math.max(0,Math.min(e||8,30));var t=Math.pow(10,e-1),n=10*t;return i._$randNumber(t,n).toString()};i._$uniqueID=function(){var e=+new Date;return function(){return""+e++}}();i._$query=function(e,t){e=e||n;var i=(t||"").split(".");for(var a=0,o=i.length;a<o;a++){e=e[i[a]];if(!e)break}return e};i._$merge=function(){var e=arguments.length-1,t=arguments[e];if(i._$isFunction(t))e-=1;else t=a;var n=arguments[0]||{};for(var o=1;o<=e;o++)i._$loop(arguments[o],function(e,i){
if(!t(e,i))n[i]=e});return n};i._$fetch=function(e,t){if(t)i._$loop(e,function(e,i,n){var a=t[i];if(null!=a)n[i]=a});return e};i._$hasProperty=function(e){if(!e)return!1;if(null!=e.length)return e.length>0;var t=0;i._$loop(e,function(){t++;return t>0});return t>0};i._$objectSize=function(e){if(!e)return-1;var t=0,i;for(i in e)if(e.hasOwnProperty(i))t++;return t};if(!0){e.Q=i._$query;e.X=i._$merge;e.EX=i._$fetch;e.copy(this.NEJ,e);e.copy(e.P("nej.u"),i)}return i},"c27e07105db4b2613e9811a6e5ceab90","bcd64a407d00eaec725a70b03e0fbaf3");I$("bcb1f11e87c301403d3b823c876c2457",function(e,t,i,n,a){var o=8;var s=function(e,t){return e<<t|e>>>32-t};var r=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i};var _=function(e,t,i,n){if(e<20)return t&i|~t&n;if(e<40)return t^i^n;if(e<60)return t&i|t&n|i&n;else return t^i^n};var c=function(e){if(e<20)return 1518500249;if(e<40)return 1859775393;if(e<60)return-1894007588;else return-899497514};var d=function(){var e=function(e){return e%32},t=function(e){return 32-o-e%32};return function(i,n){var a=[],s=(1<<o)-1,r=n?e:t;for(var _=0,c=i.length*o;_<c;_+=o)a[_>>5]|=(i.charCodeAt(_/o)&s)<<r(_);return a}}();var f=function(){var e="0123456789abcdef",t=function(e){return e%4},i=function(e){return 3-e%4};return function(n,a){var o=[],s=a?t:i;for(var r=0,_=4*n.length;r<_;r++)o.push(e.charAt(n[r>>2]>>8*s(r)+4&15)+e.charAt(n[r>>2]>>8*s(r)&15));return o.join("")}}();var l=function(){var e=function(e){return e%32},t=function(e){return 32-o-e%32};return function(i,n){var a=[],s=(1<<o)-1,r=n?e:t;for(var _=0,c=32*i.length;_<c;_+=o)a.push(String.fromCharCode(i[_>>5]>>>r(_)&s));return a.join("")}}();var u=function(){var e="=",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){return e%4},n=function(e){return 3-e%4};return function(a,o){var s=[],r=o?i:n;for(var _=0,c;_<4*a.length;_+=3){c=(a[_>>2]>>8*r(_)&255)<<16|(a[_+1>>2]>>8*r(_+1)&255)<<8|a[_+2>>2]>>8*r(_+2)&255;for(var d=0;d<4;d++)s.push(8*_+6*d>32*a.length?e:t.charAt(c>>6*(3-d)&63))}return s.join("")}}();var h=function(e,t,i,n,a,o){return r(s(r(r(t,e),r(n,o)),a),i)};var m=function(e,t,i,n,a,o,s){return h(t&i|~t&n,e,t,a,o,s)};var p=function(e,t,i,n,a,o,s){return h(t&n|i&~n,e,t,a,o,s)};var g=function(e,t,i,n,a,o,s){return h(t^i^n,e,t,a,o,s)};var v=function(e,t,i,n,a,o,s){return h(i^(t|~n),e,t,a,o,s)};var b=function(e,t){e[t>>5]|=128<<t%32;e[(t+64>>>9<<4)+14]=t;var i=1732584193,n=-271733879,a=-1732584194,o=271733878;for(var s=0,_=e.length,c,d,f,l;s<_;s+=16){c=i;d=n;f=a;l=o;i=m(i,n,a,o,e[s+0],7,-680876936);o=m(o,i,n,a,e[s+1],12,-389564586);a=m(a,o,i,n,e[s+2],17,606105819);n=m(n,a,o,i,e[s+3],22,-1044525330);i=m(i,n,a,o,e[s+4],7,-176418897);o=m(o,i,n,a,e[s+5],12,1200080426);a=m(a,o,i,n,e[s+6],17,-1473231341);n=m(n,a,o,i,e[s+7],22,-45705983);i=m(i,n,a,o,e[s+8],7,1770035416);o=m(o,i,n,a,e[s+9],12,-1958414417);a=m(a,o,i,n,e[s+10],17,-42063);n=m(n,a,o,i,e[s+11],22,-1990404162);i=m(i,n,a,o,e[s+12],7,1804603682);o=m(o,i,n,a,e[s+13],12,-40341101);a=m(a,o,i,n,e[s+14],17,-1502002290);n=m(n,a,o,i,e[s+15],22,1236535329);i=p(i,n,a,o,e[s+1],5,-165796510);o=p(o,i,n,a,e[s+6],9,-1069501632);a=p(a,o,i,n,e[s+11],14,643717713);n=p(n,a,o,i,e[s+0],20,-373897302);i=p(i,n,a,o,e[s+5],5,-701558691);o=p(o,i,n,a,e[s+10],9,38016083);a=p(a,o,i,n,e[s+15],14,-660478335);n=p(n,a,o,i,e[s+4],20,-405537848);i=p(i,n,a,o,e[s+9],5,568446438);o=p(o,i,n,a,e[s+14],9,-1019803690);a=p(a,o,i,n,e[s+3],14,-187363961);n=p(n,a,o,i,e[s+8],20,1163531501);i=p(i,n,a,o,e[s+13],5,-1444681467);o=p(o,i,n,a,e[s+2],9,-51403784);a=p(a,o,i,n,e[s+7],14,1735328473);n=p(n,a,o,i,e[s+12],20,-1926607734);i=g(i,n,a,o,e[s+5],4,-378558);o=g(o,i,n,a,e[s+8],11,-2022574463);a=g(a,o,i,n,e[s+11],16,1839030562);n=g(n,a,o,i,e[s+14],23,-35309556);i=g(i,n,a,o,e[s+1],4,-1530992060);o=g(o,i,n,a,e[s+4],11,1272893353);a=g(a,o,i,n,e[s+7],16,-155497632);n=g(n,a,o,i,e[s+10],23,-1094730640);i=g(i,n,a,o,e[s+13],4,681279174);o=g(o,i,n,a,e[s+0],11,-358537222);a=g(a,o,i,n,e[s+3],16,-722521979);n=g(n,a,o,i,e[s+6],23,76029189);i=g(i,n,a,o,e[s+9],4,-640364487);o=g(o,i,n,a,e[s+12],11,-421815835);a=g(a,o,i,n,e[s+15],16,530742520);n=g(n,a,o,i,e[s+2],23,-995338651);i=v(i,n,a,o,e[s+0],6,-198630844);o=v(o,i,n,a,e[s+7],10,1126891415);a=v(a,o,i,n,e[s+14],15,-1416354905);n=v(n,a,o,i,e[s+5],21,-57434055);i=v(i,n,a,o,e[s+12],6,1700485571);o=v(o,i,n,a,e[s+3],10,-1894986606);a=v(a,o,i,n,e[s+10],15,-1051523);n=v(n,a,o,i,e[s+1],21,-2054922799);i=v(i,n,a,o,e[s+8],6,1873313359);o=v(o,i,n,a,e[s+15],10,-30611744);a=v(a,o,i,n,e[s+6],15,-1560198380);n=v(n,a,o,i,e[s+13],21,1309151649);i=v(i,n,a,o,e[s+4],6,-145523070);o=v(o,i,n,a,e[s+11],10,-1120210379);a=v(a,o,i,n,e[s+2],15,718787259);n=v(n,a,o,i,e[s+9],21,-343485551);i=r(i,c);n=r(n,d);a=r(a,f);o=r(o,l)}return[i,n,a,o]};var $=function(e,t){var i=d(e,!0);if(i.length>16)i=b(i,e.length*o);var n=Array(16),a=Array(16);for(var s=0;s<16;s++){n[s]=909522486^i[s];a[s]=1549556828^i[s]}var r=b(n.concat(d(t,!0)),512+t.length*o);return b(a.concat(r),640)};var y=function(e,t){e[t>>5]|=128<<24-t%32;e[(t+64>>9<<4)+15]=t;var i=Array(80),n=1732584193,a=-271733879,o=-1732584194,d=271733878,f=-1009589776;for(var l=0,u=e.length,h,m,p,g,v;l<u;l+=16){h=n;m=a;p=o;g=d;v=f;for(var b=0;b<80;b++){i[b]=b<16?e[l+b]:s(i[b-3]^i[b-8]^i[b-14]^i[b-16],1);var $=r(r(s(n,5),_(b,a,o,d)),r(r(f,i[b]),c(b)));f=d;d=o;o=s(a,30);a=n;n=$}n=r(n,h);a=r(a,m);o=r(o,p);d=r(d,g);f=r(f,v)}return[n,a,o,d,f]};var x=function(e,t){var i=d(e);if(i.length>16)i=y(i,e.length*o);var n=Array(16),a=Array(16);for(var s=0;s<16;s++){n[s]=909522486^i[s];a[s]=1549556828^i[s]}var r=y(n.concat(d(t)),512+t.length*o);return y(a.concat(r),672)};t._$hmacsha12hex=function(e,t){return f(x(e,t))};t._$hmacsha12b64=function(e,t){return u(x(e,t))};t._$hmacsha12str=function(e,t){return l(x(e,t))};t._$hmacmd52hex=function(e,t){return f($(e,t),!0)};t._$hmacmd52b64=function(e,t){return u($(e,t),!0)};t._$hmacmd52str=function(e,t){return l($(e,t),!0)};t._$sha12hex=function(e){return f(y(d(e),e.length*o))};t._$sha12b64=function(e){return u(y(d(e),e.length*o))};t._$sha12str=function(e){return l(y(d(e),e.length*o))};t._$md52hex=function(e){return f(b(d(e,!0),e.length*o),!0)};t._$md52b64=function(e){return u(b(d(e,!0),e.length*o),!0)};t._$md52str=function(e){return l(b(d(e,!0),e.length*o),!0)};t._$str2hex=function(e,t){return f(d(e,!t),!t)};if(!0)e.copy(e.P("nej.u"),t);return t},"c27e07105db4b2613e9811a6e5ceab90");I$("ebe0a41bbd06799dd594263af132ae98",function(e,t,i,n,a,o){var s={};i.__url2host=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){t=t||"";if(e.test(t))return RegExp.$1;else return location.protocol+"//"+location.host}}();i.__set=function(e,t){s[e]=t};i.__get=function(e){return s[e]};var r=function(){var e={portrait:{name:"portrait",dft:"portrait/"},"ajax.swf":{name:"ajax",dft:"nej_proxy_flash.swf"},"chart.swf":{name:"chart",dft:"nej_flex_chart.swf"},"audio.swf":{name:"audio",dft:"nej_player_audio.swf"},"video.swf":{name:"video",dft:"nej_player_video.swf"},"clipboard.swf":{name:"clipboard",dft:"nej_clipboard.swf"},"upload.image.swf":{name:"uploadimage",dft:"nej_upload_image.swf"}};var a=function(e){var t={};if(!e||!e.length)return t;for(var n=0,a=e.length,o;n<a;n++){o=e[n];if(o.indexOf("://")>0)t[i.__url2host(o)]=o}return t};return function(o){i.__set("root",o.root||"/res/");var s=i.__get("root");t._$loop(e,function(e,t,n){i.__set(t,o[e.name]||s+e.dft)});var r=o.p_csrf;if(r===!0)r={cookie:"AntiCSRF",param:"AntiCSRF"};r=r||n;i.__set("csrf",{param:r.param||"",cookie:r.cookie||""});i.__set("frames",a(o.p_frame));i.__set("flashs",a(o.p_flash))}}();r(this.NEJ_CONF||n);return i},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129");I$("5d2f72be05a29a2936addc3ea96b43b4",function(e,t,i,n,a,o){if("trident"===t._$KERNEL.engine)I$("5bf93d07449a5dc64839a1073d21f035",function(){e.__set("storage.swf",(this.NEJ_CONF||n).storage||e.__get("root")+"nej_storage.swf")});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="3.0")I$("da4a28a0c8da24dd0834421919ffca53",function(){e.__set("blank.png",(this.NEJ_CONF||n).blank||e.__get("root")+"nej_blank.gif")});return e},"ebe0a41bbd06799dd594263af132ae98","b5a2ea56adb918d7d443468b3a9b53d1");I$("1abf69011eed38414af6c85d334eac2c",function(e,t,i,n,a,o){i._$getFrameProxy=function(e){var n=t.__url2host(e);return i._$get("frames")[n]||n+"/res/nej_proxy_frame.html"};i._$getFlashProxy=function(e){return i._$get("flashs")[t.__url2host(e)]};i._$get=function(e){return t.__get(e)};if(!0)e.copy(e.P("nej.c"),i);return i},"c27e07105db4b2613e9811a6e5ceab90","5d2f72be05a29a2936addc3ea96b43b4");I$("afa71b55d933063687962bda51d6839c",function(e,t,i,n,a,o){var s=+new Date;i._$CODE_NOTFUND=1e4-s;i._$CODE_NOTASGN=10001-s;i._$CODE_NOTSPOT=10002-s;i._$CODE_TIMEOUT=10003-s;i._$CODE_ERREVAL=10004-s;i._$CODE_ERRCABK=10005-s;i._$CODE_ERRSERV=10006-s;i._$CODE_ERRABRT=10007-s;i._$HEAD_CT="Content-Type";i._$HEAD_CT_PLAN="text/plain";i._$HEAD_CT_FILE="multipart/form-data";i._$HEAD_CT_FORM="application/x-www-form-urlencoded";i._$BLANK_IMAGE=t._$get("blank.png")||"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";if(!0)e.copy(e.P("nej.g"),i);return i},"c27e07105db4b2613e9811a6e5ceab90","1abf69011eed38414af6c85d334eac2c");I$("c2028585a730a88452fc7218e9c1ddab",function(e,t){var i={};t._$merge=function(t){e._$merge(i,t)};t._$dump=function(){return i};t._$clear=function(){i={}};return t},"2ad7178887dc8cdca6f726aa3bb0d129");I$("04a4123ef467ee250b069f7957244307",function(e,t,i,n,a,o){i.__getElementById=function(e,t){if(e.getElementById)return e.getElementById(""+t);try{return e.querySelector("#"+t)}catch(i){return null}};i.__getChildren=function(t){return e._$object2array(t.children)};i.__getElementsByClassName=function(t,i){return e._$object2array(t.getElementsByClassName(i))};i.__nextSibling=function(e){return e.nextElementSibling};i.__previousSibling=function(e){return e.previousElementSibling};i.__dataset=function(e,t,i){e.dataset=e.dataset||{};if(void 0!==i)e.dataset[t]=i;
return e.dataset[t]};i.__getAttribute=function(e,t){return e.getAttribute(t)};i.__serializeDOM2XML=function(e){return(new XMLSerializer).serializeToString(e)||""};i.__parseDOMFromXML=function(e){var t=(new DOMParser).parseFromString(e,"text/xml").documentElement;return"parsererror"==t.nodeName?null:t};i.__fullScreen=function(){};i.__mask=function(){};i.__unmask=function(){};var s=t._$SUPPORT,r=t._$KERNEL.prefix;i.__isMatchedName=function(){var e=/^([a-z]+?)[A-Z]/;return function(t,i){return!!(i[t]||e.test(t)&&i[RegExp.$1])}}();i.__isNeedPrefixed=function(){var t=e._$array2object(["animation","transform","transition","appearance","userSelect","box","flex","column"]);return function(e){return i.__isMatchedName(e,t)}}();i.__fmtStyleName=function(){var e=/-([a-z])/g;return function(t){t=t||"";return t.replace(e,function(e,t){return t.toUpperCase()})}}();i.__getStyleName=function(){var e=/^[a-z]/,t=r.css||"";return function(n){n=i.__fmtStyleName(n);if(!i.__isNeedPrefixed(n))return n;else return t+n.replace(e,function(e){return e.toUpperCase()})}}();i.__getStyleValue=function(e,t){var n=window.getComputedStyle(e,null);return n[i.__getStyleName(t)]||""};i.__setStyleValue=function(e,t,n){e.style[i.__getStyleName(t)]=n};i.__getCSSMatrix=function(){var t=/\((.*?)\)/,i=/\s*,\s*/,n=["CSSMatrix",r.clz+"CSSMatrix"],a=["m11","m12","m21","m22","m41","m42"];var o=function(n){var o={};if(t.test(n||""))e._$forEach(RegExp.$1.split(i),function(e,t){o[a[t]]=e});return o};return function(t){var i;e._$forIn(n,function(e){if(this[e]){i=new this[e](t||"");return!0}});return!i?o(t):i}}();i.__injectCSSText=function(e,t){e.textContent=t};i.__processCSSText=function(){var t=/\$<(.*?)>/gi,a=/\{(.*?)\}/g,o="-"+r.css.toLowerCase()+"-",_={scale:"scale({x|1},{y|1})",rotate:"rotate({a})",translate:"translate({x},{y})",matrix:"matrix({m11},{m12},{m21},{m22},{m41},{m42})"},c={scale:"scale3d({x|1},{y|1},{z|1})",rotate:"rotate3d({x},{y},{z},{a})",translate:"translate3d({x},{y},{z})",matrix:"matrix3d({m11},{m12},{m13},{m14},{m21},{m22},{m23},{m24},{m31},{m32},{m33|1},{m34},{m41},{m42},{m43},{m44|1})"};var d=function(e,t){t=t||n;return e.replace(a,function(e,i){var n=i.split("|");return t[n[0]]||n[1]||"0"})};i.__processTransformValue=function(e,t){var i=(!s.css3d?_:c)[e.trim()];if(i)return d(i,t);else return""};return function(n){if(!n.replace)return n;else return n.replace(t,function(t,n){if("vendor"===n)return o;var a=(n||"").split("|");return i.__processTransformValue(a[0],e._$query2object(a[1]))||t})}}();i.__appendCSSText=function(e,t){var i=e.sheet,n=i.cssRules.length;i.insertRule(t,n);return i.cssRules[n]};i.__getClassList=function(){var e=/\s+/;return function(t){t=(t||"").trim();return t?t.split(e):null}}();i.__processClassName=function(t,n,a){if("replace"!=n)e._$forEach(i.__getClassList(a),function(e){t.classList[n](e)});else{i.__processClassName(t,"remove",a);i.__processClassName(t,"add",arguments[3])}};i.__hasClassName=function(t,n){var a=t.classList;if(!a||!a.length)return!1;else return e._$indexOf(i.__getClassList(n),function(e){return a.contains(e)})>=0};!function(){if(!s.css3d){var e=i.__getCSSMatrix();s.css3d=!!e&&null!=e.m41}}();return i},"2ad7178887dc8cdca6f726aa3bb0d129","b5a2ea56adb918d7d443468b3a9b53d1");I$("6fd28038369a25bdc36a1890427d6095",function(e,t,i,n,a,o,s){if("trident"===t._$KERNEL.engine)I$("98a88788c4f4913766a8e1df7d328f6a",function(){e.__getChildren=e.__getChildren._$aop(function(e){var t=e.args[0];if(!t.children){e.stopped=!0;var n=[];i._$forEach(t.childNodes,function(e){if(1==e.nodeType)n.push(e)});e.value=n}})});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="6.0")I$("ac7c0130549f7ed6341abcc39676d00d",function(){e.__dataset=function(){var e={},t="data-",n=/\-(.{1})/gi;var a=function(a){var o=a.id;if(!e[o]){var s={};i._$forEach(a.attributes,function(e){var i=e.nodeName;if(0==i.indexOf(t)){i=i.replace(t,"").replace(n,function(e,t){return t.toUpperCase()});s[i]=e.nodeValue||""}});e[o]=s}};return function(t,i,n){a(t);var o=e[t.id];if(void 0!==n)o[i]=n;return o[i]}}()});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="5.0")I$("8370aa9f1721f7b7230536bdfc3a7367",function(){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}e.__injectCSSText=function(){var t=30;return e.__injectCSSText._$aop(function(e){var i=e.args[0];if(i.styleSheet){e.stopped=!0;var n=e.args[1];var a=document.styleSheets;if(a.length>t){i=a[t];n=i.cssText+n}else i=i.styleSheet;i.cssText=n}})}();e.__getClassRegExp=function(){var e=/\s+/g;return function(t){t=(t||"").trim().replace(e,"|");return!t?null:new RegExp("(\\s|^)(?:"+t+")(?=\\s|$)","g")}}();e.__processClassName=function(t,i,n){n=n||"";var a=t.className||"",o=e.__getClassRegExp(n+" "+(arguments[3]||""));var s=a;if(o)s=s.replace(o,"");switch(i){case"remove":n="";break;case"replace":n=arguments[3]||""}s=(s+" "+n).trim();if(a!=s)t.className=s};e.__hasClassName=function(t,i){var n=e.__getClassRegExp(i);if(n)return n.test(t.className||"");else return!1}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("5885221310f12cdd36b35e2cc646678f",function(){e.__getElementsByClassName=function(e,t){var n=[],a=new RegExp("(\\s|^)(?:"+t.replace(/\s+/g,"|")+")(?=\\s|$)");i._$forEach(e.getElementsByTagName("*"),function(e){if(a.test(e.className))n.push(e)});return n};e.__nextSibling=function(e){for(;e=e.nextSibling;)if(1==e.nodeType)return e};e.__previousSibling=function(e){for(;e=e.previousSibling;)if(1==e.nodeType)return e};e.__serializeDOM2XML=function(e){return"xml"in e?e.xml:e.outerHTML};e.__parseDOMFromXML=function(){var e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0"];var t=function(){try{for(var t=0,i=e.length;t<i;t++)return new ActiveXObject(e[t])}catch(n){return null}};return function(e){var i=t();if(i&&i.loadXML(e)&&!i.parseError.errorCode)return i.documentElement;else return null}}();e.__getStyleValue=function(){var t=/opacity\s*=\s*([\d]+)/i;var i={opacity:function(e){var i=0;if(t.test(e.filter||""))i=parseFloat(RegExp.$1)/100;return i}};return function(t,n){var a=t.currentStyle,o=i[n];if(o)return o(a);else return a[e.__getStyleName(n)]||""}}();e.__setStyleValue=function(){var t={opacity:function(e,t){e.style.filter="alpha(opacity="+100*t+")"}};return function(i,n,a){var o=t[n];if(o)o(i,a);else i.style[e.__getStyleName(n)]=a}}();e.__appendCSSText=function(e,t){var i=e.styleSheet,n=i.rules.length,a=t.split(/[\{\}]/);i.addRule(a[0],a[1],n);return i.rules[n]}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="3.0")I$("cbca6276fd8744fe308d754d7037cd23",function(){e.__getAttribute=e.__getAttribute._$aop(null,function(e){var t=e.args;if("maxlength"==t[1]&&2147483647==e.value)e.value=null})});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="2.0")I$("f29f40de3272b2677a479c1c5042fd0c",function(){e.__fullScreen=function(e,t){var i=e.style;i.width=t.scrollWidth+"px";i.height=t.scrollHeight+"px"};e.__mask=function(){var t={};e.__unmask=function(e){var i=e.id,n=t[i];if(n){delete t[i];n.parentNode.removeChild(n)}};return function(e){var i=e.id,n=t[i];if(!n){n=document.createElement("iframe");n.style.position="absolute";t[i]=n}var a=n.style,o=e.style;a.top=(parseInt(o.top)||0)+"px";a.left=(parseInt(o.left)||0)+"px";a.width=e.offsetWidth+"px";a.height=e.offsetHeight+"px";e.insertAdjacentElement("beforeBegin",n);return n}}()});if("gecko"===t._$KERNEL.engine)I$("7ed37d65ca05291dd5d4742abaae967b",function(){if(!t._$SUPPORT.css3d)t._$SUPPORT.css3d="MozPerspective"in document.body.style;if(!("insertAdjacentElement"in document.body))HTMLElement.prototype.insertAdjacentElement=function(e,t){if(e&&t)switch(e){case"beforeEnd":this.appendChild(t);return;case"beforeBegin":this.parentNode.insertBefore(t,this);return;case"afterBegin":!this.firstChild?this.appendChild(t):this.insertBefore(t,this.firstChild);return;case"afterEnd":!this.nextSibling?this.parentNode.appendChild(t):this.parentNode.insertBefore(t,this.nextSibling);return}};if(!("innerText"in document.body)){HTMLElement.prototype["__defineGetter__"]("innerText",function(){return this.textContent});HTMLElement.prototype["__defineSetter__"]("innerText",function(e){this.textContent=e})}});return e},"04a4123ef467ee250b069f7957244307","b5a2ea56adb918d7d443468b3a9b53d1","2ad7178887dc8cdca6f726aa3bb0d129");I$("5bd21216eb7851bb48d84acf022ca85f",function(e,t,i,n,a,o,s,r,_,c){var d={},f,l={},u={},h=document.createDocumentFragment();if(!document.head)document.head=document.getElementsByTagName("head")[0]||document.body;s.dump=function(){return{pool:l,dirty:u,fragment:h}};s._$id=d._$id=function(e){e=s._$get(e);if(e){var t=e.id?e.id:"auto-id-"+i._$uniqueID();if(!("id"in e))l[t]=e;e.id=t;if(!s._$get(t))u[t]=e;return t}};s._$get=function(e){try{var t=l[""+e]}catch(n){console.log(n)}if(t)return t;if(!i._$isString(e)&&!i._$isNumber(e))return e;var t=document.getElementById(e);if(!t)t=o.__getElementById(h,e);if(t)delete u[e];return t||u[e]};s._$getChildren=d._$getChildren=function(e,t){e=s._$get(e);if(!e)return null;var n=o.__getChildren(e);if(t)i._$reverseEach(n,function(e,i,n){if(!s._$hasClassName(e,t))n.splice(i,1)});return n};s._$getParent=function(){var e;var t=function(t,i){var n=t.split(":");if(n.length>1){if(!e)e={a:s._$attr,d:s._$dataset,c:s._$hasClassName,t:function(e,t){return(e.tagName||"").toLowerCase()===t}};var a=e[n[0]];if(a)return!!a(i,n[1]);t=n[1]}return!!s._$attr(i,t)||!!s._$dataset(i,t)||s._$hasClassName(i,t)};return function(e,n){e=s._$get(e);if(e){if(!n)return e;if(i._$isString(n))n=t._$bind(null,n);if(i._$isFunction(n)){for(;e;){if(n(e))return e;e=e.parentNode}return null}return e}}}();s._$getByClassName=d._$getByClassName=function(e,t){e=s._$get(e);return!e?null:o.__getElementsByClassName(e,t.trim())};s._$getSibling=d._$getSibling=function(){var e=function(){return!0};return function(t,n){t=s._$get(t);if(!t)return null;var a={backward:!1,filter:e};if(i._$isFunction(n))a.filter=n;else a=i._$fetch(a,n);var r=a.backward?o.__previousSibling:o.__nextSibling;for(;(t=r(t))&&!a.filter(t););return t}}();s._$getScrollViewPort=function(e){
e=s._$get(e);if(e){e=e.parentNode;for(;e&&!(e.scrollHeight>e.clientHeight);)e=e.parentNode;if(e)return e}var t=document.body.scrollHeight,i=document.documentElement.scrollHeight;return i>=t?document.documentElement:document.body};s._$getPageBox=function(){var e=function(e){var t=0;i._$forEach(e,function(e){if(e)if(!t)t=e;else t=Math.min(t,e)});return t};var t=[{main:"scroll",sub:["Top","Left"],func:function(e,t,i){return Math.max(t["scroll"+e],i["scroll"+e])}},{main:"client",sub:["Width","Height"],func:function(t,i,n){return e([i["client"+t],i["offset"+t],n["client"+t],n["offset"+t]])}},{main:"scroll",sub:["Width","Height"],func:function(e,t,i,n){return Math.max(n["client"+e],t["scroll"+e],i["scroll"+e])}}];return function(e){var n={},a=e||document,o=a.body,s=a.documentElement;i._$forEach(t,function(e){var t=e.main;i._$forEach(e.sub,function(i){n[t+i]=e.func(i,o,s,n)})});return n}}();s._$getMaxBox=function(e,t){var n=i._$merge({},e),a=t.width/t.height,o=e.width/e.height;if(a>o&&e.height>t.height){n.height=t.height;n.width=n.height*o}if(a<o&&e.width>t.width){n.width=t.width;n.height=n.width/o}return n};s._$scrollTo=d._$scrollTo=function(e){var t=s._$offset(e);window.scrollTo(t.x,t.y)};s._$align=function(){var e=/\s+/;var t={left:function(){return 0},center:function(e,t){return(e.width-t.width)/2},right:function(e,t){return e.width-t.width},top:function(){return 0},middle:function(e,t){return(e.height-t.height)/2},bottom:function(e,t){return e.height-t.height}};return function(i,n,a){var o={},s=(a||"").split(e),r=t[s[1]]||t.middle,_=t[s[0]]||t.center;o.top=r(i,n);o.left=_(i,n);return o}}();s._$offset=d._$offset=function(){var e=function(e){return e==document.body||e==document.documentElement};return function(t,i){t=s._$get(t);if(!t)return null;i=s._$get(i)||null;var n=t,a={x:0,y:0},o,r,_;for(;n&&n!=i;){o=e(n)||n==t;r=o?0:n.scrollLeft;_=parseInt(s._$getStyle(n,"borderLeftWidth"))||0;a.x+=n.offsetLeft+_-r;r=o?0:n.scrollTop;_=parseInt(s._$getStyle(n,"borderTopWidth"))||0;a.y+=n.offsetTop+_-r;n=n.offsetParent}return a}}();s._$fullScreen=d._$fullScreen=function(e){e=s._$get(e);if(e)o.__fullScreen(e,s._$getPageBox())};s._$mask=d._$mask=function(e){e=s._$get(e);if(e){s._$id(e);return o.__mask(e)}return null};s._$unmask=d._$unmask=function(e){e=s._$get(e);if(e){s._$id(e);return o.__unmask(e)}return null};s._$create=function(){var e={a:{href:"#",hideFocus:!0},style:{type:"text/css"},link:{type:"text/css",rel:"stylesheet"},iframe:{frameBorder:0},script:{defer:!0,type:"text/javascript"}};return function(t,n,a){var o=document.createElement(t),r=e[t.toLowerCase()];i._$merge(o,r);if(n)o.className=n;a=s._$get(a);if(a)a.appendChild(o);else if(!r)h.appendChild(o);return o}}();s._$createXFrame=function(){var e=function(){if(location.hostname==document.domain)return"about:blank";else return'javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();})();'};var t=function(e){e=e.trim();if(!e)return s._$create("iframe");var t;try{t=document.createElement('<iframe name="'+e+'"></iframe>');t.frameBorder=0}catch(i){t=s._$create("iframe");t.name=e}return t};return function(a){a=a||r;var o=t(a.name||"");if(!a.visible)o.style.display="none";if(i._$isFunction(a.onload))n._$addEvent(o,"load",function(e){if(o.src){n._$clearEvent(o,"load");a.onload(e)}});var _=a.parent;if(i._$isFunction(_))try{_(o)}catch(c){}else(s._$get(_)||document.body).appendChild(o);var d=a.src||e();window.setTimeout(function(){o.src=d},0);return o}}();s._$remove=d._$remove=function(){var e={img:function(e){e.src=t._$BLANK_IMAGE},iframe:function(e){e.src="about:blank"}};var a=function(t,n){if(n){if(t.getElementsByTagName)i._$forEach(t.getElementsByTagName(n),a)}else{var o=(t.tagName||"").toLowerCase(),s=e[o];if(s)s(t)}};return function(e){e=s._$get(e);if(e){if(!arguments[1])n._$clearEvent(e);a(e);a(e,"img");a(e,"iframe");if(e.parentNode)e.parentNode.removeChild(e)}}}();s._$removeByEC=d._$removeByEC=function(e){e=s._$get(e);if(e)try{h.appendChild(e)}catch(t){console.error(t)}};s._$clearChildren=d._$clearChildren=function(e){e=s._$get(e);if(e)i._$reverseEach(e.childNodes,function(e){s._$remove(e)})};s._$wrapInline=d._$wrapInline=function(){var e,t=/\s+/;var i=function(){if(!e){e=s._$pushCSSText(".#<uispace>{position:relative;zoom:1;}.#<uispace>-show{position:absolute;top:0;left:100%;cursor:text;white-space:nowrap;overflow:hidden;}");s._$dumpCSSText()}};return function(n,a){n=s._$get(n);if(!n)return null;i();a=a||r;var o=n.parentNode;if(!s._$hasClassName(o,e)){o=s._$create("span",e);n.insertAdjacentElement("beforeBegin",o);o.appendChild(n)}var _=a.nid||"",c=s._$getByClassName(o,_||e+"-show")[0];if(!c){var d=((a.clazz||"")+" "+_).trim();d=e+"-show"+(!d?"":" ")+d;c=s._$create(a.tag||"span",d);o.appendChild(c)}var d=a.clazz;if(d){d=(d||"").trim().split(t)[0]+"-parent";s._$addClassName(o,d)}return c}}();s._$dataset=d._$dataset=function(e,t,n){var a=s._$id(e);if(!a)return null;if(i._$isString(t))return o.__dataset(s._$get(e),t,n);if(i._$isObject(t)){var r={};i._$forIn(t,function(e,t){r[t]=s._$dataset(a,t,e)});return r}if(i._$isArray(t)){var r={};i._$forEach(t,function(e){r[e]=s._$dataset(a,e)});return r}return null};s._$attr=d._$attr=function(e,t,i){e=s._$get(e);if(!e)return"";if(void 0!==i&&e.setAttribute)e.setAttribute(t,i);return o.__getAttribute(e,t)};s._$html2node=function(){var e=/<(.*?)(?=\s|>)/i,t={li:"ul",tr:"tbody",td:"tr",th:"tr",option:"select"};return function(i){var n;if(e.test(i))n=t[(RegExp.$1||"").toLowerCase()]||"";var a=s._$create(n||"div");a.innerHTML=i;var o=s._$getChildren(a);return o.length>1?a:o[0]}}();s._$dom2xml=d._$dom2xml=function(e){e=s._$get(e);return!e?"":o.__serializeDOM2XML(e)};s._$xml2dom=function(e){e=(e||"").trim();return!e?null:o.__parseDOMFromXML(e)};s._$dom2object=d._$dom2object=function(e,t){t=t||{};e=s._$get(e);if(!e)return t;var n=e.tagName.toLowerCase(),a=s._$getChildren(e);if(!a||!a.length){t[n]=e.textContent||e.text||"";return t}var o={};t[n]=o;i._$forEach(a,function(e){s._$dom2object(e,o)});return t};s._$xml2object=function(e){try{return s._$dom2object(s._$xml2dom(e))}catch(t){return null}};s._$text2type=function(){var e={xml:function(e){return s._$xml2dom(e)},json:function(e){try{return JSON.parse(e)}catch(t){return null}},dft:function(e){return e}};return function(t,i){i=(i||"").toLowerCase();return(e[i]||e.dft)(t||"")}}();s._$style=d._$style=function(e,t){e=s._$get(e);if(e)i._$loop(t,function(t,i){s._$setStyle(e,i,t)})};s._$setStyle=d._$setStyle=function(e,t,i){e=s._$get(e);if(e)o.__setStyleValue(e,t,o.__processCSSText(i))};s._$getStyle=d._$getStyle=function(e,t){e=s._$get(e);return!e?"":o.__getStyleValue(e,t)};s._$addScript=function(e){try{e=e.trim();if(e)return new Function(e)()}catch(t){console.error(t.message);console.error(t.stack)}};s._$addStyle=function(){var e=/[\s\r\n]+/gi;return function(t){t=(t||"").replace(e," ").trim();var i=null;if(t){i=s._$create("style");document.head.appendChild(i);o.__injectCSSText(i,o.__processCSSText(t))}return i}}();s._$pushCSSText=function(){var e=/#<(.*?)>/g,t=+new Date;return function(t,n){if(!f)f=[];var a="auto-"+i._$uniqueID(),o=i._$merge({uispace:a},n);f.push(t.replace(e,function(e,t){return o[t]||e}));return a}}();s._$dumpCSSText=function(){if(f){s._$addStyle(f.join(" "));f=null}};s._$appendCSSText=d._$appendCSSText=function(e,t){e=s._$get(e);return!e?null:o.__appendCSSText(e,o.__processCSSText(t))};s._$addClassName=d._$addClassName=function(e,t){if(t){e=s._$get(e);if(e)o.__processClassName(e,"add",t)}};s._$delClassName=d._$delClassName=function(e,t){e=s._$get(e);if(e)o.__processClassName(e,"remove",t)};s._$replaceClassName=d._$replaceClassName=function(e,t,i){e=s._$get(e);if(e)o.__processClassName(e,"replace",t,i)};s._$hasClassName=d._$hasClassName=function(e,t){e=s._$get(e);if(e)return o.__hasClassName(e,t);else return!1};s._$matrix=function(e){e=(e||"").trim();return o.__getCSSMatrix(e)};s._$css3d=d._$css3d=function(e,t,i){e=s._$get(e);if(e){var n=o.__processTransformValue(t,i);if(n)s._$setStyle(e,"transform",n)}};a._$merge(d);if(!0)e.copy(e.P("nej.e"),s);return s},"c27e07105db4b2613e9811a6e5ceab90","afa71b55d933063687962bda51d6839c","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","c2028585a730a88452fc7218e9c1ddab","6fd28038369a25bdc36a1890427d6095");I$("693569efa33ae3bece296ceed1bb0a9c",function(e,t,i,n,a,o){i.__checkEvent=function(){var e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},i=t._$KERNEL.prefix,n={transitionend:"TransitionEnd",animationend:"AnimationEnd",animationstart:"AnimationStart",animationiteration:"AnimationIteration",visibilitychange:"visibilitychange",fullscreenchange:"fullscreenchange"};var a={enter:function(e,t,i){var n={type:"keypress"};if(i)n.handler=function(t){if(13===t.keyCode)i.call(e,t)};return n}};var o=function(e){return(i.evt||i.pro)+e};return function(t,i,s){var r={type:i,handler:s};if(!("on"+i in t)){var _=e[i];if(_){r.type=_;return r}var _=n[i];if(_){r.type=o(_);return r}var c=a[i];if(c)return c.apply(null,arguments)}return r}}();i.__addEvent=function(){var e=arguments;if(!1)if(!("on"+e[1]in e[0]))console.log("not support event["+e[1]+"] for "+e[0]);e[0].addEventListener(e[1],e[2],e[3])};i.__delEvent=function(){var e=arguments;e[0].removeEventListener(e[1],e[2],e[3])};i.__dispatchEvent=function(t,i,n){var a=document.createEvent("Event");a.initEvent(i,!0,!0);e._$merge(a,n);t.dispatchEvent(a)};return i},"2ad7178887dc8cdca6f726aa3bb0d129","b5a2ea56adb918d7d443468b3a9b53d1");I$("95a2da00ba249bd2ee362d1401dd2ea3",function(e,t,i,n,a,o,s){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>="6.0")I$("84a8e087d31a0737d99e69838d232b80",function(){t.__checkEvent=function(){var e={touchcancel:"MSPointerCancel",touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp",fullscreenchange:"MSFullscreenChange"};return t.__checkEvent._$aop(function(t){var i=t.args;var n=e[i[1]];if(n){t.stopped=!0;t.value={type:n,handler:i[2]}}})}()});if("trident"===e._$KERNEL.engine&&"5.0"==e._$KERNEL.release)I$("0eb6dd2e50b6e998662a170156f4dda4",function(){
t.__checkEvent=function(){var e={};var i={input:function(t,i,n){if(!n)return{type:i};else return{type:i,handler:function(i){var a=t.id;e[a]=t.value;n.call(t,i)},link:[[document,"selectionchange",function(i){var a=t.id;if(t==document.activeElement){if(e[a]!==t.value){e[a]=t.value;n.call(t,i)}}else delete e[a]}]]}}};return t.__checkEvent._$aop(function(e){var t=e.args;var n=i[t[1]];if(n){e.stopped=!0;e.value=n.apply(null,t)}})}()});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>="5.0")I$("3b0ace88ba4c0c9b59f84d945811d345",function(){var e={propertychange:1};t.__addEvent=t.__addEvent._$aop(function(t){var i=t.args;if(null!=e[i[1]]&&i[0].attachEvent){t.stopped=!0;i[0].attachEvent("on"+i[1],i[2])}});t.__delEvent=t.__delEvent._$aop(function(t){var i=t.args,n=e[i[1]];if(null!=e[i[1]]&&i[0].detachEvent){t.stopped=!0;i[0].detachEvent("on"+i[1],i[2])}})});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="4.0")I$("6cc355d3ad2fd0e5d1691d8ff64d9fca",function(){t.__checkEvent=function(){var e={};var i={input:function(t,i,n){var a={type:"propertychange"};if(n){var o=t.id;var s=function(i){if(t.value&&!e["x-"+o]){e["x-"+o]=!0;n.call(t,i)}};a.handler=function(i){if("value"in t&&"value"==i.propertyName){if(e[o])return;e[o]=!0;n.call(t,i);delete e[o]}};a.link=[[t,"keyup",s],[t,"mouseup",s],[t,"mousemove",s]];a.destroy=function(){delete e[o];delete e["x-"+o]}}return a},load:function(e,t,i){var n={type:"readystatechange"};if(i)n.handler=function(t){if("loaded"==e.readyState||"complete"==e.readyState)i.call(e,t)};return n}};return t.__checkEvent._$aop(function(e){var t=e.args;var n=i[t[1]];if(n){e.stopped=!0;e.value=n.apply(null,t)}if(t[2])t[2]=t[2]._$bind(t[0])})}();t.__addEvent=function(){var e=arguments;if(!1)if(!("on"+e[1]in e[0]))console.log("not support event["+e[1]+"] for "+e[0]);e[0].attachEvent("on"+e[1],e[2])};t.__delEvent=function(){var e=arguments;e[0].detachEvent("on"+e[1],e[2])};t.__dispatchEvent=function(){var e={propertychange:{propertyName:"value"}};return function(t,n,a){var o=document.createEventObject();try{i._$merge(o,e[n],a);t.fireEvent("on"+n,o)}catch(s){console.error(s.message);console.error(s.stack)}}}()});if("gecko"===e._$KERNEL.engine)I$("f4a354fd4a2a9e99836122ad5a7ef319",function(){t.__checkEvent=function(){var e=/^(?:transitionend|animationend|animationstart|animationiteration)$/i;var i={mousewheel:function(e,t,i){var n={type:"MozMousePixelScroll"};if(i)n.handler=function(t){var n=t.detail;t.wheelDelta=-n;t.wheelDeltaY=-n;t.wheelDeltaX=0;i.call(e,t)};return n}};return t.__checkEvent._$aop(function(t){var n=t.args;if(e.test(n[1])){t.stopped=!0;t.value={type:n[1],handler:n[2]}}var a=i[n[1]];if(a){t.stopped=!0;t.value=a.apply(null,n)}})}()});return t},"b5a2ea56adb918d7d443468b3a9b53d1","693569efa33ae3bece296ceed1bb0a9c","2ad7178887dc8cdca6f726aa3bb0d129");I$("7b946b5cd842c1aceab62d37f3506966",function(e,t,i,n,a,o,s,r,_){var c={},d={};var f=function(){var e=/[\s,;]+/;return function(t){var t=(t||"").trim().toLowerCase();return!t?null:t.split(e)}}();var l=function(e,i,n){var a="page"+i;return null!=e[a]?e[a]:e["client"+i]+t._$getPageBox()["scroll"+n]};var u=function(e,t,i){var n="scroll"+i;_node=o._$getElement(e),_xret=l(e,t,i);for(;_node&&_node!=document.body&&_node!=document.documentElement;){_xret+=_node[n]||0;_node=_node.parentNode}return _xret};var h=function(e,n,a,o){var s={};e=t._$get(e);if(!e)return null;t._$id(e);s.element=e;if(!i._$isFunction(a))return null;s.handler=a;var n=f(n);if(!n)return null;s.type=n;s.capture=!!o;return s};o._$addEvent=d._$addEvent=function(){var e=function(e,i,n){var a=t._$id(i.element),o=c[a]||{},s=o[e]||[];s.push({type:n.type||e,func:n.handler||i.handler,sfun:i.handler,capt:i.capture,link:n.link,destroy:n.destroy});o[e]=s;c[a]=o};return function(){var n=h.apply(null,arguments);if(n)i._$forEach(n.type,function(o){var s=a.__checkEvent(n.element,o,n.handler);a.__addEvent(n.element,s.type,s.handler,n.capture);i._$forIn(s.link,function(e){e[3]=!!e[3];a.__addEvent.apply(a,e);e[0]=t._$id(e[0])});e(o,n,s)})}}();o._$delEvent=d._$delEvent=function(){var e=function(e,n){var a=t._$id(n.element),o=c[a]||s,r=o[e],_=i._$indexOf(r,function(e){return e.sfun===n.handler&&e.capt===n.capture});var d=null;if(_>=0){var f=r.splice(_,1)[0];d=[[n.element,f.type,f.func,n.capture]];if(f.link){i._$forEach(f.link,function(e){e[0]=t._$get(e[0])});d.push.apply(d,f.link)}if(f.destroy)f.destroy();if(!r.length)delete o[e];if(!i._$hasProperty(o))delete c[a]}return d};return function(){var t=h.apply(null,arguments);if(t)i._$forEach(t.type,function(n){i._$forEach(e(n,t),function(e){a.__delEvent.apply(a,e)})})}}();o._$clearEvent=d._$clearEvent=function(){var e=function(e,t,n){i._$reverseEach(n,function(i){o._$delEvent(e,t,i.sfun,i.capt)})};return function(n,a){var s=t._$id(n);if(s){var r=c[s];if(r){a=f(a);if(a)i._$forEach(a,function(t){e(s,t,r[t])});else i._$loop(r,function(e,t){o._$clearEvent(n,t)})}}}}();o._$dispatchEvent=d._$dispatchEvent=function(e,n,o){var e=t._$get(e);if(e)i._$forEach(f(n),function(t){var i=a.__checkEvent(e,t);a.__dispatchEvent(e,i.type,o)})};o._$getElement=function(){var e;var n=function(i,n){var a=i.split(":");if(a.length>1){if(!e)e={a:t._$attr,d:t._$dataset,c:t._$hasClassName,t:function(e,t){return(e.tagName||"").toLowerCase()===t}};var o=e[a[0]];if(o)return!!o(n,a[1]);i=a[1]}return!!t._$attr(n,i)||!!t._$dataset(n,i)||t._$hasClassName(n,i)};return function(e){if(!e)return null;var t=e.target||e.srcElement,a=arguments[1];if(!a)return t;if(i._$isString(a))a=n._$bind(null,a);if(i._$isFunction(a)){for(;t;){if(a(t))return t;t=t.parentNode}return null}return t}}();o._$stop=function(e){o._$stopBubble(e);o._$stopDefault(e)};o._$stopBubble=function(e){if(e)e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};o._$stopDefault=function(e){if(e)e.preventDefault?e.preventDefault():e.returnValue=!1};o._$page=function(e){return{x:o._$pageX(e),y:o._$pageY(e)}};o._$pageX=function(e){return u(e,"X","Left")};o._$pageY=function(e){return u(e,"Y","Top")};o._$clientX=function(e){return l(e,"X","Left")};o._$clientY=function(e){return l(e,"Y","Top")};n._$merge(d);if(!0)e.copy(e.P("nej.v"),o);return o},"c27e07105db4b2613e9811a6e5ceab90","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","c2028585a730a88452fc7218e9c1ddab","95a2da00ba249bd2ee362d1401dd2ea3");!function(){if("undefined"==typeof TrimPath){TrimPath={};if("undefined"!=typeof exports)TrimPath=exports}var e={},t=[],i=/\s+/g,n=+new Date,a,o,s;var r=function(){var e=/^\s*[\[\{'"].*?[\]\}'"]\s*$/,t=/[\&\|\<\>\+\-\*\/\%\,\(\)\[\]\?\:\!\=\;]/,i=/^(?:defined|null|undefined|true|false|instanceof|new|this|typeof|\$v|[\d]+)$/i,n=/^new\s+/,a=/['"]/;var o=function(t){if(!e.test(t)){t=t.split(".")[0].trim();if(t&&!a.test(t)){t=t.replace(n,"");try{if(i.test(t))return;s[t]=1}catch(o){}}}};return function(i){i=i||"";if(i&&!e.test(i)){var n=i.split(t);for(var a=0,s=n.length;a<s;a++)o(n[a])}}}();var _=function(e){if("in"!=e[2])throw"bad for loop statement: "+e.join(" ");t.push(e[1]);r(e[3]);return"var __HASH__"+e[1]+" = "+e[3]+","+e[1]+","+e[1]+"_count=0;if (!!__HASH__"+e[1]+")for(var "+e[1]+"_key in __HASH__"+e[1]+"){"+e[1]+" = __HASH__"+e[1]+"["+e[1]+"_key];if (typeof("+e[1]+')=="function") continue;'+e[1]+"_count++;"};var c=function(){var e=t[t.length-1];return"}; if(!__HASH__"+e+"||!"+e+"_count){"};var d=function(){t.pop();return"};"};var f=function(e){if("as"!=e[2])throw"bad for list loop statement: "+e.join(" ");var t=e[1].split("..");if(t.length>1){r(t[0]);r(t[1]);return"for(var "+e[3]+","+e[3]+"_index=0,"+e[3]+"_beg="+t[0]+","+e[3]+"_end="+t[1]+","+e[3]+"_length=parseInt("+e[3]+"_end-"+e[3]+"_beg+1);"+e[3]+"_index<"+e[3]+"_length;"+e[3]+"_index++){"+e[3]+" = "+e[3]+"_beg+"+e[3]+"_index;"}else{r(e[1]);return"for(var __LIST__"+e[3]+" = "+e[1]+","+e[3]+","+e[3]+"_index=0,"+e[3]+"_length=__LIST__"+e[3]+".length;"+e[3]+"_index<"+e[3]+"_length;"+e[3]+"_index++){"+e[3]+" = __LIST__"+e[3]+"["+e[3]+"_index];"}};var l=function(e){if(e&&e.length){e.shift();var t=e[0].split("(")[0];return"var "+t+" = function"+e.join("").replace(t,"")+"{var __OUT=[];"}};var u=function(e){if(!e[1])throw"bad include statement: "+e.join(" ");return'if (typeof inline == "function"){__OUT.push(inline('};var h=function(e,t){r(t.slice(1).join(" "));return e};var m=function(e){return h("if(",e)};var p=function(e){return h("}else if(",e)};var g=function(e){return h("var ",e)};o={blk:/^\{(cdata|minify|eval)/i,tag:"forelse|for|list|if|elseif|else|var|macro|break|notrim|trim|include",def:{"if":{pfix:m,sfix:"){",pmin:1},"else":{pfix:"}else{"},elseif:{pfix:p,sfix:"){",pdft:"true"},"/if":{pfix:"}"},"for":{pfix:_,pmin:3},forelse:{pfix:c},"/for":{pfix:d},list:{pfix:f,pmin:3},"/list":{pfix:"};"},"break":{pfix:"break;"},"var":{pfix:g,sfix:";"},macro:{pfix:l},"/macro":{pfix:'return __OUT.join("");};'},trim:{pfix:function(){a=!0}},"/trim":{pfix:function(){a=null}},inline:{pfix:u,pmin:1,sfix:"));}"}},ext:{seed:function(e){return(e||"")+""+n},"default":function(e,t){return e||t}}};var v=function(){var e=/\\([\{\}])/g;return function(t,n){t=t.replace(e,"$1");var a=t.slice(1,-1).split(i),s=o.def[a[0]];if(s){if(s.pmin&&s.pmin>=a.length)throw"Statement needs more parameters:"+t;n.push(s.pfix&&"string"!=typeof s.pfix?s.pfix(a):s.pfix||"");if(s.sfix){if(a.length<=1){if(s.pdft)n.push(s.pdft)}else for(var r=1,_=a.length;r<_;r++){if(r>1)n.push(" ");n.push(a[r])}n.push(s.sfix)}}else $(t,n)}}();var b=function(e,t){if(e&&e.length)if(1!=e.length){var i=e.pop().split(":");t.push("__MDF['"+i.shift()+"'](");b(e,t);if(i.length>0){var n=i.join(":");r(n);t.push(","+n)}t.push(")")}else{var a=e.pop();r(a);t.push(""==a?'""':a)}};var $=function(e,t){if(e){var i=e.split("\n");if(i&&i.length)for(var n=0,o=i.length,s;n<o;n++){s=i[n];if(a){s=s.trim();if(!s)continue}y(s,t);if(a&&n<o-1)t.push("__OUT.push('\\n');")}}};var y=function(){var e=/\|\|/g,t=/#@@#/g;return function(i,n){var a="}",o=-1,s=i.length,r,_,c,d,f;for(;o+a.length<s;){r="${";_="}";c=i.indexOf(r,o+a.length);if(c<0)break;if("%"==i.charAt(c+2)){
r="${%";_="%}"}d=i.indexOf(_,c+r.length);if(d<0)break;x(i.substring(o+a.length,c),n);f=i.substring(c+r.length,d).replace(e,"#@@#").split("|");for(var l=0,u=f.length;l<u;f[l]=f[l].replace(t,"||"),l++);n.push("__OUT.push(");b(f,n);n.push(");");a=_;o=d}x(i.substring(o+a.length),n)}}();var x=function(){var e={r:/\n|\\|\'/g,"\n":"\\n","\\":"\\\\","'":"\\'"};var t=function(t){return(t||"").replace(e.r,function(t){return e[t]||t})};return function(e,i){if(e)i.push("__OUT.push('"+t(e)+"');")}}();var C=function(){var e=/\t/g,t=/\n/g,n=/\r\n?/g;var a=function(e,t){var i=e.indexOf("}",t+1);for(;"\\"==e.charAt(i-1);)i=e.indexOf("}",i+1);return i};var r=function(){var e=[],t=arguments[0];for(var i in t){i=(i||"").trim();if(i)e.push(i+"=$v('"+i+"')");else;}return e.length>0?"var "+e.join(",")+";":""};return function(_){s={};_=_.replace(n,"\n").replace(e,"    ");var c=["if(!__CTX) return '';",""];c.push("function $v(__NAME){var v = __CTX[__NAME];return v==null?window[__NAME]:v;};");c.push("var defined=function(__NAME){return __CTX[__NAME]!=null;},");c.push("__OUT=[];");var d=-1,f=_.length;var l,u,h,m,p,g,b,y;for(;d+1<f;){l=d;l=_.indexOf("{",l+1);for(;l>=0;){u=a(_,l);h=_.substring(l,u);m=h.match(o.blk);if(m){p=m[1].length+1;g=_.indexOf("}",l+p);if(g>=0){b=g-l-p<=0?"{/"+m[1]+"}":h.substr(p+1);p=_.indexOf(b,g+1);if(p>=0){$(_.substring(d+1,l),c);y=_.substring(g+1,p);switch(m[1]){case"cdata":x(y,c);break;case"minify":x(y.replace(t," ").replace(i," "),c);break;case"eval":if(y)c.push("__OUT.push((function(){"+y+"})());")}l=d=p+b.length-1}}}else if("$"!=_.charAt(l-1)&&"\\"!=_.charAt(l-1)&&0==h.substr("/"==h.charAt(1)?2:1).search(o.tag))break;l=_.indexOf("{",l+1)}if(l<0)break;u=a(_,l);if(u<0)break;$(_.substring(d+1,l),c);v(_.substring(l,u+1),c);d=u}$(_.substring(d+1),c);c.push(';return __OUT.join("");');c[1]=r(s);s=null;return new Function("__CTX","__MDF",c.join(""))}}();TrimPath.seed=function(){return n};TrimPath.merge=function(){var t={};TrimPath.dump=function(){return{func:t,text:e}};return function(i,n,a){try{n=n||{};if(!t[i]&&!e[i])return"";if(!t[i]){t[i]=C(e[i]);delete e[i]}if(a)for(var s in o.ext)if(!a[s])a[s]=o.ext[s];return t[i](n,a||o.ext)}catch(r){return r.message||""}}}();TrimPath.parse=function(){var t=+new Date;return function(i,n){if(!i)return"";n=n||"ck-"+t++;if(null!=e[n]){console.warn("jst template overwrited with key "+n);console.debug("old template content: "+e[n].replace(/\n/g," "));console.debug("new template content: "+i.replace(/\n/g," "))}e[n]=i;return n}}()}();I$("3174a1d30233acba88fa4afe0e1bcf90",function(e,t,i,n,a,o,s,r,_){var c={};o._$seed=TrimPath.seed;o._$get=function(){var e=function(e){return!o._$getTextTemplate?"":o._$getTextTemplate(e)};return function(i,n,a){n=n||{};n.inline=e;a=t._$merge({},c,a);a.rand=t._$uniqueID;a.format=t._$format;a.escape=t._$escape;a.inline=e;return TrimPath.merge(i,n,a)}}();o._$add=function(e,t){if(!e)return"";var n,a=i._$get(e);if(a){n=a.id;e=a.value||a.innerText;if(!t)i._$remove(a)}return TrimPath.parse(e,n)};o._$addTemplate=function(e,t){return TrimPath.parse(e,t)};o._$render=function(e,t,n,a){e=i._$get(e);if(e)e.innerHTML=o._$get(t,n,a)};o._$extend=function(e){t._$merge(c,e)};n._$merge({_$render:o._$render});if(!0){var d=e.P("nej.e");d._$addHtmlTemplate=o._$add;d._$getHtmlTemplate=o._$get;d._$getHtmlTemplateSeed=o._$seed;d._$renderHtmlTemplate=o._$render;d._$registJSTExt=o._$extend}return o},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","c2028585a730a88452fc7218e9c1ddab","cb8387d7935f37718ec765e748b9b853");I$("7c0d5856d6e99d0fb30abadfe6db5ad1",function(e,t,i,n,a,o){i._$klass=function(){var e=function(){return"[object Function]"!==n.toString.call(arguments[0])};var i=function(e,i){for(;i;){var n=i.prototype,a=t.__forIn(n,function(t){return e===t});if(null!=a)return{name:a,klass:i};i=i._$super}};return function(){var n=function(){return this.__init.apply(this,arguments)};n.prototype.__init=a;n._$extend=function(n,a){if(!e(n)){var o=this;if(a!==!1)t.__forIn(n,function(t,i){if(!e(t))o[i]=t});this._$super=n;var s=function(){};s.prototype=n.prototype;this.prototype=new s;this.prototype.constructor=this;var r=[],_={};var c=function(e,t){var n=i(e,t);if(n){if(r[r.length-1]!=n.name)r.push(n.name);_[n.name]=n.klass._$super;return n.name}};this.prototype.__super=function(){var e=r[r.length-1],t=arguments.callee.caller;if(!e)e=c(t,this.constructor);else{var i=_[e].prototype;if(!i.hasOwnProperty(t)||t!=i[e])e=c(t,this.constructor);else _[e]=_[e]._$super}var n=_[e].prototype[e].apply(this,arguments);if(e==r[r.length-1]){r.pop();delete _[e]}return n};if(!0){var d=this.prototype;d.__supInit=d.__super;d.__supReset=d.__super;d.__supDestroy=d.__super;d.__supInitNode=d.__super;d.__supDoBuild=d.__super;d.__supOnShow=d.__super;d.__supOnHide=d.__super;d.__supOnRefresh=d.__super;this._$supro=n.prototype}return this.prototype}};return n}}();if(!0){e.C=i._$klass;e.copy(this.NEJ,e)}return i},"c27e07105db4b2613e9811a6e5ceab90","bcd64a407d00eaec725a70b03e0fbaf3");I$("e4cc364ae94aa1c5f0562d86be81286e",function(e,t,i,n,a,o,s,r){var _;a._$$EventTarget=t._$klass();_=a._$$EventTarget.prototype;a._$$EventTarget._$allocate=function(e){e=e||{};var t=!!this.__pool&&this.__pool.shift();if(!t){t=new this(e);this.__inst__=(this.__inst__||0)+1}t.__reset(e);return t};a._$$EventTarget._$recycle=function(){var e=function(e,t,i){e._$recycle();i.splice(t,1)};return function(t){if(!t)return null;if(!n._$isArray(t)){if(!(t instanceof this)){var i=t.constructor;if(i._$recycle)i._$recycle(t);return null}if(t==this.__instance)delete this.__instance;if(t==this.__inctanse)delete this.__inctanse;t.__destroy();if(!this.__pool)this.__pool=[];if(n._$indexOf(this.__pool,t)<0)this.__pool.push(t);return null}n._$reverseEach(t,e,this)}}();a._$$EventTarget._$getInstance=function(e){if(!this.__instance)this.__instance=this._$allocate(e);return this.__instance};a._$$EventTarget._$getInstanceWithReset=function(e,t){if(t&&this.__inctanse){this.__inctanse._$recycle();delete this.__inctanse}if(!this.__inctanse)this.__inctanse=this._$allocate(e);else this.__inctanse.__reset(e);return this.__inctanse};_.__init=function(){this.__events={};this.__events_dom={};this.id=n._$uniqueID()};_.__reset=function(e){this._$batEvent(e)};_.__destroy=function(){this._$clearEvent();this.__doClearDomEvent()};_.__doInitDomEvent=function(){var e=function(e){if(e&&!(e.length<3)){this.__events_dom["de-"+n._$uniqueID()]=e;i._$addEvent.apply(i,e)}};return function(t){n._$forEach(t,e,this)}}();_.__doClearDomEvent=function(){var e=function(e,t,n){delete n[t];i._$delEvent.apply(i,e)};return function(){n._$loop(this.__events_dom,e)}}();_.__doClearComponent=function(e){e=e||s;n._$loop(this,function(t,i,n){if(t&&t._$recycle&&!e(t)){delete n[i];t._$recycle()}})};_._$recycle=function(){this.constructor._$recycle(this)};_._$hasEvent=function(e){var e=(e||"").toLowerCase(),t=this.__events[e];return!!t&&t!==s};_._$delEvent=function(e,t){var e=(e||"").toLowerCase(),i=this.__events[e];if(n._$isArray(i)){n._$reverseEach(i,function(e,i,n){if(e==t)n.splice(i,1)});if(!i.length)delete this.__events[e]}else if(i==t)delete this.__events[e]};_._$setEvent=function(e,t){if(e&&n._$isFunction(t))this.__events[e.toLowerCase()]=t};_._$batEvent=function(){var e=function(e,t){this._$setEvent(t,e)};return function(t){n._$loop(t,e,this)}}();_._$clearEvent=function(){var e=function(e,t){this._$clearEvent(t)};return function(t){var t=(t||"").toLowerCase();if(t)delete this.__events[t];else n._$loop(this.__events,e,this)}}();_._$addEvent=function(e,t){if(e&&n._$isFunction(t)){e=e.toLowerCase();var i=this.__events[e];if(i){if(!n._$isArray(i))this.__events[e]=[i];this.__events[e].push(t)}else this.__events[e]=t}};_._$dispatchEvent=function(e){var e=(e||"").toLowerCase(),t=this.__events[e];if(t){var i=r.slice.call(arguments,1);if(n._$isArray(t))n._$forEach(t,function(e){if(!1)e.apply(this,i);else try{e.apply(this,i)}catch(t){console.error(t.message);console.error(t.stack)}},this);else t.apply(this,i)}};if(!0){a._$$Event=a._$$EventTarget;e.copy(e.P("nej.ut"),a)}return a},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129");I$("73178fa1c529e77edd2d067795ed0e51",function(e,t,i,n,a,o,s,r,_,c){var d;s._$$CustomEvent=t._$klass();d=s._$$CustomEvent._$extend(o._$$EventTarget);d.__init=function(){this.__cache={};this.__super()};d.__reset=function(e){this.__super(e);this.__element=i._$get(e.element)||window;this.__doEventInit(e.event);this.__doEventAPIEnhance();this._$dispatchEvent("oninit")};d.__destroy=function(){var e=function(e,t,i){if(!a._$isArray(e))a._$safeDelete(this.__element,t);delete i[t]};return function(){this.__super();a._$loop(this.__cache,e,this);delete this.__element}}();d.__isDelegate=function(e,t){e=i._$get(e);return!(e!==this.__element||t&&!this.__cache["on"+t])};d.__doEventInit=function(e){if(!a._$isString(e)){if(a._$isArray(e))a._$forEach(e,this.__doEventInit,this)}else{var t="on"+e;if(!this.__cache[t])this.__cache[t]=this.__doEventDispatch._$bind(this,e);this.__doEventBind(e)}};d.__doEventBind=function(e){var t="on"+e,i=this.__element[t],n=this.__cache[t];if(i!=n){this.__doEventDelete(e);if(i&&i!=_)this.__doEventAdd(e,i);this.__element[t]=n}};d.__doEventAdd=function(e,t,i){var n=this.__cache[e];if(!n){n=[];this.__cache[e]=n}if(a._$isFunction(t))!i?n.push(t):n.unshift(t)};d.__doEventDelete=function(e,t){var i=this.__cache[e];if(i&&i.length)if(t)a._$reverseEach(i,function(e,i,n){if(t===e){n.splice(i,1);return!0}});else delete this.__cache[e]};d.__doEventDispatch=function(e,t){t=t||{noargs:!0};if(t==r)t={};t.type=e;this._$dispatchEvent("ondispatch",t);if(!t.stopped)a._$forEach(this.__cache[e],function(e){if(!1)e(t);else try{e(t)}catch(i){console.error(i.message);console.error(i.stack)}})};d.__doEventAPIEnhance=function(){var t=function(e){var t=e.args,i=t[1].toLowerCase();if(this.__isDelegate(t[0],i)){e.stopped=!0;this.__doEventBind(i);this.__doEventAdd(i,t[2],t[3]);
this._$dispatchEvent("oneventadd",{type:i,listener:t[2]})}};var i=function(e){var t=e.args,i=t[1].toLowerCase();if(this.__isDelegate(t[0],i)){e.stopped=!0;this.__doEventDelete(i,t[2])}};var o=function(e){var t=e.args,i=(t[1]||"").toLowerCase();if(this.__isDelegate(t[0])){if(i){this.__doEventDelete(i);return}a._$loop(this.__cache,function(e,t){if(a._$isArray(e))this.__doEventDelete(t)},this)}};var s=function(e){var t=e.args,i=t[1].toLowerCase();if(this.__isDelegate(t[0],i)){e.stopped=!0;t[0]["on"+i].apply(t[0],t.slice(2))}};return function(){if(!this.__enhanced){this.__enhanced=!0;n._$addEvent=n._$addEvent._$aop(t._$bind(this));n._$delEvent=n._$delEvent._$aop(i._$bind(this));n._$clearEvent=n._$clearEvent._$aop(o._$bind(this));n._$dispatchEvent=n._$dispatchEvent._$aop(s._$bind(this));if(!0)e.copy(e.P("nej.v"),n)}}}();if(!0)e.copy(e.P("nej.ut"),s);return s},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","e4cc364ae94aa1c5f0562d86be81286e");I$("30f5582d3c4b6925466794bf77bb18aa",function(e,t,i,n,a,o,s,r,_,c){var d,f=6e4;s._$$LoaderAbstract=t._$klass();d=s._$$LoaderAbstract._$extend(o._$$EventTarget);d.__init=function(){this.__super();this.__qopt={onerror:this.__onQueueError._$bind(this),onload:this.__onQueueLoaded._$bind(this)};if(!this.constructor.__cache)this.constructor.__cache={loaded:{}}};d.__reset=function(e){this.__super(e);this.__version=e.version;this.__timeout=e.timeout;this.__qopt.version=this.__version;this.__qopt.timeout=this.__timeout};d.__delLoadData=function(e){delete this.constructor.__cache[e]};d.__getLoadData=function(e){return this.constructor.__cache[e]};d.__setLoadData=function(e,t){this.constructor.__cache[e]=t};d.__getRequest=_;d.__doClearRequest=function(e){n._$clearEvent(e)};d.__doRequest=function(e){e.src=this.__url;document.head.appendChild(e)};d.__doClear=function(){var e=this.__getLoadData(this.__url);if(e){window.clearTimeout(e.timer);this.__doClearRequest(e.request);delete e.bind;delete e.timer;delete e.request;this.__delLoadData(this.__url);this.__getLoadData("loaded")[this.__url]=!0}};d.__doCallback=function(e){var t=this.__getLoadData(this.__url);if(t){var i=t.bind;this.__doClear();if(i&&i.length>0){var n;for(;i.length;){n=i.shift();try{n._$dispatchEvent(e,arguments[1])}catch(a){if(!1)throw a;console.error(a.message);console.error(a.stack)}n._$recycle()}}}};d.__onError=function(e){this.__doCallback("onerror",e)};d.__onLoaded=function(){this.__doCallback("onload")};d.__doLoadQueue=function(e){this.constructor._$allocate(this.__qopt)._$load(e)};d.__onQueueCheck=function(e){var t=this.__getLoadData(this.__key);if(t){if(e)t.error++;t.loaded++;if(!(t.loaded<t.total)){this.__delLoadData(this.__key);this._$dispatchEvent(t.error>0?"onerror":"onload")}}};d.__onQueueError=function(e){this.__onQueueCheck(!0)};d.__onQueueLoaded=function(){this.__onQueueCheck()};d._$load=function(e){e=a._$absolute(e);if(e){this.__url=e;if(this.__version)this.__url+=(this.__url.indexOf("?")<0?"?":"&")+this.__version;if(!this.__getLoadData("loaded")[this.__url]){var t=this.__getLoadData(this.__url),o;if(t){t.bind.unshift(this);t.timer=window.clearTimeout(t.timer)}else{o=this.__getRequest();t={request:o,bind:[this]};this.__setLoadData(this.__url,t);n._$addEvent(o,"load",this.__onLoaded._$bind(this));n._$addEvent(o,"error",this.__onError._$bind(this,{code:i._$CODE_ERRSERV,message:"无法加载指定资源文件["+this.__url+"]！"}))}if(0!=this.__timeout)t.timer=window.setTimeout(this.__onError._$bind(this,{code:i._$CODE_TIMEOUT,message:"指定资源文件["+this.__url+"]载入超时！"}),this.__timeout||f);if(o)this.__doRequest(o);this._$dispatchEvent("onloading")}else{try{this._$dispatchEvent("onload")}catch(s){if(!1)throw s;console.error(s.message);console.error(s.stack)}this._$recycle()}}else this._$dispatchEvent("onerror",{code:i._$CODE_NOTASGN,message:"请指定要载入的资源地址！"})};d._$queue=function(e){if(e&&e.length){this.__key=a._$uniqueID();var t={error:0,loaded:0,total:e.length};this.__setLoadData(this.__key,t);a._$forEach(e,function(e,i){if(e)this.__doLoadQueue(e);else t.total--},this);this._$dispatchEvent("onloading")}else this._$dispatchEvent("onerror",{code:i._$CODE_NOTASGN,message:"请指定要载入的资源队列！"})};return s},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","afa71b55d933063687962bda51d6839c","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","e4cc364ae94aa1c5f0562d86be81286e");I$("6206d0548a6481839c5e3bd6a4aad7fb",function(e,t,i,n,a,o){i._$cookie=function(){var e=new Date,i=+e,a=864e5;var o=function(e){var t=document.cookie,i="\\b"+e+"=",n=t.search(i);if(n<0)return"";n+=i.length-2;var a=t.indexOf(";",n);if(a<0)a=t.length;return t.substring(n,a)||""};return function(s,r){if(void 0===r)return o(s);if(t._$isString(r)){if(r){document.cookie=s+"="+r+";";return r}r={expires:-100}}r=r||n;var _=s+"="+(r.value||"")+";";delete r.value;if(void 0!==r.expires){e.setTime(i+r.expires*a);r.expires=e.toGMTString()}_+=t._$object2string(r,";");document.cookie=_}}();if(!0)e.copy(e.P("nej.j"),i);return i},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129");!function(){var e=!0,t=null;!function(i){function n(i){if("bug-string-char-index"==i)return"a"!="a"[0];var n,o="json"==i;if(o||"json-stringify"==i||"json-parse"==i){if("json-stringify"==i||o){var s=c.stringify,_="function"==typeof s&&d;if(_){(n=function(){return 1}).toJSON=n;try{_="0"===s(0)&&"0"===s(new Number)&&'""'==s(new String)&&s(a)===r&&s(r)===r&&s()===r&&"1"===s(n)&&"[1]"==s([n])&&"[null]"==s([r])&&"null"==s(t)&&"[null,null,null]"==s([r,a,t])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==s({a:[n,e,!1,t,"\0\b\n\f\r\t"]})&&"1"===s(t,n)&&"[\n 1,\n 2\n]"==s([1,2],t,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new Date((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==s(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new Date((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==s(new Date((-1)))}catch(f){_=!1}}if(!o)return _}if("json-parse"==i||o){i=c.parse;if("function"==typeof i)try{if(0===i("0")&&!i(!1)){n=i('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var l=5==n.a.length&&1===n.a[0];if(l){try{l=!i('"\t"')}catch(u){}if(l)try{l=1!==i("01")}catch(h){}}}}catch(m){l=!1}if(!o)return l}return _&&l}}var a={}.toString,o,s,r,_="function"==typeof define&&define.amd,c="object"==typeof exports&&exports;c||_?"object"==typeof JSON&&JSON?c?(c.stringify=JSON.stringify,c.parse=JSON.parse):c=JSON:_&&(c=i.JSON={}):c=i.JSON||(i.JSON={});var d=new Date((-0xc782b5b800cec));try{d=-109252==d.getUTCFullYear()&&0===d.getUTCMonth()&&1===d.getUTCDate()&&10==d.getUTCHours()&&37==d.getUTCMinutes()&&6==d.getUTCSeconds()&&708==d.getUTCMilliseconds()}catch(f){}if(!n("json")){var l=n("bug-string-char-index");if(!d)var u=Math.floor,h=[0,31,59,90,120,151,181,212,243,273,304,334],m=function(e,t){return h[t]+365*(e-1970)+u((e-1969+(t=+(t>1)))/4)-u((e-1901+t)/100)+u((e-1601+t)/400)};if(!(o={}.hasOwnProperty))o=function(e){var i={},n;if((i.__proto__=t,i.__proto__={toString:1},i).toString!=a)o=function(e){var i=this.__proto__,e=e in(this.__proto__=t,this);this.__proto__=i;return e};else{n=i.constructor;o=function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}}i=t;return o.call(this,e)};var p={"boolean":1,number:1,string:1,undefined:1};s=function(e,i){var n=0,s,r,_;(s=function(){this.valueOf=0}).prototype.valueOf=0;r=new s;for(_ in r)o.call(r,_)&&n++;s=r=t;if(n)n=2==n?function(e,t){var i={},n="[object Function]"==a.call(e),s;for(s in e)!(n&&"prototype"==s)&&!o.call(i,s)&&(i[s]=1)&&o.call(e,s)&&t(s)}:function(e,t){var i="[object Function]"==a.call(e),n,s;for(n in e)!(i&&"prototype"==n)&&o.call(e,n)&&!(s="constructor"===n)&&t(n);(s||o.call(e,n="constructor"))&&t(n)};else{r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];n=function(e,t){var i="[object Function]"==a.call(e),n,s;if(s=!i)if(s="function"!=typeof e.constructor){s=typeof e.hasOwnProperty;s="object"==s?!!e.hasOwnProperty:!p[s]}s=s?e.hasOwnProperty:o;for(n in e)!(i&&"prototype"==n)&&s.call(e,n)&&t(n);for(i=r.length;n=r[--i];s.call(e,n)&&t(n));}}n(e,i)};if(!n("json-stringify")){var g={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},v=function(e,t){return("000000"+(t||0)).slice(-e)},b=function(e){var t='"',i=0,n=e.length,a=n>10&&l,o;for(a&&(o=e.split(""));i<n;i++){var s=e.charCodeAt(i);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=g[s];break;default:if(s<32){t+="\\u00"+v(2,s.toString(16));break}t+=a?o[i]:l?e.charAt(i):e[i]}}return t+'"'},$=function(i,n,_,c,d,f,l){var h=n[i],p,g,y,x,C,w,E,S,I;try{h=n[i]}catch(j){}if("object"==typeof h&&h){p=a.call(h);if("[object Date]"==p&&!o.call(h,"toJSON"))if(h>-1/0&&h<1/0){if(m){y=u(h/864e5);for(p=u(y/365.2425)+1970-1;m(p+1,0)<=y;p++);for(g=u((y-m(p,0))/30.42);m(p,g+1)<=y;g++);y=1+y-m(p,g);x=(h%864e5+864e5)%864e5;C=u(x/36e5)%24;w=u(x/6e4)%60;E=u(x/1e3)%60;x%=1e3}else{p=h.getUTCFullYear();g=h.getUTCMonth();y=h.getUTCDate();C=h.getUTCHours();w=h.getUTCMinutes();E=h.getUTCSeconds();x=h.getUTCMilliseconds()}h=(p<=0||p>=1e4?(p<0?"-":"+")+v(6,p<0?-p:p):v(4,p))+"-"+v(2,g+1)+"-"+v(2,y)+"T"+v(2,C)+":"+v(2,w)+":"+v(2,E)+"."+v(3,x)+"Z"}else h=t;else if("function"==typeof h.toJSON&&("[object Number]"!=p&&"[object String]"!=p&&"[object Array]"!=p||o.call(h,"toJSON")))h=h.toJSON(i)}_&&(h=_.call(n,i,h));if(h===t)return"null";p=a.call(h);if("[object Boolean]"==p)return""+h;if("[object Number]"==p)return h>-1/0&&h<1/0?""+h:"null";if("[object String]"==p)return b(""+h);if("object"==typeof h){for(i=l.length;i--;)if(l[i]===h)throw TypeError();l.push(h);S=[];n=f;f+=d;if("[object Array]"==p){g=0;for(i=h.length;g<i;I||(I=e),g++){p=$(g,h,_,c,d,f,l);S.push(p===r?"null":p)}i=I?d?"[\n"+f+S.join(",\n"+f)+"\n"+n+"]":"["+S.join(",")+"]":"[]"}else{s(c||h,function(t){var i=$(t,h,_,c,d,f,l);i!==r&&S.push(b(t)+":"+(d?" ":"")+i);I||(I=e)});i=I?d?"{\n"+f+S.join(",\n"+f)+"\n"+n+"}":"{"+S.join(",")+"}":"{}";
}l.pop();return i}};c.stringify=function(e,t,i){var n,o,s;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==a.call(t))o=t;else if("[object Array]"==a.call(t)){s={};for(var r=0,_=t.length,c;r<_;c=t[r++],("[object String]"==a.call(c)||"[object Number]"==a.call(c))&&(s[c]=1));}if(i)if("[object Number]"==a.call(i)){if((i-=i%1)>0){n="";for(i>10&&(i=10);n.length<i;n+=" ");}}else"[object String]"==a.call(i)&&(n=i.length<=10?i:i.slice(0,10));return $("",(c={},c[""]=e,c),o,s,n,"",[])}}if(!n("json-parse")){var y=String.fromCharCode,x={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},C,w,E=function(){C=w=t;throw SyntaxError()},S=function(){for(var i=w,n=i.length,a,o,s,r,_;C<n;){_=i.charCodeAt(C);switch(_){case 9:case 10:case 13:case 32:C++;break;case 123:case 125:case 91:case 93:case 58:case 44:a=l?i.charAt(C):i[C];C++;return a;case 34:a="@";for(C++;C<n;){_=i.charCodeAt(C);if(_<32)E();else if(92==_){_=i.charCodeAt(++C);switch(_){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=x[_];C++;break;case 117:o=++C;for(s=C+4;C<s;C++){_=i.charCodeAt(C);_>=48&&_<=57||_>=97&&_<=102||_>=65&&_<=70||E()}a+=y("0x"+i.slice(o,C));break;default:E()}}else{if(34==_)break;_=i.charCodeAt(C);for(o=C;_>=32&&92!=_&&34!=_;)_=i.charCodeAt(++C);a+=i.slice(o,C)}}if(34==i.charCodeAt(C)){C++;return a}E();default:o=C;if(45==_){r=e;_=i.charCodeAt(++C)}if(_>=48&&_<=57){for(48==_&&(_=i.charCodeAt(C+1),_>=48&&_<=57)&&E();C<n&&(_=i.charCodeAt(C),_>=48&&_<=57);C++);if(46==i.charCodeAt(C)){for(s=++C;s<n&&(_=i.charCodeAt(s),_>=48&&_<=57);s++);s==C&&E();C=s}_=i.charCodeAt(C);if(101==_||69==_){_=i.charCodeAt(++C);(43==_||45==_)&&C++;for(s=C;s<n&&(_=i.charCodeAt(s),_>=48&&_<=57);s++);s==C&&E();C=s}return+i.slice(o,C)}r&&E();if("true"==i.slice(C,C+4)){C+=4;return e}if("false"==i.slice(C,C+5)){C+=5;return!1}if("null"==i.slice(C,C+4)){C+=4;return t}E()}}return"$"},I=function(t){var i,n;"$"==t&&E();if("string"==typeof t){if("@"==(l?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(i=[];;n||(n=e)){t=S();if("]"==t)break;if(n)if(","==t){t=S();"]"==t&&E()}else E();","==t&&E();i.push(I(t))}return i}if("{"==t){for(i={};;n||(n=e)){t=S();if("}"==t)break;if(n)if(","==t){t=S();"}"==t&&E()}else E();(","==t||"string"!=typeof t||"@"!=(l?t.charAt(0):t[0])||":"!=S())&&E();i[t.slice(1)]=I(S())}return i}E()}return t},j=function(e,t,i){i=k(e,t,i);i===r?delete e[t]:e[t]=i},k=function(e,t,i){var n=e[t],o;if("object"==typeof n&&n)if("[object Array]"==a.call(n))for(o=n.length;o--;)j(n,o,i);else s(n,function(e){j(n,e,i)});return i.call(e,t,n)};c.parse=function(e,i){var n,o;C=0;w=""+e;n=I(S());"$"!=S()&&E();C=w=t;return i&&"[object Function]"==a.call(i)?k((o={},o[""]=n,o),"",i):n}}}_&&define(function(){return c})}(this);return JSON}();I$("85a8b7bf6e6c0b101f767e707ef6608d",function(_m,_p,_o,_f,_r){if("trident"===_m._$KERNEL.engine&&"2.0"==_m._$KERNEL.release)I$("194871083571611b959f7009c36c5055",function(){JSON.parse=function(){var _isSafeJSON=function(e){return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(e.replace(/"(\\.|[^"\\])*"/g,""))};return JSON.parse._$aop(function(_event){var _str=_event.args[0]||"";if(_str.length>=5e5){_event.stopped=!0;_event.value=eval("("+_str+")")}})}()});return JSON},"b5a2ea56adb918d7d443468b3a9b53d1");I$("c7aa9366cd28e791ea706b27d6415c7e",function(){return JSON},"85a8b7bf6e6c0b101f767e707ef6608d");I$("2322fd9dca9dfaba0b88a4d9ab7e084e",function(e,t,i,n,a,o,s,r,_,c,d,f){var l;_._$$ProxyAbstract=e._$klass();l=_._$$ProxyAbstract._$extend(o._$$EventTarget);l.__reset=function(e){this.__super(e);this.__request=t._$fetch({url:"",sync:!1,cookie:!1,type:"text",method:"GET",timeout:6e4},e);var i=n._$get("csrf");if(i.cookie&&i.param){var o=encodeURIComponent(i.param)+"="+encodeURIComponent(s._$cookie(i.cookie)||""),r=this.__request.url.indexOf("?")<0?"?":"&";this.__request.url+=r+o}this.__headers=e.headers||{};var _=this.__headers[a._$HEAD_CT];if(null==_)this.__headers[a._$HEAD_CT]=a._$HEAD_CT_FORM};l.__destroy=function(){this.__super();delete this.__rkey;delete this.__request;delete this.__headers};l.__onLoadRequest=function(e){var t=e.status;if(t!=-1)if(0==(""+t).indexOf("2"))this._$dispatchEvent("onload",i._$text2type(e.result,this.__request.type));else this._$dispatchEvent("onerror",{data:t,result:e.result,code:a._$CODE_ERRSERV,message:"服务器返回异常状态["+t+"]!"});else this._$dispatchEvent("onerror",{code:a._$CODE_TIMEOUT,message:"请求["+this.__request.url+"]超时！"})};l.__doSendRequest=d;l.__getResponseHeader=d;l._$send=function(e){var t=this.__request.url;if(t)try{this.__request.data=null==e?null:e;var i={request:this.__request,headers:this.__headers};try{this._$dispatchEvent("onbeforerequest",i)}catch(n){console.error(n.message);console.error(n.stack)}this.__doSendRequest(i)}catch(o){this._$dispatchEvent("onerror",{code:a._$CODE_ERRSERV,message:"请求["+t+"]失败:"+o.message+"！"})}else this._$dispatchEvent("onerror",{code:a._$CODE_NOTASGN,message:"没有输入请求地址！"})};l._$abort=d;l._$header=function(e){if(!t._$isArray(e))return this.__getResponseHeader(e)||"";var i={};t._$forEach(e,function(e){i[e]=this._$header(e)},this);return i};return _},"7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","1abf69011eed38414af6c85d334eac2c","afa71b55d933063687962bda51d6839c","e4cc364ae94aa1c5f0562d86be81286e","6206d0548a6481839c5e3bd6a4aad7fb","c7aa9366cd28e791ea706b27d6415c7e");I$("0b6cf1debb2eb326332f7a449c3a41e7",function(e,t,i,n){e.__getXMLHttpRequest=function(){return new XMLHttpRequest};return e});I$("e97755e98b0a36b0ff93f3a330e120f3",function(e,t,i,n,a,o,s){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="2.0")I$("4e993cf90f5de49941f725529d59ba9d",function(){t.__getXMLHttpRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.5.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];return function(){var t=null;i._$forIn(e,function(e){try{t=new ActiveXObject(e);return!0}catch(i){}});return t}}()});return t},"b5a2ea56adb918d7d443468b3a9b53d1","0b6cf1debb2eb326332f7a449c3a41e7","2ad7178887dc8cdca6f726aa3bb0d129");I$("47f30666ea167ab81df47c5b69054138",function(e,t,i,n,a,o,s,r,_){var c;o._$$ProxyXHR=i._$klass();c=o._$$ProxyXHR._$extend(e._$$ProxyAbstract);c.__destroy=function(){this.__super();window.clearTimeout(this.__timer);delete this.__timer;try{this.__xhr.onreadystatechange=r;this.__xhr.abort()}catch(e){}delete this.__xhr};c.__doSendRequest=function(){var e=function(e,t){this.__xhr.setRequestHeader(t,e)};var i=function(e){var i=[];t._$reverseEach(e.getElementsByTagName("input"),function(e){if("file"==e.type)if(e.name){if(e.files.length>1){t._$forEach(e.files,function(t){i.push({name:e.name,file:t})});e.parentNode.removeChild(e)}}else e.parentNode.removeChild(e)});return i.length>0?i:null};return function(o){var s=o.request,r=o.headers;this.__xhr=a.__getXMLHttpRequest();if(r[n._$HEAD_CT]===n._$HEAD_CT_FILE){delete r[n._$HEAD_CT];this.__xhr.upload.onprogress=this.__onStateChange._$bind(this,1);if("FORM"===s.data.tagName){var _=i(s.data);s.data=new FormData(s.data);t._$forEach(_,function(e){var i=e.file;s.data.append(e.name||i.name||"file-"+t._$uniqueID(),i)})}}this.__xhr.onreadystatechange=this.__onStateChange._$bind(this,2);if(0!==s.timeout)this.__timer=window.setTimeout(this.__onStateChange._$bind(this,3),s.timeout);this.__xhr.open(s.method,s.url,!s.sync);t._$loop(r,e,this);if(this.__request.cookie&&"withCredentials"in this.__xhr)this.__xhr.withCredentials=!0;if(!(r[n._$HEAD_CT]!==n._$HEAD_CT_FORM||window.FormData&&s.data instanceof window.FormData))s.data=t._$object2string(s.data,"&");this.__xhr.send(s.data)}}();c.__onStateChange=function(e){switch(e){case 1:this._$dispatchEvent("onuploading",arguments[1]);break;case 2:if(4==this.__xhr.readyState)this.__onLoadRequest({status:this.__xhr.status,result:this.__xhr.responseText||""});break;case 3:this.__onLoadRequest({status:-1})}};c.__getResponseHeader=function(e){return!this.__xhr?"":this.__xhr.getResponseHeader(e)};c._$abort=function(){this.__onLoadRequest({status:0})};return o},"2322fd9dca9dfaba0b88a4d9ab7e084e","2ad7178887dc8cdca6f726aa3bb0d129","7c0d5856d6e99d0fb30abadfe6db5ad1","afa71b55d933063687962bda51d6839c","e97755e98b0a36b0ff93f3a330e120f3");I$("c23005700f03332b930535c467e66482",function(e,t,i,n,a){var o=this,s=e._$KERNEL.prefix.pro,r=e._$is("desktop")?80:e._$is("ios")?50:30;t.__requestAnimationFrame=function(){var t=e._$is("android")?null:o.requestAnimationFrame||o[s+"RequestAnimationFrame"];return function(){if(!t)t=function(e){return window.setTimeout(function(){try{e(+new Date)}catch(t){}},1e3/r)};return t.apply(this,arguments)}}();t.__cancelAnimationFrame=function(){var t=e._$is("android")?null:o.cancelAnimationFrame||o[s+"CancelAnimationFrame"];return function(){if(!t)t=function(e){window.clearTimeout(e)};return t.apply(this,arguments)}}();return t},"b5a2ea56adb918d7d443468b3a9b53d1");I$("2047a9ac7b6bad5eae09c5f5e744b321",function(e,t){return e},"c23005700f03332b930535c467e66482","b5a2ea56adb918d7d443468b3a9b53d1");I$("bb8b8f855b45d1f20ec7b61310b0f03f",function(e,t,i,n,a,o){i.requestAnimationFrame=function(){t.__requestAnimationFrame.apply(null,arguments)};i.cancelAnimationFrame=function(){t.__cancelAnimationFrame.apply(null,arguments)};if(!0){if(!this.requestAnimationFrame)this.requestAnimationFrame=i.requestAnimationFrame;if(!this.cancelAnimationFrame)this.cancelAnimationFrame=i.cancelAnimationFrame}return i},"b5a2ea56adb918d7d443468b3a9b53d1","2047a9ac7b6bad5eae09c5f5e744b321");I$("d9f0497ccd593ae3dcb249a7113b8350",function(e,t,i,n,a){t.__canFlashEventBubble=function(e){return"transparent"!=(e||"").toLowerCase()};return t},"b5a2ea56adb918d7d443468b3a9b53d1");I$("50223af835b4377c586e682213734b13",function(e,t,i,n,a,o){if("trident"===t._$KERNEL.engine)I$("5fa7dc135761e01974d4e0b3b5c40a53",function(){e.__canFlashEventBubble=function(e){return!0}});if("webkit"===t._$KERNEL.engine)I$("92ab359ad2f92d3783b7a8210a76d119",function(){e.__canFlashEventBubble=function(e){return!0}});return e;
},"d9f0497ccd593ae3dcb249a7113b8350","b5a2ea56adb918d7d443468b3a9b53d1");I$("efbd86471fc655d503b799d2c0fdcaea",'{var hide  = defined("hidden")&&!!hidden}\n{var param = defined("params")&&params||NEJ.O}\n{var width = !hide?width:"1px",height = !hide?height:"1px"}\n{if hide}<div style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:10000;overflow:hidden;">{/if}\n<object classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"\n        codebase = "http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"\n        width = "${width|default:"100px"}"\n        height = "${height|default:"100px"}" id="${id}">\n    <param value="${src}" name="movie">\n    {for x in param}\n    <param value="${x}" name="${x_key}"/>\n    {/for}\n    <embed src="${src}" name="${id}"\n           width="${width|default:"100px"}"\n           height="${height|default:"100px"}"\n           pluginspage="http://www.adobe.com/go/getflashplayer"\n           type="application/x-shockwave-flash"\n           {for x in param}${x_key}="${x}" {/for}></embed>\n</object>\n{if hide}</div>{/if}');I$("dd0d1a1037c22ed9e0f6b9ee11e08255",function(e,t,i,n,a,o,s,r,_,c,d,f){var l=a._$add(r);_._$flash=function(){var r={},_,c=/^(?:mouse.*|(?:dbl)?click)$/i;window.onflashevent=function(e){var t=decodeURIComponent(e.target),i=e.type.toLowerCase();var n=r[t+"-tgt"];if(n&&c.test(i))f(n,e);var a=r[t+"-on"+i];if(a){var o="";try{o=a(e)}catch(s){}return o}};var d=function(e){_=document.title;var i=t._$get(e.parent)||document.body,n=a._$get(l,e);i.insertAdjacentHTML(!e.hidden?"beforeEnd":"afterBegin",n)};var f=function(e,t){var n=t.type.toLowerCase();o.requestAnimationFrame(function(){i._$dispatchEvent(e,n)})};var u=function(e){return!!e&&!!e.inited&&!!e.inited()};var h=function(e){var i=[document.embeds[e],t._$get(e),document[e],window[e]],a=n._$forIn(i,u),o=i[a],s=e+"-count";r[s]++;if(!(o||r[s]>100))window.setTimeout(h._$bind(null,e),300);else{if(_){document.title=_;_=null}r[e](o);delete r[e];delete r[s]}};var m=function(e){var i=e.id,a=e.params;if(!a){a={};e.params=a}var o=a.flashvars||"";o+=(!o?"":"&")+("id="+i);if(!e.hidden&&(e.target||s.__canFlashEventBubble(a.wmode))){var _=t._$id(e.target)||t._$id(e.parent);r[i+"-tgt"]=_}a.flashvars=o;n._$loop(e,function(e,t){if(n._$isFunction(e)&&"onready"!=t)r[i+"-"+t]=e})};return function(t){t=e.X({},t);if(t.src){var i="_"+n._$uniqueID();t.id=i;m(t);d(t);if(t.onready){r[i]=t.onready;r[i+"-count"]=0;h(i)}}}}();if(!0)e.copy(e.P("nej.e"),_);return _},"c27e07105db4b2613e9811a6e5ceab90","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","3174a1d30233acba88fa4afe0e1bcf90","bb8b8f855b45d1f20ec7b61310b0f03f","50223af835b4377c586e682213734b13","efbd86471fc655d503b799d2c0fdcaea");I$("0296667aa770ae4ae2b7302bc63cd8a1",function(e,t,i,n,a,o,s,r,_){var c,d={},f=n._$uniqueID();this["ld"+f]=function(e,t){var i=d[e];if(i){delete d[e];i.__onLoadRequest({status:200,result:t})}};this["er"+f]=function(e,t){var i=d[e];if(i){delete d[e];i.__onLoadRequest({status:t||0})}};o._$$ProxyFlash=t._$klass();c=o._$$ProxyFlash._$extend(e._$$ProxyAbstract);c.__doSendRequest=function(e){var t=d.flash;if(!n._$isArray(t))if(t){this.__rkey=n._$uniqueID();d[this.__rkey]=this;var o=n._$fetch({url:"",data:null,method:"GET"},e.request);o.key=this.__rkey;o.headers=e.headers;o.onerror="cb.er"+f;o.onloaded="cb.ld"+f;var s=i._$getFlashProxy(o.url);if(s)o.policyURL=s;t.request(o)}else{d.flash=[this.__doSendRequest._$bind(this,e)];a._$flash({hidden:!0,src:i._$get("ajax.swf"),onready:function(e){if(e){var t=d.flash;d.flash=e;n._$reverseEach(t,function(e,t,i){try{e()}catch(n){}})}}})}else t.push(this.__doSendRequest._$bind(this,e))};c._$abort=function(){delete d[this.__rkey];this.__onLoadRequest({status:0})};return o},"2322fd9dca9dfaba0b88a4d9ab7e084e","7c0d5856d6e99d0fb30abadfe6db5ad1","1abf69011eed38414af6c85d334eac2c","2ad7178887dc8cdca6f726aa3bb0d129","dd0d1a1037c22ed9e0f6b9ee11e08255");I$("4e1b02770dbac5d412db067145ca1088",function(e,t,i,n){e.__formatOrigin=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){t=t||"";if(e.test(t))return RegExp.$1;else return"*"}}();e.__formatPassData=function(e){return e};e.__postMessage=function(i,n){if(i.postMessage){n=n||t;i.postMessage(e.__formatPassData(n.data),e.__formatOrigin(n.origin))}};return e});I$("ab3664b2bc4313131fd02b33a63226b4",function(e,t,i,n,a,o,s,r){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>="4.0"&&e._$KERNEL.release<="5.0")I$("1f613f86a4cf8b026c9fb43f0351e3a4",function(){t.__formatPassData=function(e){return JSON.stringify(e)}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="3.0")I$("65820234dc3868ecede23f47be0e9b79",function(e){var a="MSG|",s=[];var r=function(){var e=unescape(window.name||"").trim();if(e&&0==e.indexOf(a)){window.name="";var o=i._$string2object(e.replace(a,""),"|"),s=(o.origin||"").toLowerCase();if(!s||"*"==s||0==location.href.toLowerCase().indexOf(s))n._$dispatchEvent(window,"message",{data:JSON.parse(o.data||"null"),source:window.frames[o.self]||o.self,origin:t.__formatOrigin(o.ref||document.referrer)})}};var _=function(){var e;var t=function(t,n,a){if(i._$indexOf(e,t.w)<0){e.push(t.w);a.splice(n,1);t.w.name=t.d}};return function(){e=[];i._$reverseEach(s,t);e=null}}();t.__postMessage=function(){var e=function(e){var t={};e=e||o;t.origin=e.origin||"";t.ref=location.href;t.self=e.source;t.data=JSON.stringify(e.data);return a+i._$object2string(t,"|",!0)};return function(t,i){s.unshift({w:t,d:escape(e(i))})}}();e._$$CustomEvent._$allocate({element:window,event:"message"});setInterval(_,100);setInterval(r,20)},"73178fa1c529e77edd2d067795ed0e51","c7aa9366cd28e791ea706b27d6415c7e");return t},"b5a2ea56adb918d7d443468b3a9b53d1","4e1b02770dbac5d412db067145ca1088","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966");I$("9e55fbaa9c78b34470a0c7234a7acec2",function(e,t,i,n,a,o,s,r){a._$postMessage=function(){var e=window.name||"_parent",a={_top:window.top,_self:window,_parent:window.parent};return function(s,r){if(t._$isString(s)){s=a[s]||window.frames[s]||(i._$get(s)||o).contentWindow;if(!s)return}var _=t._$fetch({data:null,origin:"*",source:e},r);n.__postMessage(s,_)}}();if(!0)e.copy(e.P("nej.j"),a);return a},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","ab3664b2bc4313131fd02b33a63226b4");I$("f4c768761e7fda202da01790c95f2d9e",function(e,t,i,n,a,o,s,r,_,c,d){var f,l={};r._$$ProxyFrame=i._$klass();f=r._$$ProxyFrame._$extend(e._$$ProxyAbstract);f.__init=function(){var e="NEJ-AJAX-DATA:",t=!1;var i=function(t){var i=t.data;if(0==i.indexOf(e)){i=JSON.parse(i.replace(e,""));var n=l[i.key];if(n){delete l[i.key];i.result=decodeURIComponent(i.result||"");n.__onLoadRequest(i)}}};var a=function(){if(!t){t=!0;n._$addEvent(window,"message",i)}};return function(){this.__super();a()}}();f.__doSendRequest=function(e){var i=e.request,r=a._$getFrameProxy(i.url),_=l[r];if(!t._$isArray(_))if(_){this.__rkey=t._$uniqueID();l[this.__rkey]=this;var c=t._$fetch({url:"",data:null,timeout:0,method:"GET"},i);c.key=this.__rkey;c.headers=e.headers;s._$postMessage(l[r],{data:c})}else{l[r]=[this.__doSendRequest._$bind(this,e)];o._$createXFrame({src:r,visible:!1,onload:function(e){var i=l[r];l[r]=n._$getElement(e).contentWindow;t._$reverseEach(i,function(e){try{e()}catch(t){}})}})}else _.push(this.__doSendRequest._$bind(this,e))};f._$abort=function(){delete l[this.__rkey];this.__onLoadRequest({status:0})};return r},"2322fd9dca9dfaba0b88a4d9ab7e084e","2ad7178887dc8cdca6f726aa3bb0d129","7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","1abf69011eed38414af6c85d334eac2c","5bd21216eb7851bb48d84acf022ca85f","9e55fbaa9c78b34470a0c7234a7acec2");I$("4dbca08c9c8216da61903b9cabd222c0",function(e,t,i,n,a,o,s,r,_,c,d,f){var l,u={},h="NEJ-UPLOAD-RESULT:";_._$$ProxyUpload=t._$klass();l=_._$$ProxyUpload._$extend(e._$$ProxyAbstract);l.__init=function(){var e=!1;var t=function(e){var t=e.data;if(0==t.indexOf(h)){t=JSON.parse(t.replace(h,""));var i=u[t.key];if(i){delete u[t.key];i.__onLoadRequest(decodeURIComponent(t.result))}}};var i=function(){if(!e){e=!0;n._$addEvent(window,"message",t)}};return function(){this.__super();i()}}();l.__destroy=function(){this.__super();a._$remove(this.__frame);delete this.__frame;window.clearTimeout(this.__timer);delete this.__timer};l.__onLoadRequest=function(e){try{var t=a._$text2type(e,this.__request.type);this._$dispatchEvent("onload",t)}catch(i){this._$dispatchEvent("onerror",{code:o._$CODE_ERREVAL,message:e})}};l.__doSendRequest=function(){var e=function(){var e,t;try{var e=this.__frame.contentWindow.document.body,t=(e.innerText||e.textContent||"").trim();if(t.indexOf(h)>=0||e.innerHTML.indexOf(h)>=0)return}catch(i){return}this.__onLoadRequest(t)};var t=function(e,i,n){s._$request(e,{type:"json",method:"POST",cookie:n,mode:parseInt(i)||0,onload:function(a){if(this.__timer){this._$dispatchEvent("onuploading",a);this.__timer=window.setTimeout(t._$bind(this,e,i,n),1e3)}}._$bind(this),onerror:function(a){if(this.__timer)this.__timer=window.setTimeout(t._$bind(this,e,i,n),1e3)}._$bind(this)})};return function(s){var r=s.request,_=s.headers,d=r.data,f=i._$uniqueID();u[f]=this;d.target=f;d.method="POST";d.enctype=o._$HEAD_CT_FILE;d.encoding=o._$HEAD_CT_FILE;var l=d.action||"",h=l.indexOf("?")<=0?"?":"&";d.action=l+h+"_proxy_=form";this.__frame=a._$createXFrame({name:f,onload:function(i){var a=n._$getElement(i);n._$addEvent(a,"load",e._$bind(this));d.submit();var o=(d.nej_query||c).value;if(o){var s=(d.nej_mode||c).value,r="true"===(d.nej_cookie||c).value;this.__timer=window.setTimeout(t._$bind(this,o,s,r),100)}}._$bind(this)})}}();l._$abort=function(){this._$dispatchEvent("onerror",{code:o._$CODE_ERRABRT,message:"客户端终止文件上传"})};return _},"2322fd9dca9dfaba0b88a4d9ab7e084e","7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","afa71b55d933063687962bda51d6839c","ba59bcf74b0f62bae6020b0801aef10c","9e55fbaa9c78b34470a0c7234a7acec2");
I$("816b690a25f4f2affb24a90dc049f9f9",function(e,t,i,n,a,o,s,r){a.__getProxyByMode=function(a,o,s){var r=o?{2:n._$$ProxyUpload}:{2:i._$$ProxyFrame,3:t._$$ProxyFlash};return(r[a]||e._$$ProxyXHR)._$allocate(s)};return a},"47f30666ea167ab81df47c5b69054138","0296667aa770ae4ae2b7302bc63cd8a1","f4c768761e7fda202da01790c95f2d9e","4dbca08c9c8216da61903b9cabd222c0");I$("8f2a33e181afe10ecf22c8d3fd0219fc",function(e,t,i,n,a,o){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="5.0")I$("fd08a9752391397201f8a9161560da64",function(){t.__getProxyByMode=function(){var e={0:2,1:3};return t.__getProxyByMode._$aop(function(t){var i=t.args,n=i[0]||0;i[0]=i[1]?2:e[n]||n})}()});return t},"b5a2ea56adb918d7d443468b3a9b53d1","816b690a25f4f2affb24a90dc049f9f9");I$("ba59bcf74b0f62bae6020b0801aef10c",function(e,t,i,n,a,o,s,r,_,c){var d={},f=_;s._$abort=function(e){var t=d[e];if(t)t.req._$abort()};s._$filter=function(e){f=e||_};s._$request=function(){var e=(location.protocol+"//"+location.host).toLowerCase();var n=function(t){var n=i._$url2origin(t);return!!n&&n!=e};var s=function(e){return(e||r)[t._$HEAD_CT]==t._$HEAD_CT_FILE};var c=function(e){var t=s(e.headers);if(!n(e.url)&&!t)return a._$$ProxyXHR._$allocate(e);else return o.__getProxyByMode(e.mode,t,e)};var l=function(e,t){var i={data:t};var n=e.result.headers;if(n)i.headers=e.req._$header(n);return i};var u=function(e){var t=d[e];if(t){if(t.req)t.req._$recycle();delete d[e]}};var h=function(e,t){var i=d[e];if(i){var n=arguments[2];if("onload"==t&&i.result)n=l(i,n);u(e);var a={type:t,result:n};f(a);if(!a.stopped)(i[t]||_)(a.result)}};var m=function(e,t){h(e,"onload",t)};var p=function(e,t){h(e,"onerror",t)};var g=function(e,t){var n=e.indexOf("?")<0?"?":"&",t=t||"";if(i._$isObject(t))t=i._$object2query(t);if(t)e+=n+t;return e};return function(e,t){t=t||{};var n=i._$uniqueID(),a={result:t.result,onload:t.onload||_,onerror:t.onerror||_};d[n]=a;t.onload=m._$bind(null,n);t.onerror=p._$bind(null,n);if(t.query)e=g(e,t.query);var o=t.method||"";if((!o||/get/i.test(o))&&t.data){e=g(e,t.data);t.data=null}t.url=e;a.req=c(t);a.req._$send(t.data);return n}}();s._$upload=function(e,a){e=n._$get(e);if(!e)return"";var o=i._$fetch({mode:0,type:"json",query:null,cookie:!1,headers:{},onload:null,onerror:null,onuploading:null,onbeforerequest:null},a);o.data=e;o.method="POST";o.timeout=0;o.headers[t._$HEAD_CT]=t._$HEAD_CT_FILE;return s._$request(e.action,o)};if(!0)e.copy(e.P("nej.j"),s);return s},"c27e07105db4b2613e9811a6e5ceab90","afa71b55d933063687962bda51d6839c","2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","47f30666ea167ab81df47c5b69054138","8f2a33e181afe10ecf22c8d3fd0219fc");I$("151dee88c351c8405380a30aa6cd8067",function(e,t,i,n,a,o,s,r){var _;a._$$LoaderText=t._$klass();_=a._$$LoaderText._$extend(e._$$LoaderAbstract);_.__getRequest=function(){return null};_.__doRequest=function(){n._$request(this.__url,{method:"GET",type:"text",onload:this.__onLoaded._$bind(this),onerror:this.__onError._$bind(this)})};_.__onLoaded=function(e){this.__doCallback("onload",{url:this.__url,content:e})};return a},"30f5582d3c4b6925466794bf77bb18aa","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","ba59bcf74b0f62bae6020b0801aef10c");I$("931d76ab4db8f339030436857aad7fec",function(e,t,i,n,a){t.__removeIFrameKeepHistory=function(t){e._$remove(t)};return t},"5bd21216eb7851bb48d84acf022ca85f");I$("d7690d7f1208f9d26e976837e88a65ae",function(e,t,i,n,a,o,s){if("trident"===i._$KERNEL.engine&&i._$KERNEL.release<="2.0")I$("a1b85d550a9faffb024543b42d9103cd",function(){e.__removeIFrameKeepHistory=function(e){t._$setStyle(e,"display","none");try{e.contentWindow.document.body.innerHTML="&nbsp;"}catch(i){}}});return e},"931d76ab4db8f339030436857aad7fec","5bd21216eb7851bb48d84acf022ca85f","b5a2ea56adb918d7d443468b3a9b53d1");I$("c8d77e64a311b14ca75fc795878a05b2",function(e,t,i,n,a,o,s,r){var _;a._$$LoaderHtml=t._$klass();_=a._$$LoaderHtml._$extend(e._$$LoaderAbstract);_.__getRequest=function(){var e=i._$create("iframe");e.width=0;e.height=0;e.style.display="none";return e};_.__doRequest=function(e){try{document.body.appendChild(e);e.src=this.__url}catch(t){console.log(e);console.error(t)}};_.__onError=function(e){var t=(this.__getLoadData(this.__url)||o).request;this.__doCallback("onerror",e);n.__removeIFrameKeepHistory(t)};_.__onLoaded=function(){var e=null,t=(this.__getLoadData(this.__url)||o).request;try{if(t.src!=this.__url)return;e=t.contentWindow.document.body}catch(i){}this.__doCallback("onload",e);n.__removeIFrameKeepHistory(t)};return a},"30f5582d3c4b6925466794bf77bb18aa","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","d7690d7f1208f9d26e976837e88a65ae");I$("4bc6827ebeba39257551489e3bddeb75",function(e,t,i,n,a,o,s){var r;n._$$LoaderStyle=t._$klass();r=n._$$LoaderStyle._$extend(e._$$LoaderAbstract);r.__getRequest=function(){return i._$create("link")};r.__doRequest=function(e){e.href=this.__url;document.head.appendChild(e)};return n},"30f5582d3c4b6925466794bf77bb18aa","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f");I$("00ecd41c46668013ae21018e30cafaf4",function(e,t,i,n,a,o,s){var r;n._$$LoaderScript=t._$klass();r=n._$$LoaderScript._$extend(e._$$LoaderAbstract);r.__reset=function(e){this.__super(e);this.__async=e.async;this.__charset=e.charset;this.__qopt.async=!1;this.__qopt.charset=this.__charset};r.__getRequest=function(){var e=i._$create("script");if(null!=this.__async)e.async=!!this.__async;if(null!=this.__charset)e.charset=this.__charset;return e};r.__doClearRequest=function(e){i._$remove(e)};return n},"30f5582d3c4b6925466794bf77bb18aa","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f");I$("f3588d143a382d1db6c4795a0640530d",function(e,t,i,n,a,o,s,r,_){o._$loadScript=function(e,t){a._$$LoaderScript._$allocate(t)._$load(e)};o._$queueScript=function(e,t){a._$$LoaderScript._$allocate(t)._$queue(e)};o._$loadStyle=function(e,t){n._$$LoaderStyle._$allocate(t)._$load(e)};o._$queueStyle=function(e,t){n._$$LoaderStyle._$allocate(t)._$queue(e)};o._$loadHtml=function(e,t){i._$$LoaderHtml._$allocate(t)._$load(e)};o._$loadText=function(e,i){t._$$LoaderText._$allocate(i)._$load(e)};if(!0)e.copy(e.P("nej.j"),o);return o},"c27e07105db4b2613e9811a6e5ceab90","151dee88c351c8405380a30aa6cd8067","c8d77e64a311b14ca75fc795878a05b2","4bc6827ebeba39257551489e3bddeb75","00ecd41c46668013ae21018e30cafaf4");I$("3da49e23d83c707316e52d7e8e62291a",function(e,t,i,n,a,o,s,r,_,c,d,f,l,u){var h={},m="ntp-"+ +new Date+"-";d.tpl=function(){return h};d._$parseTemplate=function(){var e=0;var c=function(){if(!(e>0)){e=0;i._$dispatchEvent(document,"templateready");i._$clearEvent(document,"templateready")}};var l=function(e,i){var a=n._$dataset(e,"src");if(a){i=i||f;var o=i.root;if(!o)o=e.ownerDocument.location.href;else o=t._$absolute(o);a=a.split(",");t._$forEach(a,function(e,i,n){n[i]=t._$absolute(e,o)});return a}};var u=function(e){if(a._$is("mac")&&"safari"===a._$KERNEL.browser)return t._$unescape(e.innerHTML);else return e.value||e.innerText||""};var h=function(e,t){if(e){var i=l(e,t);if(i)r._$queueStyle(i,{version:n._$dataset(e,"version")});n._$addStyle(e.value)}};var m=function(t){e--;n._$addScript(t);c()};var p=function(t,i){if(t){var a=l(t,i),o=t.value;if(!a)n._$addScript(o);else{e++;var i={version:n._$dataset(t,"version"),onload:m._$bind(null,o)};window.setTimeout(r._$queueScript._$bind(r,a,i),0)}}};var g=function(t){e--;d._$parseTemplate(t);c()};var v=function(t,i){if(t){var a=l(t,i)[0];if(a){e++;var i={version:n._$dataset(t,"version"),onload:g};window.setTimeout(r._$loadHtml._$bind(r,a,i),0)}}};var b=function(t,i){e--;d._$addTextTemplate(t,i||"");c()};var $=function(t,i){if(t&&t.id){var a=t.id,o=l(t,i)[0];if(o){e++;var s=o+(o.indexOf("?")<0?"?":"&")+(n._$dataset(t,"version")||""),i={type:"text",method:"GET",onload:b._$bind(null,a)};window.setTimeout(_._$request._$bind(_,s,i),0)}}};var y=function(e,t){var i=e.name.toLowerCase();switch(i){case"jst":o._$addTemplate(u(e),e.id);return;case"txt":d._$addTextTemplate(e.id,u(e));return;case"ntp":d._$addNodeTemplate(u(e),e.id);return;case"js":p(e,t);return;case"css":h(e,t);return;case"html":v(e,t);return;case"res":$(e,t);return}};s._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:c});return function(e,i){e=n._$get(e);if(e){var a="TEXTAREA"==e.tagName?[e]:t._$object2array(e.getElementsByTagName("textarea"));t._$forEach(a,function(e){y(e,i)});n._$remove(e,!0)}c()}}();d._$addTextTemplate=function(e,t){if(null!=h[e]&&typeof h[e]==typeof t){console.warn("text template overwrited with key "+e);console.debug("old template content: "+h[e].replace(/\n/g," "));console.debug("new template content: "+t.replace(/\n/g," "))}h[e]=t||""};d._$getTextTemplate=function(e){return h[e]||""};d._$addNodeTemplate=function(e,i){i=i||t._$uniqueID();e=n._$get(e)||e;d._$addTextTemplate(m+i,e);if(!t._$isString(e))n._$removeByEC(e);return i};d._$getNodeTemplate=function(e){if(!e)return null;e=m+e;var i=d._$getTextTemplate(e);if(!i)return null;var a;if(t._$isString(i)){i=n._$html2node(i);var o=i.getElementsByTagName("textarea");if(!("TEXTAREA"==i.tagName||o&&o.length))d._$addTextTemplate(e,i);else a=i}if(!a)a=i.cloneNode(!0);n._$removeByEC(a);return a};d._$getItemTemplate=function(){var e=function(e,t){return"offset"==t||"limit"==t};return function(i,n,a){var o=[];if(!i||!i.length||!n)return o;a=a||f;var s=i.length,r=parseInt(a.offset)||0,_=Math.min(s,r+(parseInt(a.limit)||s)),c={total:i.length,range:[r,_]};t._$merge(c,a,e);for(var d=r,l;d<_;d++){c.index=d;c.data=i[d];l=n._$allocate(c);var u=l._$getId();h[u]=l;l._$recycle=l._$recycle._$aop(function(e,t){delete h[e];delete t._$recycle}._$bind(null,u,l));o.push(l)}return o}}();d._$getItemById=function(e){return h[e]};d._$parseUITemplate=function(){var e=/#<(.+?)>/g;return function(i,a){a=a||{};i=(i||"").replace(e,function(e,i){var n=a[i];if(!n){n="tpl-"+t._$uniqueID();a[i]=n}return n});d._$parseTemplate(n._$html2node(i));return a}}();c._$merge({_$parseTemplate:d._$parseTemplate,
_$addNodeTemplate:d._$addNodeTemplate});if(!0)e.copy(e.P("nej.e"),d);return d},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","b5a2ea56adb918d7d443468b3a9b53d1","3174a1d30233acba88fa4afe0e1bcf90","73178fa1c529e77edd2d067795ed0e51","f3588d143a382d1db6c4795a0640530d","ba59bcf74b0f62bae6020b0801aef10c","c2028585a730a88452fc7218e9c1ddab");I$("d1bf8daf5a41ea1e86db380d4fa07f12",function(e,t,i,n,a,o,s,r,_,c){var d;s._$$Abstract=t._$klass();d=s._$$Abstract._$extend(a._$$EventTarget);d.__init=function(){this.__super();i._$dumpCSSText();this.__initXGui();this.__initNode()};d.__reset=function(e){this.__super(e);this.__doInitClass(e.clazz);this.__doInitDataset(e.dataset);this._$appendTo(e.parent)};d.__destroy=function(){this.__super();this.__doDelParentClass();this.__doDelParentDataset();delete this.__parent;i._$removeByEC(this.__body);i._$delClassName(this.__body,this.__class);delete this.__class};d.__initXGui=_;d.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=o._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=i._$create("div",this.__seed_css);i._$addClassName(this.__body,this.__seed_css)};d.__initNodeTemplate=_;d.__doInitClass=function(e){this.__class=e||"";i._$addClassName(this.__body,this.__class)};d.__doInitDataset=function(e){this.__datamap=n._$merge({},e);i._$dataset(this.__body,this.__datamap)};d.__doDelParentDataset=function(){n._$forIn(this.__datamap,function(e,t){i._$dataset(this.__body,t,"")},this)};d.__doAddParentClass=function(){if(this.__seed_css){var e=this.__seed_css.split(/\s+/);i._$addClassName(this.__parent,e.pop()+"-parent")}};d.__doDelParentClass=function(){if(this.__seed_css){var e=this.__seed_css.split(/\s+/);i._$delClassName(this.__parent,e.pop()+"-parent")}};d._$getBody=function(){return this.__body};d._$appendTo=function(e){if(this.__body){this.__doDelParentClass();if(n._$isFunction(e))this.__parent=e(this.__body);else{this.__parent=i._$get(e);if(this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass()}};d._$show=function(){if(this.__parent&&this.__body&&this.__body.parentNode!=this.__parent)this.__parent.appendChild(this.__body)};d._$hide=function(){i._$removeByEC(this.__body)};if(!0)e.copy(e.P("nej.ui"),s);return s},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","e4cc364ae94aa1c5f0562d86be81286e","3da49e23d83c707316e52d7e8e62291a");I$("d5ae310d71f4b6c5cffaf2d5b5874060",function(e,t,i,n,a,o,s){var r;n._$$Item=t._$klass();r=n._$$Item._$extend(i._$$Abstract);r.__init=function(){this.__id=this.__genId();this.__super()};r.__reset=function(e){this.__super(e);this.__index=e.index;this.__total=e.total;this.__range=e.range;this._$refresh(e.data)};r.__destroy=function(){this.__super();delete this.__data;delete this.__index;delete this.__total;delete this.__range};r.__doRefresh=o;r.__genId=function(){var e=+new Date;return function(){return"itm-"+ ++e}}();r._$getId=function(){return this.__id};r._$getData=function(){return this.__data};r._$refresh=function(e){this.__data=e||{};this.__doRefresh(this.__data)};if(!0)e.copy(e.P("nej.ui"),n);return n},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","d1bf8daf5a41ea1e86db380d4fa07f12");I$("e07efa5e0527df011899069cc0518940",function(e,t,i,n,a,o,s){var r;n._$$ListItem=t._$klass();r=n._$$ListItem._$extend(i._$$Item);r.__reset=function(e){this.__pkey=e.pkey||"id";this.__prefix=e.prefix||"";this.__super(e)};r.__onDelete=function(e){this._$dispatchEvent("ondelete",{ext:e,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};r.__onUpdate=function(e){this._$dispatchEvent("onupdate",{ext:e,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};r._$refresh=function(e){this.__super(e);var t=this.__data[this.__pkey];this.__id=this.__prefix+t||this.__genId()};if(!0)e.copy(e.P("nej.ui"),n);return n},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","d5ae310d71f4b6c5cffaf2d5b5874060");I$("b5a2e91f3772e68ade3c61e7bb9ce076",".#<uispace>{font-size:12px;line-height:160%;}\n.#<uispace> a{margin:0 2px;padding:2px 8px;color:#333;border:1px solid #aaa;text-decoration:none;}\n.#<uispace> .js-disabled{cursor:default;}\n.#<uispace> .js-selected{cursor:default;background-color:#bbb;}");I$("492bb983bcc71a7b547d55a50e1f1547",function(e,t,i,n,a,o,s,r,_,c,d){var f;r._$$AbstractPager=t._$klass();f=r._$$AbstractPager._$extend(a._$$Abstract);f.__reset=function(e){this.__bopt=n._$merge({},e);this.__popt=n._$merge({},e);delete this.__bopt.onchange;this.__popt.onchange=this.__onChange._$bind(this);this.__super(e);this.__doResetNumber(e)};f.__destroy=function(){if(this.__page){this.__page._$recycle();delete this.__page}this.__super();delete this.__bopt;delete this.__popt;this._$unbind();this.__body.innerHTML="&nbsp;"};f.__initXGui=function(){var e=i._$pushCSSText(s);return function(){this.__seed_css=e}}();f.__doResetNumber=function(e){var t=e.label||_;if(!e.noprv){this.__popt.pbtn=i._$create("a","zbtn zprv",this.__body);this.__popt.pbtn.innerHTML=t.prev||"上一页"}var n=[];for(var a=1,o=e.number;a<=o;a++)n.push(i._$create("a","zpgi zpg"+a,this.__body));this.__popt.list=n;if(!e.nonxt){this.__popt.nbtn=i._$create("a","zbtn znxt",this.__body);this.__popt.nbtn.innerHTML=t.next||"下一页"}};f.__onChange=function(e){if(!this.__flag){var t=e.index,i=e.total;this.__flag=!0;this._$updatePage(t,i);n._$forEach(this.__binders,function(e){e._$updatePage(t,i)});this.__flag=!1;this._$dispatchEvent("onchange",e)}};f._$bind=function(e){e=i._$get(e);if(e){var t=n._$merge({},this.__bopt);t.parent=e;t.index=this._$getIndex();t.total=this._$getTotal();var a=this.constructor._$allocate(t);a._$setEvent("onchange",this.__popt.onchange);if(!this.__binders)this.__binders=[];this.__binders.push(a)}};f._$unbind=function(){var e=function(e,t,i){e._$recycle();i.splice(t,1)};return function(){n._$reverseEach(this.__binders,e)}}();f._$setIndex=function(e){if(this.__page)this.__page._$setIndex(e)};f._$getIndex=function(){if(!this.__page)return 1;else return this.__page._$getIndex()};f._$getTotal=function(){if(!this.__page)return 1;else return this.__page._$getTotal()};f._$updatePage=function(e,t){if(this.__page)this.__page._$updatePage(e,t)};f._$updateTotal=function(e){if(this.__page)this.__page._$updateTotal(e)};if(!0)e.copy(e.P("nej.ui"),r);return r},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3174a1d30233acba88fa4afe0e1bcf90","b5a2e91f3772e68ade3c61e7bb9ce076");I$("da36d11a8d54a1d64f9e0e72b0520672",function(e,t,i,n,a,o,s,r,_,c){var d;s._$$PageAbstract=t._$klass();d=s._$$PageAbstract._$extend(o._$$EventTarget);d.__reset=function(e){this.__super(e);this.__pbtn=e.pbtn;this.__nbtn=e.nbtn;this.__sbtn=e.sbtn;this.__ebtn=e.ebtn;this.__name=e.event||"click";this.__parented=!!e.parented;this.__selected=e.selected||"js-selected";this.__disabled=e.disabled||"js-disabled";this.__doPageListCheck(e.list);this.__limit=e.limit||1/0;this._$updatePage(e.index||1,e.total||1)};d.__destroy=function(){this.__super();delete this.__list;delete this.__name;delete this.__pbtn;delete this.__nbtn;delete this.__sbtn;delete this.__ebtn;delete this.__last;delete this.__total;delete this.__index;delete this.__extdata;delete this.__selected;delete this.__disabled};d.__getSelectNode=function(e){return!this.__parented?e:e.parentNode};d.__doPageListCheck=function(){var e=function(e){this.__list.push(e);this.__doInitDomEvent([[e,this.__name,this.__onClick._$bind2(this,0)]])};return function(t){this.__list=[];this.__doInitDomEvent([[this.__pbtn,"click",this.__onClick._$bind2(this,-1)],[this.__nbtn,"click",this.__onClick._$bind2(this,1)],[this.__sbtn,"click",this.__onClick._$bind2(this,-2)],[this.__ebtn,"click",this.__onClick._$bind2(this,2)]]);i._$forEach(t,e,this)}}();d.__doSetNodeIndex=function(e,t){var i=this.__getSelectNode(e);if(null==t){e.innerText="";n._$setStyle(e,"display","none");n._$delClassName(i,this.__selected)}else{e.innerText=t;n._$setStyle(e,"display","");t==this.__index?n._$addClassName(i,this.__selected):n._$delClassName(i,this.__selected)}};d.__doSyncBtnState=function(){if(this.__index<=1){n._$addClassName(this.__pbtn,this.__disabled);n._$addClassName(this.__sbtn,this.__disabled)}else{n._$delClassName(this.__pbtn,this.__disabled);n._$delClassName(this.__sbtn,this.__disabled)}if(this.__index>=this.__total){n._$addClassName(this.__nbtn,this.__disabled);n._$addClassName(this.__ebtn,this.__disabled)}else{n._$delClassName(this.__nbtn,this.__disabled);n._$delClassName(this.__ebtn,this.__disabled)}};d.__doRefreshPage=_;d.__doChangeIndex=function(){this.__doRefreshPage();this.__doSyncBtnState();this._$dispatchEvent("onchange",{last:this.__last,total:this.__total,index:this.__index,ext:this.__extdata})};d.__doSaveIndex=function(e){e=parseInt(e);if(isNaN(e)||null==this.__total)return!1;e=Math.max(1,Math.min(e,this.__total));this.__last=this.__index;this.__index=e;return!0};d.__doSaveTotal=function(e){e=parseInt(e);if(isNaN(e)||e<1)return!1;this.__total=Math.min(e,this.__limit);return!0};d.__onClick=function(e,t){a._$stopDefault(e);var i=a._$getElement(e),o=n._$hasClassName(this.__getSelectNode(i),this.__selected),s=n._$hasClassName(i,this.__disabled);if(i&&!o&&!s){var r=i.innerText;switch(t){case 1:case-1:r=this.__index+t;break;case 2:r=this.__total;break;case-2:r=1}this._$setIndex(r)}};d._$getIndex=function(){return this.__index};d._$setIndex=function(e){var t=this.__index;this.__doSaveIndex(e);if(t!=this.__index)this.__doChangeIndex()};d._$getTotal=function(){return this.__total};d._$setTotal=function(e){if(this.__doSaveTotal(e)&&null!=this.__index){this.__index=1;this.__doChangeIndex()}};d._$updateTotal=function(e){if(this.__doSaveTotal(e)){this.__doRefreshPage();this.__doSyncBtnState()}};d._$updatePage=function(e,t){
if(this.__doSaveTotal(t)&&this.__doSaveIndex(e))this.__doChangeIndex()};if(!0)e.P("nej.ut")._$$AbstractPage=s._$$PageAbstract;return s},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","e4cc364ae94aa1c5f0562d86be81286e");I$("e1a124ba2268398eccf93c19a7440b7f",function(e,t,i,n,a,o,s,r,_){var c;o._$$PageFragment=t._$klass();c=o._$$PageFragment._$extend(a._$$PageAbstract);c.__init=function(){this.__ndot=[];this.__super()};c.__destroy=function(){this.__super();this.__doRecycleDotNode()};c.__doRecycleDotNode=function(){var e=function(e,t,n){i._$remove(e);n.splice(t,1)};return function(){n._$reverseEach(this.__ndot,e)}}();c.__doRefreshPage=function(){this.__extdata={last:!1,first:!1,list:this.__list};this.__doRecycleDotNode();this.__doSetNodeIndex(this.__list[0],1);var e=1,t=this.__list.length;if(!(this.__total<t)){if(this.__index>1){var n=Math.floor((t-2)/2),a=this.__total-t+2,o=Math.max(2,this.__index-n);if(this.__total>=t)o=Math.min(o,a);if(o>2){var s=i._$create("span","zdot");this.__ndot.push(s);s.innerText="...";this.__list[0].insertAdjacentElement("afterEnd",s);this.__extdata.first=!0}for(var r;;e++){r=o+e-1;if(r>this.__index)break;this.__doSetNodeIndex(this.__list[e],r)}}if(this.__index<this.__total){var r,o=this.__index+1;for(var _=0,c=t-2;;_++,e++){r=o+_;if(e>c||r>this.__total)break;this.__doSetNodeIndex(this.__list[e],r)}if(r<this.__total){var s=i._$create("span","zdot");this.__ndot.push(s);s.innerText="...";this.__list[e].insertAdjacentElement("beforeBegin",s);this.__extdata.last=!0}if(r<=this.__total)this.__doSetNodeIndex(this.__list[e++],this.__total)}for(;e<t;e++)this.__doSetNodeIndex(this.__list[e])}else for(var d;e<t;e++){d=e+1;this.__doSetNodeIndex(this.__list[e],d>this.__total?null:d)}};if(!0)e.P("nej.ut")._$$Page=o._$$PageFragment;return o},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","da36d11a8d54a1d64f9e0e72b0520672");I$("1167fcc1c042015fa40350e32dcfd3f9",function(e,t,i,n,a,o,s,r,_){var c;o._$$Pager=t._$klass();c=o._$$Pager._$extend(n._$$AbstractPager);c.__reset=function(e){e.number=parseInt(e.number)||9;this.__super(e);this.__page=a._$$PageFragment._$allocate(this.__popt)};c.__onChange=function(e){if(this.__bopt.noend){var t=e.ext||s,n=t.list||_;if(t.last)i._$setStyle(n[n.length-1],"display","none")}this.__super(e)};if(!0)e.copy(e.P("nej.ui"),o);return o},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","492bb983bcc71a7b547d55a50e1f1547","e1a124ba2268398eccf93c19a7440b7f");I$("794930647b5c482541a14b6e5cc19847",function(e,t,i,n){e.__getItemInStorage=function(e){return localStorage.getItem(e)};e.__setItemToStorage=function(e,t){localStorage.setItem(e,t)};e.__removeItemFromStorage=function(e){localStorage.removeItem(e)};e.__clearStorage=function(){localStorage.clear()};e.__initStorage=function(){(document.onstorageready||i)()};e.__isStorageReady=function(){return!0};return e});I$("4c8ba4c288c4f878bf72bdb333585ae7",function(e,t,i,n,a,o,s){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="3.0")I$("3d918f3a8e4a9ebf1e68588054a1b749",function(e,n){var a;var o=function(){if(!a)n._$flash({hidden:!0,src:e._$get("storage.swf"),params:{AllowScriptAccess:"sameDomain"},onready:function(e){if(!e)console.log("flash for localStorage unavailable");else{a=e;a.initStorage("nej-storage")}t._$dispatchEvent(document,"storageready")}})};i.__getItemInStorage=function(e){if(a)return a.getItem(e)};i.__setItemToStorage=function(e,t){if(a)a.setItem(e,t)};i.__removeItemFromStorage=function(e){if(a)a.removeItem(e)};i.__clearStorage=function(){if(a)a.clear()};i.__initStorage=function(){o()};i.__isStorageReady=function(){return!!a}},"1abf69011eed38414af6c85d334eac2c","dd0d1a1037c22ed9e0f6b9ee11e08255");return i},"b5a2ea56adb918d7d443468b3a9b53d1","7b946b5cd842c1aceab62d37f3506966","794930647b5c482541a14b6e5cc19847");I$("1ee4e2cdd328409e540872818f70271a",function(e,t,i,n,a,o,s,r,_){var c={};o._$setDataInStorage=function(e,t){var i=JSON.stringify(t);try{a.__setItemToStorage(e,i)}catch(n){console.error(n.message);console.error(n)}if(i!=a.__getItemInStorage(e))c[e]=t};o._$getDataInStorage=function(e){var t=JSON.parse(a.__getItemInStorage(e)||"null");return null==t?c[e]:t};o._$getDataInStorageWithDefault=function(e,t){var i=o._$getDataInStorage(e);if(null==i){i=t;o._$setDataInStorage(e,i)}return i};o._$delDataInStorage=function(e){delete c[e];a.__removeItemFromStorage(e)};o._$clearDataInStorage=function(){var e=function(e,t,i){delete i[t]};return function(){t._$loop(c,e);a.__clearStorage()}}();n._$$CustomEvent._$allocate({element:document,event:"storageready",oneventadd:function(){if(a.__isStorageReady())i._$dispatchEvent(document,"storageready")}});var d=function(){var e=function(e,t,i){a.__setItemToStorage(t,JSON.stringify(e));delete i[t]};return function(){t._$loop(c,e)}}();i._$addEvent(document,"storageready",d);a.__initStorage();if(!0)e.copy(e.P("nej.j"),o);return o},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","73178fa1c529e77edd2d067795ed0e51","4c8ba4c288c4f878bf72bdb333585ae7");I$("8086a8ac7b58bcf98bbbb420e1758622",function(e,t,i,n,a,o,s,r,_){var c,d="dat-"+ +new Date;o._$$CacheAbstract=t._$klass();c=o._$$CacheAbstract._$extend(n._$$EventTarget);c.__init=function(){this.__super();this.__cache=this.constructor[d];if(!this.__cache){this.__cache={};this.__cache[d+"-l"]={};this.constructor[d]=this.__cache}};c.__getDataInCache=function(e){return this.__cache[e]};c.__setDataInCache=function(e,t){this.__cache[e]=t};c.__getDataInCacheWithDefault=function(e,t){var i=this.__getDataInCache(e);if(null==i){i=t;this.__setDataInCache(e,i)}return i};c.__delDataInCache=function(e){if(null==e)i._$loop(this.__cache,function(e,t){if(t!=d+"-l")this.__delDataInCache(t)},this);else delete this.__cache[e]};c.__delDataInStorage=function(e){return a._$delDataInStorage(e)};c.__getDataInStorage=function(e){return a._$getDataInStorage(e)};c.__setDataInStorage=function(e,t){a._$setDataInStorage(e,t)};c.__getDataLocalWithDefault=function(e,t){var i=this.__getDataLocal(e);if(null==i){i=t;this.__setDataLocal(e,i)}return i};c.__getDataLocal=function(e){var t=this.__getDataInCache(e);if(null!=t)return t;t=this.__getDataInStorage(e);if(null!=t)this.__setDataInCache(e,t);return t};c.__setDataLocal=function(e,t){this.__setDataInStorage(e,t);this.__setDataInCache(e,t)};c.__delDataLocal=function(e){if(null==e)i._$loop(this.__cache,function(e,t){if(t!=d+"-l")this.__delDataLocal(t)},this);else{delete this.__cache[e];a._$delDataInStorage(e)}};c._$clearDataLocal=function(){this.__delDataLocal()};c.__doCallbackRequest=function(e){var t=this.__cache[d+"-l"],n=_.slice.call(arguments,1);i._$forEach(t[e],function(e){try{e.apply(this,n)}catch(t){if(!1)throw t;console.error(t.message);console.error(t.stack)}});delete t[e]};c.__doQueueRequest=function(e,t){t=t||r;var i=this.__cache[d+"-l"][e];if(!i){i=[t];this.__cache[d+"-l"][e]=i;return!1}i.push(t);return!0};c.__doClearReqQueue=function(e){delete this.__cache[d+"-l"][e]};c.__hasFragment=function(e,t,i){if(!e)return!1;t=parseInt(t)||0;i=parseInt(i)||0;if(!i){if(!e.loaded)return!1;i=e.length}if(e.loaded)i=Math.min(i,e.length-t);for(var n=0;n<i;n++)if(!e[t+n])return!1;return!0};c._$isFragmentFilled=function(e,t,i){return this.__hasFragment(this._$getListInCache(e),t,i)};if(!0)e.P("nej.ut")._$$Cache=o._$$CacheAbstract;return o},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","e4cc364ae94aa1c5f0562d86be81286e","1ee4e2cdd328409e540872818f70271a");I$("38478d6bca8c12228ecd0a172bcaa43b",function(e,t,i,n,a,o,s,r){var _;a._$$CacheList=t._$klass();_=a._$$CacheList._$extend(n._$$CacheAbstract);_.__reset=function(e){this.__super(e);this.__key=e.key||"id";this.__data=e.data||o;this.__auto=!!e.autogc;this.__doSwapCache(e.id)};_.__destroy=function(){this.__super();if(this.__timer)this.__doGCAction()};_.__doSwapCache=function(e){var t;if(e){t=this.__cache[e];if(!t){t={};this.__cache[e]=t}}t=t||this.__cache;t.hash=t.hash||{};this.__lspl=t};_.__doGCAction=function(){this.__timer=window.clearTimeout(this.__timer);var e={};i._$loop(this.__lspl,function(t,n){if("hash"!=n)if(i._$isArray(t))i._$forEach(t,function(t){if(t)e[t[this.__key]]=!0},this)},this);i._$loop(this.__getHash(),function(t,i,n){if(!e[i])delete n[i]})};_.__doGCSchedule=function(){if(this.__timer)this.__timer=window.clearTimeout(this.__timer);this.__timer=window.setTimeout(this.__doGCAction._$bind(this),150)};_.__doSaveItemToCache=function(e,t){if(!i._$isArray(e)){e=this.__doFormatItem(e,t)||e;if(!e)return null;var n=e[this.__key];if(null!=n){var a=this.__getHash()[n];if(a)e=i._$merge(a,e);this.__getHash()[n]=e}delete e.__dirty__;return e}var o=[];i._$forEach(e,function(e){o.push(this.__doSaveItemToCache(e,t))},this);return o};_.__doRemoveItemFromList=function(e,t){var n=null,a=this.__key;if(!i._$isArray(t)){var n=null,a=this.__key;t=t[a]||t;var o=this._$getListInCache(e),s=i._$indexOf(o,function(e){return!!e&&e[a]==t});if(s>=0){n=o[s];o.splice(s,1)}return n}var n=[];i._$reverseEach(t,function(t){n.unshift(this.__doRemoveItemFromList(e,t))},this);return n};_.__doFormatItem=s;_.__doUnshiftToList=function(e,t){if(t)if(i._$isArray(t))i._$reverseEach(t,function(t){this.__doUnshiftToList(e,t)});else{var n=this._$getListInCache(e),t=this.__doSaveItemToCache(t,e);if(t)n.unshift(t)}};_._$setTotal=function(e,t){var i=this._$getListInCache(e);i.length=Math.max(i.length,t);this._$setLoaded(e)};_._$getTotal=function(e){return this._$getListInCache(e).length};_._$setLoaded=function(e,t){this._$getListInCache(e).loaded=t!==!1};_._$isLoaded=function(e){return!!this._$getListInCache(e).loaded};_._$setListInCache=function(e,t){this._$clearListInCache(e);this.__getList({key:e,offset:0,limit:t.length+1},{list:t,
total:t.length})};_._$getListInCache=function(){var e=function(e){return(e||"")+(!e?"":"-")+"list"};return function(t){var t=e(t),i=this.__lspl[t];if(!i){i=[];this.__lspl[t]=i}return i}}();_.__getHash=function(){var e=this.__lspl.hash;if(!e){e={};this.__lspl.hash=e}return e};_._$pullRefresh=function(){var e=function(e){return"r-"+e.key};return function(t){var n=i._$merge({},t),a=e(n),o=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(a,o)){n.rkey=a;n.onload=this.__pullRefresh._$bind(this,n);this._$dispatchEvent("dopullrefresh",n)}}}();_.__pullRefresh=function(e,t){var i=e.key,n=parseInt(t.total),a=t.list||t.result;this.__doUnshiftToList(i,a||t);if(!isNaN(n)&&a){this._$getListInCache(i).length=n;this._$setLoaded(i)}this.__doCallbackRequest(e.rkey,"onpullrefresh",e)};_._$getList=function(){var e=function(e){return"r-"+e.key+"-"+e.offset+"-"+e.limit};return function(t){t=t||o;var i={key:""+t.key||"",ext:t.ext||null,data:t.data||null,offset:parseInt(t.offset)||0,limit:parseInt(t.limit)||0},n=this._$getListInCache(i.key),a=this.__hasFragment(n,i.offset,i.limit);if(!a){var s=e(i),r=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(s,r)){i.rkey=s;i.onload=this.__getList._$bind(this,i);this._$dispatchEvent("doloadlist",i)}}else this._$dispatchEvent("onlistload",i)}}();_.__getList=function(){var e=function(e,t,i){if(e)return!0;i.splice(t,1)};return function(t,n){t=t||o;if(n){var a=t.key,s=t.offset,r=this._$getListInCache(a);var _=n||[];if(!i._$isArray(_)){_=n.result||n.list||[];var c=parseInt(n.total);if(!isNaN(c)||c>_.length)this._$setTotal(a,c)}i._$forEach(_,function(e,t){r[s+t]=this.__doSaveItemToCache(e,a)},this);if(_.length<t.limit){this._$setLoaded(a);i._$reverseEach(r,e)}this.__doCallbackRequest(t.rkey,"onlistload",t)}else this.__doCallbackRequest(t.rkey,"onlistload",t)}}();_._$clearListInCache=function(){var e=function(e,t,i){i.splice(t,1)};return function(t){if(t){var n=this._$getListInCache(t);i._$reverseEach(n,e);this._$setLoaded(t,!1);if(this.__auto)this.__doGCSchedule()}else i._$loop(this.__lspl,function(e,t){if("hash"!=t&&i._$isArray(e)){t=t.substr(0,t.length-5);this._$clearListInCache(t)}},this)}}();_.__doCheckItemValidity=function(e,t){return!e.__dirty__};_._$getItemInCache=function(e){return this.__getHash()[e]};_._$clearItemInCache=function(e){var t=this._$getItemInCache(e);if(t)t.__dirty__=!0};_._$getItem=function(){var e=function(e){return"r-"+e.key+"-"+e.id};return function(t){t=t||o;var i=t[this.__key],n={id:i,ext:t.ext,data:t.data||{},key:""+t.key||""};_item=this._$getItemInCache(i);n.data[this.__key]=i;if(!_item||!this.__doCheckItemValidity(_item,n.key)){var a=e(n),s=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(a,s)){n.rkey=a;n.onload=this.__getItem._$bind(this,n);this._$dispatchEvent("doloaditem",n)}}else this._$dispatchEvent("onitemload",n)}}();_.__getItem=function(e,t){e=e||o;this.__doSaveItemToCache(t,e.key);this.__doCallbackRequest(e.rkey,"onitemload",e)};_._$addItem=function(e){e=i._$merge({},e);e.onload=this.__addItem._$bind(this,e);this._$dispatchEvent("doadditem",e)};_.__addItem=function(e,t){var i=e.key;t=this.__doSaveItemToCache(t,i);if(t){var n=0,a=this._$getListInCache(i);if(!e.push){n=-1;var o=e.offset||0;a.splice(o,0,t)}else if(a.loaded){n=1;a.push(t)}else a.length++}var s={key:i,flag:n,data:t,action:"add",ext:e.ext};this._$dispatchEvent("onitemadd",s);return s};_._$deleteItem=function(e){e=i._$merge({},e);e.onload=this.__deleteItem._$bind(this,e);this._$dispatchEvent("dodeleteitem",e)};_.__deleteItem=function(e,t){var i,n=e.key;if(t){var a=e.id;i=this._$getItemInCache(a)||null;this.__doRemoveItemFromList(n,a)}var o={key:n,data:i,action:"delete",ext:e.ext};this._$dispatchEvent("onitemdelete",o);return o};_._$updateItem=function(e){e=i._$merge({},e);e.onload=this.__updateItem._$bind(this,e);this._$dispatchEvent("doupdateitem",e)};_.__updateItem=function(e,t){var i=e.key;if(t)t=this.__doSaveItemToCache(t,i);var n={key:i,data:t,action:"update",ext:e.ext};this._$dispatchEvent("onitemupdate",n);return n};if(!0)e.P("nej.ut")._$$ListCache=a._$$CacheList;return a},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","8086a8ac7b58bcf98bbbb420e1758622");I$("5b4b9f1ba2817ebe79aea4230001be7e",function(e,t,i,n,a,o,s,r,_,c,d,f,l,u,h){var m;f._$$ListModule=t._$klass();m=f._$$ListModule._$extend(r._$$EventTarget);m.__reset=function(e){this.__ropt={};this.__super(e);this.__lbox=a._$get(e.parent);this.__iopt={parent:this.__lbox};this.__limit=parseInt(e.limit)||10;this.__first=parseInt(e.first)||this.__limit;this.__doResetTemplate(e.item);this.__doResetCache(e.cache||l);this.__doResetPager(e.pager||l);this._$refresh()};m.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__doClearListBox();this.__super();if(this.__ropt.clear)this.__cache._$clearListInCache(this.__ropt.key);this.__cache._$recycle();if(this.__pager){this.__pager._$recycle();delete this.__pager}delete this.__pkls;delete this.__popt;delete this.__pulling;delete this.__cache;delete this.__lbox;delete this.__ikls;delete this.__iopt;delete this.__iext;delete this.__ropt};m.__getItemBodyId=function(e){return this.__getItemId(e)+_._$seed()};m.__getItemId=function(e){var t=(this.__iopt||l).prefix||"";return t+e};m.__getPageInfo=function(e,t,i,n){var a={index:1,total:1};if(t>=e)a.index=Math.floor((t-e)/i)+2;if(n>e)a.total=Math.ceil((n-e)/i)+1;return a};m.__doResetJSTTemplate=function(e){delete this.__ikls;this.__ikey=e;this.__doInitDomEvent([[this.__lbox,"click",this.__onCheckAction._$bind(this)]])};m.__doResetTemplate=function(e){if(!i._$isString(e)){i._$merge(this.__iopt,e);this.__iext=i._$merge({},e,function(e){return!i._$isFunction(e)});var t=this.__iopt.klass;delete this.__iopt.klass;if(!i._$isString(t)){delete this.__ikey;this.__ikls=t;this.__iopt.ondelete=this._$dispatchEvent._$bind(this,"ondelete");this.__iopt.onupdate=this._$dispatchEvent._$bind(this,"onupdate")}else this.__doResetJSTTemplate(t)}else this.__doResetJSTTemplate(e)};m.__doResetCache=function(e){var t=e.klass,n=i._$merge({},e);this.__ropt.key=n.lkey;this.__ropt.ext=n.ext;this.__ropt.data=n.data||{};this.__ropt.clear=!!n.clear;this.__iopt.pkey=n.key||"id";n.onerror=this._$dispatchEvent._$bind(this,"onerror");n.onlistload=this.__cbListLoad._$bind(this);n.onpullrefresh=this.__cbPullRefresh._$bind(this);if(t&&"onlistchange"in t)this.__doInitDomEvent([[t,"listchange",this.__cbListChange._$bind(this)]]);else{n.onitemadd=this.__cbItemAdd._$bind(this);n.onitemdelete=this.__cbItemDelete._$bind(this);n.onitemupdate=this.__cbItemUpdate._$bind(this)}this.__cache=(t||d._$$CacheList)._$allocate(n);if(null!=e.total)this.__cache._$setTotal(this.__ropt.key,e.total);if(e.list)this.__cache._$setListInCache(this.__ropt.key,e.list)};m.__doResetPager=function(e){this.__pkls=e.klass||s._$$Pager;this.__popt=i._$merge({},e);if(i._$isArray(e.parent)){this.__popt.parent=e.parent[0];this.__pbid=e.parent.slice(1);if(!this.__pbid||!this.__pbid.length)delete this.__pbid}delete this.__popt.klass};m.__doClearListBox=function(){var e=/^(?:table|tr|tbody|ul|ol|select)$/i;return function(){this._$dispatchEvent("onbeforelistclear",{parent:this.__lbox});if(this.__items&&this.__items.length>0){this.__items=this.__ikls._$recycle(this.__items);delete this.__items}if(e.test(this.__lbox.tagName))a._$clearChildren(this.__lbox);else this.__lbox.innerHTML=""}}();m.__doSwitchPagerShow=function(e){if(!this.__popt.fixed){a._$setStyle(this.__popt.parent,"display",e);i._$forEach(this.__pbid,function(t){a._$setStyle(t,"display",e)},this)}};m.__doRefreshByPager=function(){var e=this.__popt.index||1;delete this.__popt.index;if(this.__pager)e=this.__pager._$getIndex();this.__doChangePage({last:e,index:e})};m.__doChangePage=function(e){this._$dispatchEvent("onpagechange",e)};m.__doChangeOffset=function(e){this.__ropt.offset=e;this.__doLoadList()};m.__doGenRequestOpt=function(e){return e};m.__doLoadList=function(){this.__doBeforeListLoad();var e=this.__ropt.data;e.offset=this.__ropt.offset;var t=0==e.offset;e.total=t;this.__ropt.limit=t?this.__first:this.__limit;e.limit=this.__ropt.limit;this.__cache._$getList(this.__doGenRequestOpt(i._$merge({},this.__ropt)))};m.__cbListLoad=function(e){if(e.key==this.__ropt.key&&e.offset==this.__ropt.offset){this.__doBeforeListShow();var t=this.__cache._$getListInCache(e.key);if(!t||!t.length){if(!this._$cache()._$isLoaded(e.key))this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});else this.__doShowEmpty();return!0}var i=e.limit,n=e.offset;if(!this.__cache._$isFragmentFilled(e.key,n,i)){this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});return!0}if(!this.__doBeforeListRender(t,n,i)){this._$dispatchEvent("onbeforelistrender",{list:t,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(e.key)});if(this.__ikey){this.__iopt.xlist=t;this.__iopt.beg=n;this.__iopt.end=Math.min(t.length,n+i)-1;this.__iopt.act="list";var a=_._$get(this.__ikey,this.__iopt,this.__iext);this.__doShowListByJST(a)}else{this.__iopt.limit=i;this.__iopt.offset=n;var o=c._$getItemTemplate(t,this.__ikls,this.__iopt);this.__doShowListByItem(o)}this._$dispatchEvent("onafterlistrender",{list:t,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(e.key)})}}};m.__cbPullRefresh=function(e){if(this.__pulling){delete this.__pulling;this.__doBeforeListShow("onafterpullrefresh");this._$refresh()}};m.__doSyncPager=function(e,t){if(this.__pager){if((this.__popt||l).limit>0)t=Math.min(t,this.__popt.limit);var n=this.__pager._$getIndex(),a=this.__pager._$getTotal();if(n>t||t!=a){this.__pager._$recycle();delete this.__pager;this.__doChangePage({last:n,index:Math.min(e,t)});return!0}}else{this.__popt.index=e;this.__popt.total=t;this.__pager=this.__pkls._$allocate(this.__popt);this.__pager._$setEvent("onchange",this.__doChangePage._$bind(this));i._$forEach(this.__pbid,function(e){this.__pager._$bind(e)},this)}};m.__doFormatData=function(){var e=+new Date;return function(t){var i=t[this.__iopt.pkey];if(!i){
t["dirty-data"]=!0;t[this.__iopt.pkey]="dirty-"+e++}return t}}();m.__doSplitDirty=function(e){var t=e[this.__iopt.pkey];if(e["dirty-data"]){delete e["dirty-data"];delete e[this.__iopt.pkey]}return t};m.__doInsertOneItem=function(){var e=function(e,t){this.__lbox.insertAdjacentElement(e,t)};return function(t,n){var a=[n];if(this.__ikey){var a=this.__cache._$getListInCache(this.__ropt.key),o=i._$indexOf(a,n);if(o<0){o=0;a=[n]}this.__iopt.xlist=a;this.__iopt.beg=o;this.__iopt.end=o;this.__iopt.act="add";this.__doShowListByJST(_._$get(this.__ikey,this.__iopt,this.__iext),t)}else{this.__iopt.limit=1;this.__iopt.offset=0;this.__iopt.parent=e._$bind(this,t);var s=c._$getItemTemplate(a,this.__ikls,this.__iopt);this.__iopt.parent=this.__lbox;this.__doShowListByItem(s)}this._$dispatchEvent("onafterinsert",{pos:t})}}();m.__doBeforeListLoad=u;m.__doBeforeListShow=function(e){var t={parent:this.__lbox};this._$dispatchEvent(e||"onafterlistload",t);if(!t.stopped)a._$removeByEC(this.__ntip)};m.__doBeforeListRender=u;m.__doRenderMessage=function(e,t){if(i._$isString(e)){if(!this.__ntip)this.__ntip=a._$create("div");this.__ntip.innerHTML=e}else this.__ntip=e;this.__lbox.insertAdjacentElement(t||"beforeEnd",this.__ntip)};m.__doShowMessage=function(e,t,i){var n={parent:this.__lbox};if(e)this._$dispatchEvent(e,n);if(!n.stopped)this.__doRenderMessage(n.value||t,i)};m.__doShowEmpty=u;m.__doShowListByJST=u;m.__doShowListByItem=u;m.__onCheckAction=function(){var e=/^(?:delete|update)$/;return function(t){var i=n._$getElement(t,"d:action");if(i){var o=a._$dataset(i,"action");if(e.test(o)){var s=a._$dataset(i,"id");if(s){var r=this.__cache._$getItemInCache(s);if(r){n._$stop(t);this._$dispatchEvent("on"+o,{data:r,id:r[this.__iopt.pkey],body:a._$get(this.__getItemBodyId(s))})}}}}}}();m.__cbItemAdd=u;m.__doDeleteItem=function(e){var t=e.data||{},i={data:t,key:this.__ropt.key,id:t[this.__iopt.pkey]};this._$dispatchEvent("onbeforedelete",i);this.__cache._$deleteItem(i)};m.__cbItemDelete=u;m.__doUpdateItem=function(e){var t=e.data||{},i={data:t,key:this.__ropt.key};this._$dispatchEvent("onbeforeupdate",i);this.__cache._$updateItem(i)};m.__cbItemUpdate=function(e){this.__doCheckResult(e,"onafterupdate");if(!e.stopped){var t=e.data[this.__iopt.pkey];if(this.__items){var n=c._$getItemById(this.__getItemId(t));if(n)n._$refresh(e.data)}else{var o=this._$getItemBody(t);if(!o)return;var s=this.__cache._$getListInCache(e.key),r=i._$indexOf(s,e.data);if(r<0)return;this.__iopt.xlist=s;this.__iopt.beg=r;this.__iopt.end=r;this.__iopt.act="update";var d=_._$get(this.__ikey,this.__iopt,this.__iext);o.insertAdjacentHTML("afterEnd",d);a._$remove(o)}this._$dispatchEvent("onafterupdaterender",{data:e.data,parent:this.__lbox,node:this._$getItemBody(t)})}};m.__doCheckResult=function(e,t){var i=e.data;if(!i||null==i[this.__iopt.pkey]){this._$dispatchEvent("onerror",e);e.stopped=!0}if(!e.stopped)this._$dispatchEvent(t,e)};m.__cbAppendList=u;m.__cbUnshiftList=u;m.__cbListChange=function(e){if(e.key==this.__ropt.key)switch(e.action){case"add":this.__cbItemAdd(e);break;case"delete":this.__cbItemDelete(e);break;case"update":this.__cbItemUpdate(e);break;case"refresh":this._$refresh();break;case"unshift":this.__cbUnshiftList(e.offset,e.limit);break;case"append":this.__cbAppendList(e.offset,e.limit)}};m._$update=function(e){this.__doUpdateItem({data:e})};m._$delete=function(e){this.__doDeleteItem({data:e})};m._$add=function(e){this.__cache._$addItem({data:e,key:this.__ropt.key})};m._$cache=function(){return this.__cache};m._$unshift=function(e){this.__doInsertOneItem("afterBegin",this.__doFormatData(e));return this.__doSplitDirty(e)};m._$append=function(e){this.__doInsertOneItem("beforeEnd",this.__doFormatData(e));return this.__doSplitDirty(e)};m._$refresh=function(){this.__doClearListBox();this.__doRefreshByPager()};m._$refreshWithClear=function(){this.__cache._$clearListInCache(this.__ropt.key);this._$refresh()};m._$pullRefresh=function(){if(!this.__pulling){this.__pulling=!0;this.__doShowMessage("onbeforepullrefresh","列表刷新中...","afterBegin");this.__cache._$pullRefresh({key:this.__ropt.key,data:this.__ropt.data})}};m._$getTotal=function(){return this.__cache._$getTotal(this.__ropt.key)};m._$getPager=function(){return this.__pager};m._$items=function(){return this.__items};m._$getItemBody=function(e){if(this.__ikey)return a._$get(this.__getItemBodyId(e));else{var t=c._$getItemById(this.__getItemId(e));if(t)return t._$getBody()}};m._$isLoaded=function(){return this.__cache._$isLoaded(this.__ropt.key)};m._$showMessage=function(e){this.__doClearListBox();this.__doShowMessage(null,e)};m._$nextPage=function(){if(this.__pager){var e=this.__pager._$getIndex()+1,t=this.__pager._$getTotal();e=Math.max(1,Math.min(e,t));this._$pageTo(e);return e<t}};m._$prevPage=function(){if(this.__pager){var e=this.__pager._$getIndex()-1,t=this.__pager._$getTotal();e=Math.max(1,Math.min(e,t));this._$pageTo(e);return e<=1}};m._$pageTo=function(e){if(this.__pager){var t=this.__pager._$getTotal();e=Math.max(1,Math.min(e,t));this.__pager._$setIndex(e)}};if(!0)e.copy(e.P("nej.ut"),f);return f},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","e07efa5e0527df011899069cc0518940","1167fcc1c042015fa40350e32dcfd3f9","e4cc364ae94aa1c5f0562d86be81286e","3174a1d30233acba88fa4afe0e1bcf90","3da49e23d83c707316e52d7e8e62291a","38478d6bca8c12228ecd0a172bcaa43b");I$("534f28b3a0e1470b8992e7c9593712ec",function(e,t,i,n,a,o,s,r,_,c,d){var f;r._$$ListModuleWF=t._$klass();f=r._$$ListModuleWF._$extend(s._$$ListModule);f.__reset=function(e){this.__doResetMoreBtn(e.more);this.__sbody=n._$get(e.sbody);this.__doInitDomEvent([[this.__sbody,"scroll",this.__onCheckScroll._$bind(this)]]);var t=e.delta;if(null==t)t=30;this.__delta=Math.max(0,t);var i=parseInt(e.count)||0;this.__count=Math.max(0,i);var a=parseInt(e.number)||0;if(a>1&&a<=i)this.__number=a;this.__super(e)};f.__destroy=function(){this.__super();delete this.__nmore;delete this.__sbody;delete this.__endskr;delete this.__nexting};f.__getPageInfo=function(e,t){var i=this.__first+(this.__count-1)*this.__limit,n=this.__count*this.__limit;return this.__super(i,e,n,t)};f.__doResetMoreBtn=function(e){this.__nmore=n._$get(e);this.__doInitDomEvent([[this.__nmore,"click",this._$next._$bind(this)]])};f.__doCheckScroll=function(e){if(!this.__endskr&&e&&this.__lbox.clientHeight){if(!e.scrollHeight)e=n._$getPageBox();var t=n._$offset(this.__lbox,this.__sbody),i=t.y+this.__lbox.offsetHeight-e.scrollTop-e.clientHeight,a=e.scrollHeight<=e.clientHeight;if(i<=this.__delta||a&&!this.__endskr)window.setTimeout(this._$next._$bind(this),0)}};f.__onCheckScroll=function(e){if(!this.__endskr){var t=i._$getElement(e);if(!t)t=n._$getPageBox();this.__doCheckScroll(t)}};f.__doChangePage=function(e){this.__super(e);if(!e.stopped){this.__doClearListBox();var t=0;if(e.index>1)t=this.__first+((e.index-1)*this.__count-1)*this.__limit;this.__offset=t;this._$next()}};f.__doGenRequestOpt=function(e){if(this.__number){var t=e.offset>0?this.__limit:this.__first,i=t+this.__limit*(this.__number-1);this.__offset=e.offset+i;e.data.limit=i;e.limit=i;delete this.__number}return e};f.__cbListLoad=function(e){delete this.__nexting;if(!this.__super(e))this._$resize()};f.__cbListChange=function(e){if(!e.key||e.key==this.__ropt.key){switch(e.action){case"refresh":case"append":delete this.__nexting}this.__super(e)}};f.__doBeforeListLoad=function(){this.__doShowMessage("onbeforelistload","");n._$setStyle(this.__nmore,"display","none")};f.__doBeforeListRender=function(e,t,i){var a=e.length,o=e.loaded?t+i>=a:t+i>a;this.__offset=Math.min(this.__offset,a);n._$setStyle(this.__nmore,"display",o?"none":"");if(o)this.__endskr=!0;if(this.__count>0){var s=this.__getPageInfo(t,e.length);if(this.__doSyncPager(s.index,s.total))return!0;var r=this.__first-this.__limit,_=this.__count*this.__limit;this.__endskr=(t+i-r)%_==0||o;n._$setStyle(this.__nmore,"display",this.__endskr?"none":"");this.__doSwitchPagerShow(this.__endskr&&s.total>1?"":"none")}};f.__doShowEmpty=function(){this.__offset=0;this.__endskr=!0;this.__doShowMessage("onemptylist","没有列表数据！")};f.__doShowListByJST=function(e,t){this.__lbox.insertAdjacentHTML(t||"beforeEnd",e)};f.__doShowListByItem=function(e){this.__items=this.__items||[];if(a._$isArray(e))d.push.apply(this.__items,e);else this.__items.push(e)};f.__cbItemAdd=function(e){n._$removeByEC(this.__ntip);this.__doCheckResult(e,"onafteradd");var t=e.flag;if(!e.stopped&&t)if(!(this.__count>0)){this.__offset+=1;t==-1?this._$unshift(e.data):this._$append(e.data)}else this.__doRefreshByPager()};f.__cbItemDelete=function(e){this.__doCheckResult(e,"onafterdelete");if(!e.stopped)if(!(this.__count>0)){var t=e.data[this.__iopt.pkey];if(this.__items){var i=o._$getItemById(this.__getItemId(t)),s=a._$indexOf(this.__items,i);if(s>=0){this.__items.splice(s,1);this.__offset-=1}if(i)i._$recycle()}else{var r=this._$getItemBody(t);if(r)this.__offset-=1;n._$remove(r)}if(this.__offset<=0)this._$next()}else this.__doRefreshByPager()};f.__cbAppendList=function(e,t){if(e==this.__offset)if(this._$isLoaded()){this.__endskr=!1;this._$resize()}};f.__cbUnshiftList=function(e,t){if(0==e){var i=this.__cache._$getListInCache(this.__ropt.key);for(var n=t-1;n>=0;n--)this._$unshift(i[n])}};f._$resize=function(){var e=this.__sbody;if(e&&!this.__endskr)this.__doCheckScroll(this.__sbody)};f._$refresh=function(){delete this.__endskr;this.__super()};f._$next=function(){if(!this.__nexting){this.__nexting=!0;var e=this.__offset;this.__offset+=0==e?this.__first:this.__limit;this.__doChangeOffset(e)}};if(!0)e.copy(e.P("nej.ut"),r);return r},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","3da49e23d83c707316e52d7e8e62291a","5b4b9f1ba2817ebe79aea4230001be7e");I$("435c850043af10c6e8c8526a81ff065a",function(e,t,i,n,a){
var o=window.setting||{};n._$$Module=e._$klass();a=n._$$Module._$extend(t._$$EventTarget);a.__init=function(e){this.__super(e);this.__aktime=window.setInterval(this.__doUpdateACK._$bind(this),2e3)};a.__reset=function(e){this.__super(e)};a.__destroy=function(){window.clearInterval(this.__aktime);delete this.__aktime;this.__super()};a.__doUpdateACK=function(){var e=(o.appkey||"").toUpperCase();if(window.localStorage)localStorage.setItem("X-"+e+"-YSF-ACK",+new Date)}},"7c0d5856d6e99d0fb30abadfe6db5ad1","e4cc364ae94aa1c5f0562d86be81286e","6206d0548a6481839c5e3bd6a4aad7fb");I$("c3ed3bec246daa40518ead2cb9447150",function(e,t){var i=e._$uniqueID(),n=new RegExp("\\["+i+"\\](.+?)\\[\\/"+i+"\\]","gi"),a=new RegExp("((?:(http|https|rtsp):\\/\\/(?:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,64}(?:\\:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,25})?\\@)?)?(?:(([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9]){0,1}\\.)+[a-zA-Z]{2,63}|((25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9]))))(?:\\:\\d{1,5})?)(\\/(?:(?:[a-zA-Z0-9¡-퟿豈-﷏ﷰ-￯\\;\\/\\?\\:\\@\\&\\=\\#\\~\\-\\.\\+\\!\\*\\'\\(\\)\\,\\_])|(?:\\%[a-fA-F0-9]{2}))*)?(?:\\b|$)","gi");t._$encode=function(e){return(e||"").replace(a,function(e){return"["+i+"]"+e+"[/"+i+"]"})};t._$decode=function(e){RegExp.lastIndex=-1;return(e||"").replace(n,function(e,t){var i=t||"";if(i.indexOf("://")<0)i="http://"+i;return'<a target="_blank" href="'+i+'">'+t+"</a>"})};t._$complete=function(i){return t._$decode(e._$escape(t._$encode(i)))}},"2ad7178887dc8cdca6f726aa3bb0d129");I$("210b63601c0ec9348976328d56095f0a",function(e,t,i,n,a,o,s){var r;n._$$Media=t._$klass();r=n._$$Media._$extend(i._$$EventTarget);r.__reset=function(e){this.__state=0;this._$source(e.url);if(null!=e.volume)this._$volume(e.volume);this.__super(e)};r.__destroy=function(){this.__super();this._$stop()};r.__doPlay=o;r.__doPause=o;r.__doStop=o;r.__onStop=function(){this.__doStateChange(4);this.__doStateChange(0)};r.__doError=function(){this.__state=0};r.__setCurrentTime=o;r.__getCurrentTime=o;r.__setVolume=o;r.__getVolume=o;r.__doStateChange=function(e){if(e!=this.__state){this.__state=e;this._$dispatchEvent("onstatechange",{state:this.__state})}};r.__onVolumeChange=function(){this._$dispatchEvent("onvolumechange",{volume:this._$volume()})};r._$duration=o;r._$source=function(e){e=e||"";if(e){this._$stop();this.__source=e}};r._$play=function(){if(0==this.__state||3==this.__state)this.__doPlay()};r._$pause=function(){if(1==this.__state||2==this.__state)this.__doPause()};r._$stop=function(){if(0!=this.__state)this.__doStop()};r._$seek=function(e){if(null!=e)this.__setCurrentTime(e);return this.__getCurrentTime()};r._$volume=function(e){if(null!=e){var e=Math.max(0,Math.min(e,100));this.__setVolume(e/100)}return 100*this.__getVolume()};if(!0)e.copy(e.P("nej,ut"),n);return n},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","e4cc364ae94aa1c5f0562d86be81286e");I$("3c7823cae5dea59414cfd725085153dd",function(e,t,i,n,a,o,s){var r;n._$$MediaAudio=t._$klass();r=n._$$MediaAudio._$extend(i._$$Media);r.__reset=function(e){this.__audio=new Audio;this.__doInitDomEvent([[this.__audio,"loadstart",this.__onLoading._$bind(this)],[this.__audio,"timeupdate",this.__onPlaying._$bind(this)],[this.__audio,"pause",this.__onPause._$bind(this)],[this.__audio,"volumechange",this.__onVolumeChange._$bind(this)],[this.__audio,"ended",this.__onStop._$bind(this)],[this.__audio,"error",this.__onError._$bind(this)]]);this.__super(e)};r.__destroy=function(){this.__super();delete this.__audio};r.__doPlay=function(){if(this.__audio.src!=this.__source){this.__audio.src=this.__source;this.__source=this.__audio.src}this.__audio.play()};r.__doPause=function(){this.__audio.pause()};r.__doStop=function(){this.__stopped=!0;this.__doPause();if(3==this.__state)this.__onPause()};r.__onLoading=function(){if(!this.__audio.paused)this.__doStateChange(1)};r.__onPause=function(){var e=!this.__stopped?3:0;this.__stopped=!1;this.__doStateChange(e);if(0==e)this.__audio&&this.__audio.removeAttribute("src")};r.__onPlaying=function(){var e=this.__audio.duration;if(!this.__audio.paused&&!isNaN(e)){this.__doStateChange(2);this._$dispatchEvent("ontimeupdate",{duration:this.__audio.duration,current:this.__audio.currentTime})}};r.__onError=function(e){this.__doError();var t=this.__audio.error;this._$dispatchEvent("onerror",{code:t.code})};r.__setCurrentTime=function(e){if(1!=this.__state)this.__audio.currentTime=e||0};r.__getCurrentTime=function(){return this.__audio.currentTime};r.__setVolume=function(e){this.__audio.volume=e};r.__getVolume=function(){return this.__audio.volume};r._$duration=function(){return!this.__audio?0:this.__audio.duration};if(!0)e.copy(e.P("nej.ut"),n);return n},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","210b63601c0ec9348976328d56095f0a");I$("89b6b35b44ab51140ace1ce4d72bb77b",function(e,t,i,n,a){t.__getAudioInst=function(t){return e._$$MediaAudio._$allocate(t)};return t},"3c7823cae5dea59414cfd725085153dd");I$("89958f1930539b029cd479bab809533a",function(e,t,i,n,a,o,s,r,_){var c;o._$$MediaFlash=t._$klass();c=o._$$MediaFlash._$extend(a._$$Media);c.__init=function(){var e=function(e){this.__audio=e;if(this.__action){this.__action.call(this);delete this.__action}};return function(){this.__super();n._$flash({hidden:!0,src:i._$get("audio.swf"),onready:e._$bind(this),onended:this.__onStop._$bind(this),onpause:this.__onPause._$bind(this),onseeking:this.__onLoading._$bind(this),onprogress:this.__onLoading._$bind(this),ontimeupdate:this.__onPlaying._$bind(this),onvolumechange:this.__onVolumeChange._$bind(this),onerror:this.__onError._$bind(this)})}}();c.__destroy=function(){this.__super();delete this.__action};c.__doPlay=function(){if(this.__audio){if(this.__source){this.__audio.nej_setSrc(this.__source);delete this.__source}this.__audio.nej_play()}else this.__action=this.__doPlay};c.__doPause=function(){if(this.__audio)this.__audio.nej_pause();else this.__action=this.__doPause};c.__doStop=function(){if(this.__audio){this.__audio.nej_stop();this.__doStateChange(0)}else this.__action=this.__doStop};c.__onLoading=function(){this.__doStateChange(1)};c.__onPause=function(){this.__doStateChange(3)};c.__onPlaying=function(e){this.__doStateChange(2);this._$dispatchEvent("ontimeupdate",{duration:e.duration,current:e.currentTime});if(null!=this.__dtvol){var t=this.__dtvol;delete this.__dtvol;this.__setVolume(t)}};c.__onError=function(e){this.__doError();this._$dispatchEvent("onerror",{code:e.code})};c.__setCurrentTime=function(e){if(1!=this.__state)this.__audio.nej_seek(e||0)};c.__getCurrentTime=function(){return this.__audio.nej_flash_get_currentTime()};c.__setVolume=function(e){if(this.__audio)try{this.__audio.nej_flash_set_volume(e)}catch(t){this.__dtvol=e}else this.__dtvol=e};c.__getVolume=function(){if(this.__audio)return this.__audio.nej_flash_get_volume()};c._$duration=function(){return!this.__audio?0:this.__audio.nej_flash_get_duration()};if(!0)e.copy(e.P("nej.ut"),o);return o},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","1abf69011eed38414af6c85d334eac2c","dd0d1a1037c22ed9e0f6b9ee11e08255","210b63601c0ec9348976328d56095f0a");I$("453ee9d7e04b477aa2d4b6cc73e57391",function(e,t,i,n,a,o){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="4.0")I$("2c2d581d18b6f251e73eaade37022e35",function(e){t.__getAudioInst=function(t){return e._$$MediaFlash._$allocate(t)}},"89958f1930539b029cd479bab809533a");return t},"b5a2ea56adb918d7d443468b3a9b53d1","89b6b35b44ab51140ace1ce4d72bb77b");I$("0da1314733e282dceaf4eb2ef12df98d",function(e,t,i,n,a,o,s){n._$audio=function(e){return i.__getAudioInst(e)};n._$play=function(){var e={};var a=function(t,i,n,a){var s=e[t];if(s){var r=s.conf,_=r[i]||o,c=r.extra;if(a)delete e[t];n.data=c;_(n)}};var s=function(e,t){a(e,"onstatechange",{state:t},0==t)};var r=function(e,t){a(e,"onerror",{code:t},!0)};var _=function(e,t){a(e,"ontimeupdate",t)};var c=function(e,t){if(0==t.state)f(e);s(e,t.state)};var d=function(t){var n=e[t];if(n){n.audio=i.__getAudioInst({url:n.url,onerror:l._$bind(null,t),ontimeupdate:_._$bind(null,t),onstatechange:c._$bind(null,t)});n.audio._$play()}};var f=function(t){var i=e[t];if(i){if(i.audio)i.audio=i.audio._$recycle();if(i.timer)i.timer=window.clearTimeout(i.timer)}};var l=function(t,i){var n=e[t];if(n){f(t);var a=n.conf;if(a.retry>0){a.retry--;n.timer=window.setTimeout(d._$bind(null,t),a.interval||500)}else r(t,i.code)}};n._$stop=function(t){var i=e[t||"auto-audio"];if(i)i.audio._$stop()};return function(i,n){if(i){var a=t._$merge({},n),o=a.key||"auto-audio",r=e[o];if(r){f(o);s(o,0)}e[o]={url:i,conf:a};d(o)}}}();if(!0){var r=e.P("nej.e");r._$audio=n._$audio;r._$playBgSound=n._$play;r._$stopBgSound=n._$stop}return n},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129","453ee9d7e04b477aa2d4b6cc73e57391");I$("7f31a069b85883a87d9e7be65faf8ba9",function(e,t,i,n,a,o,s){s.CONFIG={nosHost:"nos.netease.com",cdnHost:"nosdn.127.net"};s._$extend=function(e,t,i){for(var n in t)if(i||void 0===e[n]||null===e[n])e[n]=t[n];return e};s._$now=function(){return new Date(+new Date+((setting||{}).delta||0))};s._$datetime=function(e){var t=new Date(e);var n=s._$now();if(t.getFullYear()===n.getFullYear()){if(t.getMonth()===n.getMonth()){var a=n.getDate()-t.getDate();if(1===a)return"昨天"+i._$format(t," HH:mm");else if(0===a)return i._$format(t," HH:mm");else return i._$format(t,"MM-dd HH:mm")}return i._$format(t,"MM-dd HH:mm")}return i._$format(t,"yyyy-MM-dd HH:mm")};s._$fileSizeFormat=function(e,t){t=t&&t.toUpperCase();switch(t){case"GB":return(e/Math.pow(1024,3)).toFixed(1);case"MB":return(e/Math.pow(1024,2)).toFixed(1);case"KB":return Math.round(e/1024);case"B":return e;default:if(e>=Math.pow(1024,3))return(e/Math.pow(1024,3)).toFixed(1)+" GB";else if(e>=Math.pow(1024,2))return(e/Math.pow(1024,2)).toFixed(1)+" MB";else if(e>=1024)return Math.round(e/1024)+" KB";else return e+" B";
}};s._$spliceSuffix=function(e){var t=e.split("."),i={bmp:"imgflag",png:"imgflag",jpg:"imgflag",jpeg:"imgflag",gif:"imgflag",exif:"imgflag",pdf:"pdf",txt:"doc",doc:"doc",docx:"doc",xls:"excel",xlsx:"excel",csv:"excel",zip:"zip",rar:"zip","7z":"zip",ppt:"ppt",pptx:"ppt",key:"key",mp3:"audio",wma:"audio",ape:"audio",flac:"audio",wav:"audio",aac:"audio",ogg:"audio",avi:"video",mov:"video",mkv:"video",rmvb:"video",wmv:"video","3gp":"video",flv:"video",mp4:"video",mpg:"video"},n=i[t[t.length-1].toLowerCase()];if(!n)return"unknown";else return n};s._$getListModuleConfig=function(t){var a=t||{},o=e._$html2node(n._$getTextTemplate("resource-status-empty")),s=e._$html2node(n._$getTextTemplate("resource-status-loading")),r=e._$html2node(n._$getTextTemplate("resource-status-error"));var _=function(t,i){var n=(e._$getByClassName(t,"j-flag")||[])[0];n.innerText=i||""};if(!i._$isFunction(a.onemptylist))a.onemptylist=function(e){e.value=o};else a.onemptylist=a.onemptylist._$aop(function(e){e.args[0].value=o});if(!i._$isFunction(a.onbeforelistload))a.onbeforelistload=function(e){e.value=s};else a.onbeforelistload=a.onbeforelistload._$aop(function(e){e.args[0].value=s});if(!i._$isFunction(a.onlistloaderror))a.onlistloaderror=function(e){_(r);e.value=r};else a.onlistloaderror=a.onlistloaderror._$aop(function(e){_(r);e.args[0].value=r});if(!i._$isFunction(a.onerror))a.onerror=function(e){_(r);this._$showMessage(r)};else{var c=a.onerror;a.onerror=function(e){c.call(this,e);if(!e.stopped){var t=e.content||"错误提示："+(e.data||e.code)+"，"+e.message;_(r,t);this._$showMessage(r)}}}return a};s._$delegate=function(n,a,o){t._$addEvent(a,"click",function(a){try{var s=t._$getElement(a,"d:action")}finally{if(!s)return;var r=e._$dataset(s,"action"),_=(o||{})[r];if(i._$isFunction(_)){t._$stopDefault(a);_.call(n||this,s,a)}}})};s._$delegateWithStopEvent=function(n,a,o){t._$addEvent(a,"click",function(a){try{var s=t._$getElement(a,"d:action")}finally{if(!s)return;var r=e._$dataset(s,"action"),_=(o||{})[r];if(i._$isFunction(_))_.call(n||this,s,a)}})};s._$copy=function(e){return JSON.parse(JSON.stringify(e))};s._$replaceRichAndUnescape=function(e){var t=/<img[^>]+>/g;e=e.replace(t,"[图片]");var n=/<\/?[^>]*>/g;e=e.replace(n,"");return i._$unescape(e)};s._$escapeWithoutSpace=function(){var e=/<br\/?>$/,t={r:/\<|\>|\&|\r|\n|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(n){n=i._$encode(t,n);return n.replace(e,"<br/><br/>")}}();s._$trim=function(e){e=e||"";return e.trim()};s._$avatorClip=function(e){if(!e)return"";e+="?imageView&type=png|imageView&thumbnail=76y76&axis=5";if(e.indexOf("://")>=0)return e;else return appConfig.path.sdk+e};s._$throttle=function(e,t){var t=t||0;var i,n;var a=0;var o;var s=function(){a=+new Date;o=null;e.apply(i,n);i=n=null};return function(){var e=+new Date;var r=t-(e-a);i=this;n=arguments;if(r<=0||r>t){clearTimeout(o);s()}else if(!o)o=setTimeout(s,r)}};s._$debounce=function(e,t){var i;return function(){clearTimeout(i);context=this;args=arguments;i=setTimeout(function(){e.apply(context,args)},t)}};s._$transNosToCdn=function(e,t){var i=s.CONFIG.nosHost+"/"+t,n=t+"."+s.CONFIG.cdnHost;return e.replace(i,n)};s._$getFirstAncestorByClass=function(t,i){if(t==document.body)return null;else{var n=t.parentNode;if(e._$hasClassName(n,i))return n;else return this._$getFirstAncestorByClass(n,i)}};s._$formatTrashWords=function(e){var t=e.trashWords;if(2==e.auditResult){var i=t.join(",");var n=0,a=15;for(var o=0,s=i.length;o<s;o++)if(n>a){i=i.slice(0,o)+"...";break}else if(","!=i[o])n++;return'消息包含违禁词"'+i+'"，发送失败'}else return"消息包含违禁信息，发送失败"}},"5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","0da1314733e282dceaf4eb2ef12df98d");I$("d64f649eed070094e05b6ae40a14317e",function(e,t,i,n,a){var o=1;var s=function(){var e=window.navigator.userAgent;if(/SE 2.X MetaSr 1.0/gi.test(e))return!0;else return!1};a._$permission=function(){var e=!1;return function(){if(!e){e=!0;if(window.Notification&&!s())Notification.requestPermission(function(e){o="denied"!==e})}}}();var r;var _=function(t){var i=e._$merge({category:"winfocus"},t);parent.postMessage("pkg:"+JSON.stringify(i),"*")};var c=function(e,i){var a=t._$get("notify-sound-url");if(a)n._$play(a.src,{key:"ysf-message-sound"});if(!window.Notification||o)if(window.Notification&&!s()){var _={id:i.id,notify:new Notification(e,i)};if(r){r.notify.close();r=void 0}r=_;_.notify.onclick=function(){window.focus();_.notify.close()};_.notify.onclose=function(){window.clearTimeout(_.timer)};_.timer=window.setTimeout(function(){_.notify.close()},2e4)}};a._$closeBySessionId=function(e){if((!e||e==r.id)&&r)r.notify.close()};a._$notifyMessage=function(){var t={image:function(e){return"[图片]"},audio:function(e){return"[音频]"},file:function(e){return"[文件] "+e.content.name},rich:function(e){return i._$replaceRichAndUnescape(e.content)},"qa-list":function(e){return e.label},bot:function(e){return"[查询消息]"}};return function(i,n){var o=window.setting||{},s=t[i.type],r=i.content||"",n="客服"+(n||"");if(e._$isFunction(s))r=s.call(this,i);if(1!=setting.dialogStyle){a._$permission();c(n+"说：",{body:r,tag:"ysf",icon:appConfig.path.kefu+"res/img/notification.png"})}else _({notify:n+"说:",body:r,tag:"ysf",icon:appConfig.path.kefu+"res/img/notification.png"})}}()},"2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","7f31a069b85883a87d9e7be65faf8ba9","0da1314733e282dceaf4eb2ef12df98d");I$("84d86c2d486b437b2fdbd0aaf8625f6f",function(e,t,i){i._$parse=function(t){var n=[],a=JSON.parse(t.answer_list||"null")||[],o=t.answer_label,s=t.evaluation;if(o||a.length>1)if(t.evaluation_content)n.push({list:a,type:"qa-list",origin:t.question,label:t.answer_label||"",evaluation:t.evaluation||0,evalcontent:t.evaluation_content,evaluation_reason:t.evaluation_reason||0,evaluation_guide:t.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"});else n.push({list:a,type:"qa-list",origin:t.question,label:t.answer_label||"",evaluation:t.evaluation||0,evaluation_reason:t.evaluation_reason||0,evaluation_guide:t.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"});else if(1==a.length)if(t.evaluation_content)n.push({type:"qa",content:(a[0]||{}).answer||"",evaluation:t.evaluation||0,evalcontent:t.evaluation_content,evaluation_reason:t.evaluation_reason||0,evaluation_guide:t.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"});else n.push({type:"qa",content:(a[0]||{}).answer||"",evaluation:t.evaluation||0,evaluation_reason:t.evaluation_reason||0,evaluation_guide:t.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"});if(1==t.operator_hint){var r=e._$uniqueID(),_=e._$uniqueID(),c=2==t.answer_flag||3==t.answer_flag?!0:!1;n.push({id:r,msgIdClient:_,type:"rich",action:"kefu",content:i._$action(r,t.operator_hint_desc||"",c)})}return n};i._$action=function(){var i=e._$uniqueID(),n=new RegExp("\\["+i+"(.+?)"+i+"\\]","gi"),a=/<a\s+href\s*=\s*('|")qiyu:\/\/action.qiyukf.com\?command=(.+?)\1\s*>(.+?)<\/a>/gi,o={applyHumanStaff:"kefu"};return function(s,r,_){var c={};r=(r||"").replace(a,function(t,n,a,r){var _=o[a];if(!_)return t;var d=e._$uniqueID();c[d]='<a href="#" data-id="'+s+'" data-name="'+_+'">'+r+"</a>";return"["+i+d+i+"]"});if(_)r=t._$decode(r);else r=t._$complete(r);return r.replace(n,function(e,t){return c[t]||e})}}()},"2ad7178887dc8cdca6f726aa3bb0d129","c3ed3bec246daa40518ead2cb9447150");I$("c0a456b030471faec92aa0d2ea80dffb",function(e,t){var i={};var n=0;t._$getCache=function(e){return i[e]};t._$setCache=function(e,t){i[e]=t};t._$parseTemplate=function(e){var i=t._$getTemplateType(e);switch(i){case"order_list":return t.__parseListTemplate(e);case"order_detail":return t.__parseDetailTemplate(e);case"order_logistic":return t.__parseFlowTemplate(e);case"order_status":return t.__parseStatusTemplate(e)}};t._$getTemplateType=function(e){var t=new DOMParser,i=t.parseFromString(e,"text/xml");return i.querySelector("template").getAttribute("id")};t.__parseListTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLinks();n.title=i.getTextVal(null,"label");n.status=100;if(!(a.length<1)){for(var o=0;o<a.length;o++){var s=a[o];if("block"==s.getAttribute("type"))n.content.list.push({target:s.getAttribute("target"),params:s.getAttribute("params"),image:i.getImageUrl(s),title:i.getTextVal(s,"p_name"),price:i.getTextVal(s,"p_price"),number:i.getTextVal(s,"p_count"),statusInfo:i.getTextVal(s,"p_status"),status:100})}t._$setCache("list",n);return n}else console.error("parse list template is error",a)};t.__parseDetailTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLayouts();if(!(a.length<2)){n.title=i.getTextVal(a[0],"label");n.status=400;for(var o=1;o<a.length;o++){var s=a[o];n.content.list.push({label:i.getTextVal(s,"label"),value:i.getTextVal(s,"value")})}t._$setCache("detail",n);return n}else console.error("parse detail template is error",a)};t.__parseFlowTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLayouts();if(!(a.length<2)){n.title=i.getTextVal(a[0],"label");n.status=300;for(var o=1;o<a.length;o++){var s=a[o];n.content.list.push({value:i.getTextVal(s,"logistic"),timestamp:i.getTextVal(s,"timestamp")})}t._$setCache("flow",n);return n}else console.error("parse detail template is error",a)};t.__parseStatusTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLinks();var o=i.getLayouts();if(!(o.length<3||a.length<1)){n.title=i.getTextVal(o[0],"label")+i.getTextVal(o[1],"label");n.status=200;for(var s=0;s<a.length;s++){var r=a[s];n.content.list.push({target:r.getAttribute("target"),params:r.getAttribute("params")||"",info:i.getTextVal(r,"valid_operation")})}t._$setCache("status",n);return n}else console.error("parse status template is error",o,a)};t.__botXmlParser=function(e){var t=new DOMParser;var i=t.parseFromString(e,"text/xml");return{getLayouts:function(){return i.querySelectorAll("LinearLayout")||[];
},getLinks:function(e){e=e||i;return e.querySelectorAll("link")},getTextVal:function(e,t){e=e||i;var n=e.querySelector("text[name="+t+"]");return n?n.textContent:""},getImageUrl:function(e){e=e||i;return e.querySelector("image").getAttribute("url")}}};t._$openSwitch=function(){n=1};t._$getSwitchStatus=function(){return n}},"2ad7178887dc8cdca6f726aa3bb0d129");I$("f2740bc33bd5da6f3d028a31025996af",function(e,t,i,n,a,o,s){var r;n._$$CacheListAbstract=t._$klass();r=n._$$CacheListAbstract._$extend(i._$$CacheList);r.__reset=function(e){this.__super(e);this._$batEvent({doloadlist:this.__doLoadList._$bind(this),doloaditem:this.__doLoadItem._$bind(this),doadditem:this.__doAddItem._$bind(this),dodeleteitem:this.__doDeleteItem._$bind(this),doupdateitem:this.__doUpdateItem._$bind(this),dopullrefresh:this.__doPullRefresh._$bind(this)})};r.__doLoadList=o;r.__doPullRefresh=o;r.__doLoadItem=o;r.__doAddItem=o;r.__doDeleteItem=o;r.__doUpdateItem=o;if(!0)e.P("nej.ut")._$$AbstractListCache=n._$$CacheListAbstract;return n},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","38478d6bca8c12228ecd0a172bcaa43b");I$("a56731a48228aeede7b0d66488032c48",function(){function e(e,t,s){var r,_;if(arguments.length<3)return i(e,t);else{if(w(t))_=a(e,t,s);else{r=typeof t;if("string"===r){if("function"==typeof e[t])_=n(e,t,s)}else if("function"===r)_=a(e,t(e),s);else _=o(e,t,s)}return _}}function t(e,t){var i,n,a;this.target=e;this.func=t;this.aspects={};i=this.orig=e[t];n=this;a=this.advised=function(){function e(e){var t=c(e);n._callSimpleAdvice("on",s,e);return t}function o(e,t){n._callSimpleAdvice(e,s,t)}var s,r,_,c,f;if(this instanceof a){s=S(i.prototype);c=function(e){return d(i,s,e)}}else{s=this;c=function(e){return i.apply(s,e)}}_=C.call(arguments);f="afterReturning";r=h({target:s,method:t,args:_});try{n._callSimpleAdvice("before",s,_);try{r.result=n._callAroundAdvice(s,t,_,e)}catch(l){r.result=r.exception=l;f="afterThrowing"}_=[r.result];o(f,_);o("after",_);if(r.exception)throw r.exception;return r.result}finally{m()}};E(a,"_advisor",{value:n,configurable:!0})}function i(e,t){var i,a;i=e.name||"_";a={};a[i]=e;n(a,i,t);return a[i]}function n(e,i,n){var a=t.get(e,i);return a&&a.add(n)}function a(e,t,i){var a,o,r,_;a=[];_=0;for(;r=t[_++];){o=n(e,r,i);o&&a.push(o)}return s(a)}function o(e,t,i){var a=[];for(var o in e)if("function"==typeof e[o]&&t.test(o))a.push(n(e,o,i));return s(a)}function s(e){return{remove:function(){for(var t=e.length-1;t>=0;--t)e[t].remove()}}}function r(t){return function(i,n,a){var o={};if(2===arguments.length){o[t]=n;return e(i,o)}else{o[t]=a;return e(i,n,o)}}}function _(e,t){var i,n,a;for(i in x){n=t[i];if(n){a=e[i];if(!a)e[i]=a=[];a.push({aspect:t,advice:n})}}}function c(e,t){var i,n,a;a=0;for(i in x){n=e[i];if(n){a+=n.length;for(var o=n.length-1;o>=0;--o)if(n[o].aspect===t){n.splice(o,1);--a;break}}}return a}function d(e,t,i){try{E(t,"constructor",{value:e,enumerable:!1})}catch(n){}e.apply(t,i);return t}function f(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i])}function l(e,t){for(var i=e.length-1;i>=0;--i)t(e[i])}function u(){return g}function h(e){v.push(g);return g=e}function m(){return g=v.pop()}function p(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){}}e.before=r("before");e.around=r("around");e.on=r("on");e.afterReturning=r("afterReturning");e.afterThrowing=r("afterThrowing");e.after=r("after");e.joinpoint=u;e.add=function(){return e.apply(null,arguments)};t.prototype={_callSimpleAdvice:function(e,t,i){var n,a;a=this.aspects[e];if(a){n=x[e];n(this.aspects[e],function(e){var n=e.advice;n&&n.apply(t,i)})}},_callAroundAdvice:function(e,t,i,n){function a(e,t){return e<0?n(t):o(r[e].advice,e,t)}function o(i,n,o){function s(){return d}function r(){return c(arguments.length>0?C.call(arguments):o)}function _(e){return c(e||o)}function c(e){d++;return a(n-1,e)}var d,f;d=0;f=h({target:e,method:t,args:o,proceed:r,proceedApply:_,proceedCount:s});try{return i.call(e,f)}finally{m()}}var s,r;r=this.aspects.around;s=r?r.length:0;return a(s-1,i)},add:function(e){var t,i;t=this;i=t.aspects;_(i,e);return{remove:function(){var n=c(i,e);if(!n)t.remove()}}},remove:function(){delete this.advised._advisor;this.target[this.func]=this.orig}};t.get=function(e,i){if(i in e){var n,a;a=e[i];if("function"!=typeof a)throw new Error("Advice can only be applied to functions: "+i);n=a._advisor;if(!n){n=new t(e,i);e[i]=n.advised}return n}};var g,v,b,$,y,x,C,w,E,S;v=[];b=Array.prototype;$=b.unshift;y=b.push;C=b.slice;w=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};E=p()?Object.defineProperty:function(e,t,i){e[t]=i.value};S=Object.create||function(){function e(){}return function(t){e.prototype=t;var i=new e;e.prototype=null;return i}}();x={before:l,around:!1};x.on=x.afterReturning=x.afterThrowing=x.after=f;return e});I$("a18d3aebbdbfdbd66028d87f4bc16716",function(e,t,i,n,a,o,s,r,_,c,d){d=e._$klass();c=d._$extend(n._$$EventTarget);var f={terminal:"WEB",project:"webapi",version:window.logSetting&&window.logSetting.version||"",type:"network",appkey:"",clientid:"",channel:"",attachment:"",platform:navigator.userAgent,extra:"",message:"",timestamp:"",sign:"",ver:""};var l={samplingRate:1,debugNums:Number(window.localStorage.getItem("debugNums"))||0};var u=[];var h=[];c.__init=function(e){this.__super(e);this.__initConfig();this.__initDebug()};c._$config=function(e){i._$merge(f,e)};c._$info=function(e,t){if(this.__checkSimple()){var i=500;var n=this.__handleInfoMsg("info",e,t);u.unshift(n);if(u.length>i)u.splice(u.length-1,1)}};c._$error=function(e,t,i){if(i||this.__checkSimple()){var n=this.__handleLogError("error",e,t);this.__sendLog(n,1)}};c._$debug=function(e){var e="[DEBUG] ["+i._$format(+new Date,"yyyy-MM-dd HH:mm:ss.ms")+"] "+e+"\n";h.unshift(e);if(h.length>=l.debugNums){var t=i._$merge({},f,{appkey:window.setting&&window.setting.appkey,clientid:window.setting&&window.setting.device,message:h.join("\n"),timestamp:+new Date,level:"DEBUG"});i._$merge(t,this.__createHash(t));this.__sendLog(t,1);h.length=0}};c._$batch=function(e,t,n){if(this.__checkSimple()){var a=this;var o=function(){var e=[].slice.call(arguments),t=null,n=e[0],o=e.slice(1);var s={};for(var r=0;r<o.length;r++){var t=o[r];if(i._$isObject(t))i._$merge(s,t);else s[r]=t}a._$info(n,s)};for(var s=0;s<t.length;s++)if("after"==n)r.after(e,t[s],o._$bind(this,t[s]));else r.before(e,t[s],o._$bind(this,t[s]))}};c._$getLogCache=function(){return u};c.__handleLogError=function(e,t,n){try{if(i._$isObject(n))n=JSON.stringify(n)}catch(n){}var a=+new Date;var o="["+e.toUpperCase()+"] ["+i._$format(a,"yyyy-MM-dd HH:mm:ss.ms")+"] "+t+": "+n+"\n";var s=i._$merge({},f,{appkey:window.setting&&window.setting.appkey,clientid:window.setting&&window.setting.device,message:o,timestamp:a,level:e});i._$merge(s,this.__createHash(s));u=[];return s};c.__handleInfoMsg=function(e,t,n){var a=[],o="",s=+new Date;n=n||{};for(var r in n)if(n.hasOwnProperty(r))a.push(r+":"+JSON.stringify(n[r]||""));var o="["+e.toUpperCase()+"] ["+i._$format(s,"yyyy-MM-dd HH:mm:ss.ms")+"] "+t+": "+a.join(";");return o};c.__sendLog=function(e,t){if(window.logSetting){var i=window.logSetting.serverAddr;for(var n in e)e[n]=encodeURIComponent(e[n]);s._$request(i+"/swallow/log",{type:"json",method:"POST",data:e,onload:this.__cbLoad._$bind(this),onerror:this.__cbError._$bind(this,e,t)})}};c.__createHash=function(e){var t=o._$md52hex("ysf"+e.terminal+e.version+e.type+e.appkey+e.timestamp+"qykf");return{sign:t,ver:1}};c.__cbLoad=function(e){};c.__cbError=function(e,t){var i=1e3*t,n=3;if(!(t>n)){clearTimeout(this.__timer);this.__timer=setTimeout(function(){this.__sendLog(e,t+1)}._$bind(this),i)}};c.__initDebug=function(){function e(e){var t=[];return"\n"+JSON.stringify(e,function(e,i){if("object"==typeof i&&null!==i){if(t.indexOf(i)!==-1)return;t.push(i)}return i})}function t(e){return e}function i(e){return Number(e)}var n={o:e,O:e,s:t,d:i,j:e};if(window.debug)if(l.debugNums){window.debug.log=this._$debug._$bind(this);window.debug.formatArgs=function(e){e[0]=this.namespace+" "+e[0]};window.debug.formatters=n}};c.__initConfig=function(){var e=this;var t=window.logSetting.serverAddr;s._$request(t+"/swallow/config",{type:"json",data:{t:"web",p:"sdk"},method:"GET",type:"json",onload:function(e){i._$merge(l,e)}})};c.__checkSimple=function(){var e=Math.floor(100*Math.random()),t=Math.floor(100*l.samplingRate);return e<t?!0:!1};var m=d._$allocate();window.onerror=function(){m._$error("jsloaderror",[].slice.call(arguments),!0)};return m},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","e4cc364ae94aa1c5f0562d86be81286e","73178fa1c529e77edd2d067795ed0e51","bcb1f11e87c301403d3b823c876c2457","ba59bcf74b0f62bae6020b0801aef10c","a56731a48228aeede7b0d66488032c48");I$("989bbee1afb3aebb023915e137d34996",function(e,t,i,n,a,o,s){var r={};o._$$Cache=e._$klass();s=o._$$Cache._$extend(n._$$CacheListAbstract);s.__doSendRequest=function(e,n){var o=r[e];if(o){if(t._$isFunction(o.filter))o.filter.call(this,n);var s=function(e){var i=!1,s=n.onerror||o.onerror||"onerror";a._$error("httpRequestError",t._$merge({url:o.url},n,e));if(t._$isFunction(s))i=s.call(this,e,n);if(!i&&t._$isString(s))this._$dispatchEvent(s,e,n)};var _=function(e){if(e&&0===(""+e.code).indexOf("2")){if(t._$isFunction(o.format))o.format.call(this,e,n);var i=n.onload||o.onload;if(t._$isFunction(i))i.call(this,e.result);else if(t._$isString(i))this._$dispatchEvent(i,e.result);if(t._$isFunction(o.finaly))o.finaly.call(this,n,e.result)}else s.call(this,e)};var c=t._$merge({},n,{cookie:!0,type:"json",method:o.method||"POST",onload:_._$bind(this),onerror:s._$bind(this)});if(o.domain)o.__url=o.domain+o.url;i._$request(o.__url||o.url,c)}else console.error("not found request config for "+e)};s._$hasItem=function(e){return!!this._$getItemInCache(e)};o._$config=function(e){t._$forIn(e,function(e,t){if("string"==typeof e)e={url:e};r[t]=e})};o._$do=function(e,i){if(t._$isFunction(i)){var n=e._$allocate(),a=i.call(null,n);
n._$recycle();return a}}},"7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","ba59bcf74b0f62bae6020b0801aef10c","f2740bc33bd5da6f3d028a31025996af","a18d3aebbdbfdbd66028d87f4bc16716");I$("372b1a055fdd33f0a64140da071c7cdb",function(e,t,i,n,a,o){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={},_={};for(var c=0,d=s.length,f;c<d;c++){f=s.charAt(c);r[c]=f;_[f]=c}var l=function(e){var t=0,i,n=[];for(;t<e.length;){i=e[t];if(i<128){n.push(String.fromCharCode(i));t++}else if(i>191&&i<224){n.push(String.fromCharCode((31&i)<<6|63&e[t+1]));t+=2}else{n.push(String.fromCharCode((15&i)<<12|(63&e[t+1])<<6|63&e[t+2]));t+=3}}return n.join("")};var u=function(){var e=/\r\n/g;return function(t){t=t.replace(e,"\n");var i=[],n=String.fromCharCode(237);if(n.charCodeAt(0)<0)for(var a=0,o=t.length,s;a<o;a++){s=t.charCodeAt(a);s>0?i.push(s):i.push(256+s>>6|192,256+s&63|128)}else for(var a=0,o=t.length,s;a<o;a++){s=t.charCodeAt(a);if(s<128)i.push(s);else if(s>127&&s<2048)i.push(s>>6|192,63&s|128);else i.push(s>>12|224,s>>6&63|128,63&s|128)}return i}}();var h=function(e){var t=0,i=[],n=e.length%3;if(1==n)e.push(0,0);if(2==n)e.push(0);for(;t<e.length;){i.push(r[e[t]>>2],r[(3&e[t])<<4|e[t+1]>>4],r[(15&e[t+1])<<2|e[t+2]>>6],r[63&e[t+2]]);t+=3}if(1==n)i[i.length-1]=i[i.length-2]="=";if(2==n)i[i.length-1]="=";return i.join("")};var m=function(){var e=/\n|\r|=/g;return function(t){var i=0,n=[];t=t.replace(e,"");for(var a=0,o=t.length;a<o;a+=4)n.push(_[t.charAt(a)]<<2|_[t.charAt(a+1)]>>4,(15&_[t.charAt(a+1)])<<4|_[t.charAt(a+2)]>>2,(3&_[t.charAt(a+2)])<<6|_[t.charAt(a+3)]);var s=n.length,r=t.length%4;if(2==r)n=n.slice(0,s-2);if(3==r)n=n.slice(0,s-1);return n}}();i._$b642str=function(e){return l(m(e))};i._$str2b64=function(e){try{return window.btoa(e)}catch(t){return h(u(e))}};if(!0)e.copy(e.P("nej.u"),i);return i},"c27e07105db4b2613e9811a6e5ceab90","2ad7178887dc8cdca6f726aa3bb0d129");I$("1af021d5c158865e7dd70e474d81c2ea",function(e,t,i,n,a,o,s,r,_,c,d,f,l,u,h,m){var p=window.setting||{};if(window.debug)var g=window.debug("visitorSession:push");var v;var b={client_input:{"switch":1,sendingRate:"1.5"}};var $=[];window.msgQueue=$;var y=function(e){for(var t=0;t<$.length;t++)if($[t]==e)return!0;return!1};var x=function(){var e=!1;e=window.screenTop<-3e4&&window.screenLeft<-3e4;return e};d._$config({"user-add":{domain:window.setting.getKefuDomain,url:"/webapi/user/create.action",format:function(e,t){var i=e.info;e.result={token:i.token,account:i.accid,exchange:i.exchange};g&&g("[cbUserCreate] data:%O",{params:t.data,storage:i.storage});this.__setRemoteStorage(i.storage,t.data.appkey)},onerror:function(e,t){var i="";c._$error("httpRequestError",n._$merge({url:"/webapi/user/create.action"},t,e));if(1002==e.code||1003==e.code||1001==e.code){switch(e.code){case 1001:i="企业Appkey不存在";break;case 1002:i="帐户不合法";break;case 1003:i="系统错误"}this._$dispatchEvent("onusererror",i)}else this.__cbCreateYXUser(t.data.appkey,null);return!0}},"user-push-add":{domain:window.setting.getKefuDomain,url:"/webapi/user/create.action",format:function(e){var t=e.info;e.result={token:t.token,account:t.accid,exchange:t.exchange}}},"user-evaluate":{url:"/webapi/user/evaluate.action",format:function(e){e.result={code:e.code,desc:e.desc}}}});var C={NULL:0,INIT:1,CONNECTED:2};m=e._$klass();u=m._$extend(d._$$Cache);u.__init=function(){this.__step=2;this.__count=0;this.__state=C.NULL;this.__nopt={db:!1,debug:window.MIN_DEBUG_MODE,syncTeams:!1,syncFriends:!1,syncRoamingMsgs:!1,syncTeamMembers:!1,syncRelations:!1,syncFilter:!0,lbsUrl:window.MIN_LBS,onmsg:this.__cbReceiveMessage._$bind(this),onofflinefiltermsgs:function(e){c._$info("onofflinefiltermsgs",{msgs:e});e.sort(function(e,t){return e.time-t.time});n._$forEach(e,function(e){this.__cbReceiveMessage(e,!0)},this)}._$bind(this),onofflinefiltercustomsysmsgs:function(e){c._$info("onofflinefiltermsgs",{msgs:e});e.sort(function(e,t){return e.time-t.time});n._$forEach(e,function(e){this.__onReceiveInstr(e,!0)},this)}._$bind(this),onerror:this.__onConnectError._$bind(this),onconnect:this.__cbConnect2Yunxin._$bind(this),ondisconnect:this.__onDisConnect._$bind(this),oncustomsysmsg:this.__onReceiveInstr._$bind(this)};this.__evalBox={};this.__sesTokenMap={};this.__floatingLayerMark=n._$uniqueID();this.__splitmsgCache={};this.__super()};u.__doResetTimeout=function(){this.__count=0;return this.__count};u.__getNextTimeout=function(){var e=1e3*(this.__step+this.__step*this.__count);this.__count++;return e};u.__getDeviceID=function(){return p.fid||p.device};u.__getUserInfo=function(){var e=this.__getDataInCache("yunxin-user");if(window.localStorage){var t="X-"+e.appKey.toUpperCase()+"-YSF-INFO",i=localStorage.getItem(t);if(!i)return;var a=n._$query2object(i);if(a.uid)e.fid=a.uid;a.source=i;return a}};u.__getForeignInfo=function(e){var t={email:"email",real_name:"name",mobile_phone:"mobile",avator:"avator"},i=JSON.parse(e.profile||"null")||[];n._$forEach(i,function(i){var n=t[i.key];if(n){delete t[i.key];i.value=i.value||e[n]||p[n]||""}});n._$loop(t,function(t,n){var a=e[t]||p[t];if(null!=a)i.unshift({key:n,value:a})});return i};u.__getMessageBody=function(e){return{time:e.time,id:e.idServer,sid:this._$getSessionID(),msgIdClient:e.idClient,from:this._$getKefu(),to:{id:e.to}}};u.__onConnectError=function(){var e={302:function(){this._$dispatchEvent("onusererror")}};return function(t){var i=e[t.code];if(n._$isFunction(i))i.call(this);else if(n._$isString(i))e[i].call(this);c._$error("onConnectError",t)}}();u.__doCreateYXUser=function(e){var t=this.__getDataInCache("yunxin-user");this.__offlineAckTimer=setInterval(function(){this.__setAckDvc(e);this.__setAckTime(e)}._$bind(this),2e3);if(!t){var t={deviceid:this.__getDeviceID(e),appkey:e||"",token:p.uuid||""};if(p.bid&&p.bid!=-1)t.bid=p.bid;this.__doSendRequest("user-add",{data:t,onload:this.__cbCreateYXUser._$bind(this,e)})}else this.__cbCreateYXUser(e,t)};u.__cbCreateYXUser=function(e,t){if(t){n._$merge(window.logSetting,{token:t.token,account:t.account});this.__setDataInCache("yunxin-user",t);this.__setDataInCache("corp-appkey",e);this.__doResetTimeout();t.appKey=e;t.exchange=t.exchange||[-1];t=n._$merge({},t,this.__nopt);window.nim=this.__nim=new NIM(t)}else window.setTimeout(this.__doCreateYXUser._$bind(this,e),this.__getNextTimeout())};u.__cbConnect2Yunxin=function(e){c._$info("__cbConnect2Yunxin",e);n._$merge(e,{staffid:p.staffid||0,groupid:p.groupid||0,qtype:p.qtype||0,robotShuntSwitch:p.robotShuntSwitch||0,robotId:p.robotId});var t=this.__getDataInCache("yunxin-user"),i=this.__getUserInfo()||{},a=t.exchange[0];t.ip=t.ip||e.ip||"";if(this.__ktimer)window.clearTimeout(this.__ktimer);this.__ktimer=window.setTimeout(this.__doCheckKefuFail._$bind(this),15e3);var o=this.__tmpOnly2kefu;delete this.__tmpOnly2kefu;if(o)e.type=1;var s=n._$query2object(location.search.substr(1));var r;if(s.t)try{r=decodeURIComponent(s.t)}catch(_){r=s.t}this.__nim.sendCustomSysMsg({to:a,cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:1,deviceid:i.fid||this.__getDeviceID(),exchange:a,foreignid:i.fid||p.fid||"",msgToken:this._$getSeqOfHistoryLoad(),fromTitle:i.title||r||"未知页面名称",fromPage:i.referrer||document.referrer,fromType:"WEB",fromIp:t.ip,fromSubType:[navigator.platform||"",navigator.userAgent||""].join(" - "),version:"7",stafftype:e.type||0,staffid:e.staffid||0,groupid:e.groupid||0,entryid:e.entryid||0,level:i.level||0,qtype:e.qtype||0,authToken:i.authToken||0,robotShuntSwitch:e.robotShuntSwitch||0,landPage:i.landPage||"",landPageTitle:i.landPageTitle||"",landPageReferrer:i.landPageReferrer||"",sessionInfo:i.sessionInfo,templateId:p.templateId||0,robotId:e.robotId||0}),done:function(t,i){if(t){window.setTimeout(this.__cbConnect2Yunxin._$bind(this,e),this.__getNextTimeout());c._$error("cbConnect2Yunxin",n._$merge({cmd:1},t))}}._$bind(this)})};u.__doCheckKefuFail=function(){if(!this.__isShuntFlow)this.__cbAllocateKefu({code:-1},{time:+new Date})};u.__cbAllocateKefu=function(){var e=function(e,t){var i=this._$getAppkey();if(e)clearTimeout(e);return setInterval(function(){try{var e=JSON.parse(localStorage.getItem(("YSF-SATISFY-"+i+"-"+t).toUpperCase())||"{}");if(!y(t)&&e.name){$.push(t);this._$dispatchEvent("onevalresult",{content:e.name});this._$dispatchEvent("onevalresultmsg",{content:e.name,sid:e.sid})}}catch(n){console.error("time:",+new Date)}}._$bind(this),2e3)};var t={200:function(t,i){this.__satifyTimer=e.call(this,this.__satifyTimer,this.__sessionId);this.__sesTokenMap[t.sessionid]=t.session_token;if(this.__sessionId==t.sessionid)this._$dispatchEvent("onsamesession",t);this.__sessionId=t.sessionid;if(1==t.stafftype)t.iconurl=t.iconurl||"";else t.iconurl=t.iconurl||p.portrait||"";if(~t.iconurl.indexOf("nos.netease.com")||~t.iconurl.indexOf("nosdn.127.net"))t.iconurl+="?imageView&type=png|imageView&thumbnail=76y76&axis=5";this.__doClearQueueCheck();this.__setDataInCache("yunxin-kefu",t);this.__setDataInCache("evaluation",n._$merge(JSON.parse(t.evaluation||"{}"),{id:n._$uniqueID(),sid:this.__sessionId}));this.__state=C.CONNECTED;this._$dispatchEvent("onconnect",{time:i.time,id:t.staffid,sid:t.sessionid,nickname:t.staffname,isRobot:1==t.stafftype,groupname:t.groupname,hasKefuEntry:1==t.operator_enable,hasEvaluated:0==t.evaluation_enable,welcome:t.message||""});this.__botQuickEntry(t.stafftype,t.bot);if(this.__xtimer)window.clearInterval(this.__xtimer);this.__xtimer=window.setInterval(this.__doCheckUserChange._$bind(this),500);b["client_input"]={"switch":1,sendingRate:"1.5"};this._$dispatchEvent("onconfig",{type:"client_input",config:b["client_input"]})},201:function(e,t){this.__doClearQueueCheck();this.__state=C.CONNECTED;this._$dispatchEvent("onnokefu",e)},205:function(e,t){this._$dispatchEvent("onnokefunoleave",e)},203:function(e,t){this.__sessionId=e.sessionid;if(e.robotSessionId)this.__robotSessionId=e.robotSessionId;this.__setDataInCache("yunxin-kefu",e);this.__doClearQueueCheck();this.__qtimer=window.setInterval(this.__doCheckQueue._$bind(this),1e4);this._$dispatchEvent("onqueuestart",e);
},x:function(e,t,i){this.__doClearQueueCheck();this.__state=C.NULL;this._$dispatchEvent(i,e);this.__nim.disconnect()}};return function(e,i){c._$info("__cbAllocateKefu",{data:e,msg:i});if(this.__ktimer)this.__ktimer=window.clearTimeout(this.__ktimer);var a=t[e.code];if(n._$isFunction(a))a.call(this,e,i);else t.x.call(this,e,i,"onkefuerror")}}();u.__doCheckQueue=function(){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:e.exchange[0],content:JSON.stringify({cmd:16,deviceid:this.__getDeviceID()}),done:function(e,t){if(e)c._$error("doCheckQueue",n._$merge({cmd:16},e))}})};u.__doClearQueueCheck=function(){if(this.__qtimer)this.__qtimer=window.clearInterval(this.__qtimer)};u._$quitQueue=function(e){this.__doClearQueueCheck();var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:t.exchange[0],content:JSON.stringify({cmd:26,sessionid:e}),done:function(e,t){if(e)c._$error("quitQueue",n._$merge({cmd:26},e))}})};u.__onReceiveInstr=function(){var e=function(e,t){var i={image:"file",audio:"file",video:"file",file:"file"};var t={type:e.type,time:t.time,msgIdClient:this._$getSessionID()+"#"+t.idClient,fromUser:t.fromUser,from:{id:-72},id:t.idServer,sid:t.isOffline?-100:this._$getSessionID(),to:{id:t.to}};return n._$merge(t,{content:i[e.type]?e.attach:e.attach.msg})};var t={"-1000":function(e,t){var i=1==e.fromtype?!0:!1;delete e.fromtype;var a=this.__getDataInCache("yunxin-kefu")||{};if(1!=a.stafftype&&e.sessionid==a.sessionid)this.__nim.sendCustomSysMsg({cc:i,filter:!0,to:t.from,scene:"p2p",content:JSON.stringify(e),done:function(e,t){if(e)c._$error("recieveInstr",n._$merge({cmd:1e3},e))}})},2:function(e,t){if(0==v){v=1;this._$dispatchEvent("onshuntstatus",e)}this.__cbAllocateKefu(e,t)},90:function(e,t){if(e.entries){this.__isShuntFlow=!0;var i=JSON.parse(e.entries),a=this.__getDataInCache("yunxin-kefu");this._$dispatchEvent("onshunt");this._$dispatchEvent("shuntentries",{entries:i,from:n._$merge(this._$getKefu(),{portrait:e.iconurl}),label:e.message})}},6:function(e,t){if(e.sessionid==this.__sessionId){var i=this.__evalBox[e.sessionid];var n={closeReason:e["close_reason"],evaluate:e.evaluate,message:e["message"]};if(1==e.evaluate&&!i){if(1!=e.keep_connection)this.__doDisConnect(n);else{this._$keepConnection=1;this.__doDelDisConnect(n)}this._$dispatchEvent("oneval",{autoPopup:e["evaluation_auto_popup"],messageInvite:this._$getEvaluation().messageInvite})}else if(1!=e.keep_connection)this.__doDisConnect(n);else{this._$keepConnection=1;this.__doDelDisConnect(n)}}},50:function(e,t){this._$dispatchEvent("oneval",{autoPopup:e["evaluation_auto_popup"],messageInvite:e.message})},15:function(e,t){if(200!=e.code){if(302==e.code||303==e.code)this._$dispatchEvent("onqueuefail",e);this.__doClearQueueCheck()}else this._$dispatchEvent("onqueuechange",{showNum:e.showNum,before:e.before,inqueueNotify:e.inqueueNotify})},17:function(e,t){},60:function(e,t){var i=_._$parse(e);n._$forEach(i,function(e){var i=this.__getMessageBody(t);i.id=i.msgIdClient;this._$dispatchEvent("onmessage",n._$merge(i,e))},this)},70:function(e,t){this._$dispatchEvent("onovertime",{msg:e.message,time:e.timestamp})},95:function(e,t){this._$setSessionID(e.sessionid);this.__sesTokenMap[e.sessionid]=e.session_token;this.__sessionId=e.sessionid;this.__updateKefuName(e.staffname);this._$dispatchEvent("ontransferresult",{sessionId:e.sessionid,staffId:e.staffid,staffName:e.staffname||"",welcome:e.message||""})},72:function(t,i){var a={question:function(t,i){if(!y(i.idClient)){t.type="text";this._$dispatchEvent("onmessage",e.call(this,t,i))}},robot:function(e,t){var i={id:e.attach.msgidClient,evaluation:e.attach.evaluation};if(e.attach.evaluation_content)i.evalcontent=e.attach.evaluation_content;if(!e.attach.floating_layer_mark||e.attach.floating_layer_mark!=this.__floatingLayerMark)this._$dispatchEvent("onrobotanswerevalresult",i)}};n._$merge(i,{fromUser:1});if(a[t.type])a[t.type].call(this,t,i);else this._$dispatchEvent("onmessage",e.call(this,t,i))},134:function(e,t){var i={type:"push-msg",msgType:t.type,msgSessionId:t.ext.msgSessionId,content:t.text,from:this._$getKefu(),id:t.idServer,msgIdClient:t.idClient};var a=1,o=1;if(!this._$chatNoKefu){if(!document.hidden&&!x()&&1==this.__sdkWindowStatus){this._$sendPushMsgStatus(2,[i.msgSessionId]);o=0}if(1==this._$hasList){this._$dispatchEvent("onmessage",i);a=0}this._$dispatchEvent("onpushmessage",n._$merge(i,{append:a,sdkAppend:o}))}},203:function(e,t){var i=this.__getMessageBody(t);this._$dispatchEvent("receivethirdorder",n._$merge(i,{content:e}))},104:function(e){var t=this.__getDataInCache("yunxin-user");if(e.fromIp==t.ip)this._$dispatchEvent("oncansendfile",{timestamp:e.timestamp,result:e.result})},205:function(e){var t=e.template.id;if("order_list"==t||"card_layout"==t)this._$dispatchEvent("onmorebotlist",null,e);else if("pair"==t)this._$dispatchEvent("onmorebotdetail",null,e)},41:function(e){var t=e.message;if(0==e.result){this._$dispatchEvent("onusererror",t);if(this.__ktimer)this.__ktimer=window.clearTimeout(this.__ktimer)}},65:function(e,t){var t={type:"rich",time:t.time,msgIdClient:t.idClient,fromUser:t.fromUser,from:this._$getKefu(),id:t.idServer,sid:t.isOffline?-100:this._$getSessionID(),to:{id:t.to},content:e.content};this._$dispatchEvent("onmessage",t)},57:function(e,t){b[e.type]=e.config;this._$dispatchEvent("onconfig",e)},42:function(e,t){this._$dispatchEvent("onmsgtrashed",e)},405:function(e,t){var i=e.split_index;var a=e.split_id;var o=e.split_content||"";var s=e.msg_id||"";if(!this.__splitmsgCache[a])this.__splitmsgCache[a]={};this.__splitmsgCache[a][i]=o;if(e.split_count==n._$objectSize(this.__splitmsgCache[a])){var r="";for(var _=0;_<e.split_count;_++){var c=this.__splitmsgCache[a][_]?this.__splitmsgCache[a][_]:"";r+=c}var d=t;d.content=f._$b642str(r);d.idClient=s;this.__onReceiveInstr(d);delete this.__splitmsgCache[a]}},87:function(e,t){if(e.auditResult)var i={trashWords:e.trashWords};this._$dispatchEvent("onleavesend",{error:i})}};t["17"]=t["6"];return function(e,i,a){c._$info("__onReceiveInstr",{msg:e,cmd:a});var o=e.content||"";try{o=JSON.parse(o);if(i&&!i[o.cmd]&&!a)return}catch(s){}var r=t[o.cmd||a];if(n._$isFunction(r))r.call(this,o,e)}}();u.__cbReceiveMessage=function(){var e={image:"file",audio:"file",video:"file"};var t={60:!0,90:!0,95:!0,72:!0,203:!0,205:!0,65:!0};var i={2:134};return function(a,o){g&&g("[recieveMessage] msg:%O",a);if("custom"!=a.type)if(!/##/gi.test(a.idClient)){c._$info("recievemessage",a);g&&g("[dispatch message]");this._$dispatchEvent("onmessage",{type:a.type,time:a.time,id:a.idServer,sid:o?-100:this._$getSessionID(),content:a[e[a.type]||a.type],from:o?{id:-100}:this._$getKefu(),to:{id:a.to},msgIdClient:a.idClient})}else{var s=a.idClient.split("##"),r=s[0],_=s[1];n._$merge(a,{ext:{type:_,msgSessionId:r}});this.__onReceiveInstr(a,t,i[a.ext.type])}else{a.isOffline=o;this.__onReceiveInstr(a,t)}}}();u.__doDisConnect=function(e){this.__state=C.NULL;var t=n._$merge({time:+new Date},e);this.__delDataInCache("yunxin-kefu");this._$dispatchEvent("onfinish",t);this.__nim.disconnect()};u.__doDelDisConnect=function(e){this.__state=C.NULL;var t=n._$merge({time:+new Date},e);this.__delDataInCache("yunxin-kefu");this._$dispatchEvent("onfinish",t)};u.__onDisConnect=function(e){c._$error("__onDisConnect",e);this.__doClearQueueCheck();this.__delDataInCache("yunxin-kefu");if(this.__xtimer)this.__xtimer=window.clearInterval(this.__xtimer);if(this.__offlineAckTimer)this.__offlineAckTimer=window.clearInterval(this.__offlineAckTimer);if(this.__state!==C.NULL){this.__state=C.NULL;if(e.kicked)this._$dispatchEvent("onkickout");else this._$dispatchEvent("ondisconnect")}};u.__doCheckUserChange=function(){var e=this.__getUserInfo(),t=this;if(e)if(this.__last!=e.source){this.__last=e.source;var i=this.__getDataInCache("yunxin-user"),a=i.exchange[0];this.__nim.sendCustomSysMsg({to:a,cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:52,foreignid:e.uid,userinfo:JSON.stringify(this.__getForeignInfo(e)),authToken:e.authToken||0}),done:function(e,t){if(e)c._$error("doCheckUserChange",n._$merge({cmd:52},e))}});g&&g("[reportCrm] content:%O",{cmd:52,foreignid:e.uid,userinfo:this.__getForeignInfo(e),authToken:e.authToken||0})}};u.__setRemoteStorage=function(e,i){var a={userInfo:function(){var a=t._$text2type(e.userInfo,"json");a=n._$object2query(a);var o="X-"+i.toUpperCase()+"-YSF-INFO";window.localStorage.setItem(o,a)},orderInfo:function(){var a=t._$text2type(e.orderInfo,"json");a=n._$object2query(a);var o="X-"+i.toUpperCase()+"-YSF-PRODUCT";window.localStorage.setItem(o,a)},analyticInfo:function(){var a=t._$text2type(e.analyticInfo,"json");a=n._$object2query(a);var o="X-"+i.toUpperCase()+"-YSF-WEBANALYTICS";window.localStorage.setItem(o,a)}};if(e)n._$loop(e,function(e,t){var i=a[t];if(i&&n._$isFunction(i))i.apply(this)}._$bind(this))};u._$getVisitor=function(){var e=this.__getDataInCache("yunxin-user");return{id:e.account}};u._$getAppkey=function(){return p.appkey||this.__getDataInCache("corp-appkey")};u._$getKefu=function(){var e=this.__getDataInCache("yunxin-kefu");if(!e)return{};else return{id:e.staffid,portrait:e.iconurl,nickname:e.staffname}};u._$getEvaluation=function(){return this.__getDataInCache("evaluation")||{}};u._$getSessionID=function(){return this.__sessionId||(this.__getDataInCache("yunxin-kefu")||{}).sessionid};u._$getRobotSessionID=function(){return this.__robotSessionId||""};u._$setSessionID=function(e){(this.__getDataInCache("yunxin-kefu")||{}).sessionid=e};u.__updateKefuName=function(e){(this.__getDataInCache("yunxin-kefu")||{}).staffname=e};u._$isRobot=function(){var e=this.__getDataInCache("yunxin-kefu")||{};return 1==e.stafftype||1==e.robotInQueue};u._$connect=function(e,t,i){if(window.nim){window.nim.disconnect();delete window.nim}if(e.appkey||e.token){if(this.__state===C.NULL){this.__state=C.INIT;this.__doResetTimeout();e=e||{};this.__tmpOnly2kefu=t;if(i)this._$dispatchEvent("reconnect");
if(!e.token)this.__doCreateYXUser(e.appkey);else this.__cbCreateYXUser(e.appkey,e)}}else this._$dispatchEvent("onusererror")};u._$pushMsgConnect=function(e,t,i){if(window.nim){window.nim.disconnect();delete window.nim}this.__doSendRequest("user-push-add",{data:{deviceid:this.__getDeviceID(),appkey:e||""},onload:function(a){a.appKey=e;a.exchange=a.exchange||[-1];a=n._$merge({},a,this.__nopt,{onerror:function(){},onconnect:function(){this._$sendPushMsg(t,i)}._$bind(this),ondisconnect:function(){},oncustomsysmsg:function(){}});window.nim=this.__nim=new NIM(a)}._$bind(this)})};u._$isInQueue=function(){return!!this.__qtimer};u._$canSendMessage=function(){return this._$isInQueue()||this.__state===C.CONNECTED};u._$isDelay=function(){return!!this.__delay};u._$sendMessage=function(){var e=function(e){var t={c:e.content.file,m:"sendFile"};var i=e.content.file;if(n._$isString(i))if(0===i.indexOf("data:image"))t.r="dataURL";else{t.r="file";t.c={url:i,size:1,md5:i,ext:"png",w:1,h:1}}else if("INPUT"===i.tagName)t.r="fileInput";else if(i.md5)t.r="file";else t.r="blob";return t};var t=function(e){var t={"crm-thirdorder":202};n._$merge(e.content,{cmd:t[e.type]});var i={m:"sendCustomMsg",r:"content",c:JSON.stringify(e.content)};return i};var i={image:e,audio:e,video:e,file:e,geo:{m:"sendGeo",r:"geo"},text:{m:"sendText",r:"text"},"crm-thirdorder":t};return function(e){if(this._$canSendMessage()){var t=i[e.type];if(n._$isFunction(t))t=t.call(this,e);if(t){var a=this.__getDataInCache("yunxin-user"),o=n._$merge({cc:!0,filter:!0,scene:"p2p",to:a.exchange[0]},e);o[t.r]=t.c||o.content;if("content"!=t.r)delete o.content;c._$info("_$sendMessage",o);return this.__nim[t.m](o)}else(e.done||h)({code:-2,message:"消息类型不支持"})}else(e.done||h)({code:-1,message:"长连接未建立"})}}();u._$updateEvaluate=function(e,t,i,n,a){e=parseInt(e,10);var o=this.__sesTokenMap[e];if(o){this.__evalBox[e]=!0;$.push(e);this.__doSendRequest("user-evaluate",{data:{appkey:this._$getAppkey(),sessionid:e,session_token:o,evaluation:t,fromtype:"web",remarks:encodeURIComponent(i),tagList:encodeURIComponent(JSON.stringify(n))},onload:function(){var n={sid:e,value:t,name:a,remarks:i};if(window.localStorage)window.localStorage.setItem(("YSF-SATISFY-"+this._$getAppkey()+"-"+e).toUpperCase(),JSON.stringify(n))},onerror:function(){c._$error("_$updateEvaluate",{sid:e,value:t,remarks:i,tagList:n});window.setTimeout(this._$updateEvaluate._$bind(this,e,t,i,n,a),1e4)}._$bind(this)})}};u._$syncRobot=function(e){if(this._$canSendMessage()){var t=this.__getDataInCache("yunxin-user"),i=this.__getDataInCache("yunxin-kefu"),a=n._$merge({cmd:61},e);this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify(a),done:function(t){if(t){window.setTimeout(this._$syncRobot._$bind(this,e),1e4);c._$error("syncRobot",n._$merge({cmd:61},t))}}._$bind(this)})}};u._$syncRobotEx=function(e){var t={matched_question:"question",id:"questionid"};var i=function(e){var i={};for(var n in e)if(t[n])i[t[n]]=e[n];else i[n]=e[n];return i};if(this._$canSendMessage()){var a=this.__getDataInCache("yunxin-user"),o=this.__getDataInCache("yunxin-kefu"),s=n._$uniqueID(),r=n._$merge({cmd:63},i(e),{msgIdClient:s});this.__nim.sendCustomSysMsg({to:a.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify(r),done:function(t,i){if(!t)$.push(s);else{window.setTimeout(this._$syncRobotEx._$bind(this,e),1e4);c._$error("syncRobotEx",n._$merge({cmd:63},t))}}._$bind(this)})}};u._$action=function(){var e={kefu:function(e){if(this._$isRobot())this.__cbConnect2Yunxin({type:1})}};return function(t,i){var a=e[t];if(n._$isFunction(a)){c._$info("_$action",{action:t,data:i});a.call(this,i)}}}();u._$sendOfflineMessage=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:t.exchange[0],content:JSON.stringify({cmd:83,message:e.message||"",mobile:e.mobile||"",email:e.email||"",customFields:JSON.stringify(e.customFields||[])}),done:function(e){if(e){c._$error("_$sendOfflineMessage",e);this._$dispatchEvent("onleavesend",{error:e})}}._$bind(this)})};u._$sendSelectShunt=function(e){var t={type:1};n._$merge(t,e);v=0;this.__cbConnect2Yunxin(t)};u._$sendKefuHeart=function(e){var t=this,i=window.globalSetting.heartbeatCycle||8e3;var n=this.__getDataInCache("yunxin-user");var a=function(){if(e)t.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:n.exchange[0],scene:"p2p",content:JSON.stringify({cmd:-1e3,sessionid:e}),done:function(e,n){if(t.__timeout)clearTimeout(t.__timeout);t.__timeout=setTimeout(function(){a()},i)}})};a()};u.__sender3rdProductsInfo=function(e){var t=this.__getDataInCache("yunxin-user"),i=this,a=i.__getProductInfo();var o=function(){i.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:t.exchange[0],scene:"p2p",content:JSON.stringify(n._$merge({cmd:121},a)),done:function(t,o){if(!t)e(n._$merge({id:n._$uniqueID(),type:"productinfo"},a));else{i._$dispatchEvent("onproducterror",{type:"product-error",content:"商品链接参数错误"});c._$error("sender3rdProductsInfo",n._$merge({cmd:121},t))}}})};if(a)o()};u.__getProductInfo=function(){if(window.localStorage){var e=this.__getDataInCache("yunxin-user");var t="X-"+e.appKey.toUpperCase()+"-YSF-PRODUCT",i=localStorage.getItem(t);return null==i?null:n._$query2object(i)}};u.__setAckDvc=function(e){if(window.localStorage){var t="YSF-"+e.toUpperCase()+"-DVCTIME";window.localStorage.setItem(t,+new Date)}};u.__setAckTime=function(e){if(window.localStorage){var t="YSF-"+e+"-MSGTIME";if(!document.hidden&&!x()&&1==this.__sdkWindowStatus)window.localStorage.setItem(t,+new Date)}};u.__confirmAckDvc=function(e){if(window.localStorage){var t="YSF-"+e.toUpperCase()+"-DVCTIME",i=this.__getDeviceID(),o=2100,s=+new Date;if(Math.abs(s-Number(window.localStorage.getItem(t)))>o){var r=a._$md52hex(n._$uniqueID()+"-"+ +new Date);window.localStorage.setItem(i,r)}}};u._$sendPrdMsg=function(){var e=this;if(window.localStorage){var t="X-"+this.__getDataInCache("yunxin-user").appKey.toUpperCase()+"-YSF-PRODUCT",i=localStorage.getItem(t),a="YSF-PRODUCT-"+this.__sessionId+"-last",o=localStorage.getItem(a);if(i&&i!=o)this.__sender3rdProductsInfo(function(o){window.localStorage.setItem(a,i);window.localStorage.removeItem(t);e._$dispatchEvent("onmessage",n._$merge({fromUser:1,from:{id:-72}},o))})}};u._$sendPushMsg=function(e,t){e=e||[];var i=this.__getDataInCache("yunxin-user");for(var a=0;a<e.length;a++){var o=1==t?{cmd:133,deviceid:this.__getDeviceID(),msgId:e[a]}:{cmd:133,deviceid:this.__getDeviceID(),batchId:e[a]};this.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:i.exchange[0],scene:"p2p",content:JSON.stringify(o),done:function(e,t){if(e)c._$error("sendPushMsg",n._$merge({cmd:133},e))}})}};u._$sendPushMsgStatus=function(e,t){var i=this.__getDataInCache("yunxin-user");for(var a=0;a<t.length;a++)this.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:i.exchange[0],scene:"p2p",content:JSON.stringify({cmd:135,msgSessionId:t[a],status:e}),done:function(e,t){if(e)c._$error("sendPushMsgStatus",n._$merge({cmd:135},e))}})};u._$checkCanSendFile=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:103,fromIp:t.ip,timestamp:e.timestamp}),done:function(e){if(!e);else c._$error("checkCanSendFile",n._$merge({cmd:103},e))}._$bind(this)})};u.__sendMessageByContent=function(e,t,i){e.time=e.time||+new Date;e.id=e.id||n._$uniqueID();e.idServer=e.idServer||n._$uniqueID();e.idClient=e.idClient||n._$uniqueID();this._$dispatchEvent("onmessage",{type:"text",time:e.time,id:e.idServer,content:t,fromUser:1,from:i||this._$getKefu(),to:{id:e.to},msgIdClient:e.idClient})};u.__botQuickEntry=function(e,t){if(1==e)this._$dispatchEvent("onbotentry",t);else if(0==e)this._$dispatchEvent("unbotentry")};u._$getMoreBotList=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:204,target:e.template.action.target,params:e.template.action.params}),done:function(t){if(!t);else{this._$dispatchEvent("onmorebotlist",t,e);c._$error("getMoreBotList",n._$merge({cmd:204},t))}}._$bind(this)})};u._$getMoreBotDetail=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:204,target:e.target,params:e.params}),done:function(e){if(!e);else{this._$dispatchEvent("onmorebotdetail",e,{template:{id:"pair"}});c._$error("getMoreBotDetail",n._$merge({cmd:204},e))}}._$bind(this)})};u._$evalRobotAnswer=function(e){var t=this.__getDataInCache("yunxin-user");this._$dispatchEvent("onrobotanswerevalresult",{id:e.id,evaluation:e.evaluation,evalcontent:e.evalcontent||""});this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:64,msgidClient:e.msgIdClient,evaluation:e.evaluation,floating_layer_mark:this.__floatingLayerMark}),done:function(e){if(!e);else c._$error("evalRobotAnswer",n._$merge({cmd:64},e))}._$bind(this)})};u._$evaluationContent=function(e){var t=this.__getDataInCache("yunxin-user");this._$dispatchEvent("onrobotevalcontentresult",{id:e.id,evalcontent:e.evalcontent});this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:66,msgidClient:e.msgIdClient,evaluation_content:e.evalcontent,floating_layer_mark:this.__floatingLayerMark}),done:function(e){if(!e);else c._$error("evaluationContent",n._$merge({cmd:66},e))}._$bind(this)})};u._$getSeqOfHistoryLoad=function(){var e=this._$getAppkey().toUpperCase(),t="YSF-"+e+"-HISTORY-SEQ",i=localStorage.getItem(t);try{i=JSON.parse(i)}catch(o){i=null}if(!i||p.fid&&i.relatedFid&&i.relatedFid!=p.fid){i={value:a._$md52hex(n._$uniqueID()+"-"+ +new Date),relatedFid:p.fid};localStorage.setItem(t,JSON.stringify(i))}else if(i&&!i.relatedFid&&p.fid){i.relatedFid=p.fid;localStorage.setItem(t,JSON.stringify(i))}return i.value};u._$sendInputContent=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({
to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:58,sessionid:e.sessionId,msgType:"text",content:e.content,editTime:+new Date,sendingRate:this._$getConfig("client_input").sendingRate}),done:function(e){if(!e);else c._$error("sendInputContent",n._$merge({cmd:58},e))}._$bind(this)})};u._$getConfig=function(e){if(e)return b[e];else return b};var w=m._$allocate();c._$batch(w,["__init","__doCreateYXUser","__cbCreateYXUser","__cbConnect2Yunxin","__doCheckKefuFail","__doCheckQueue","__doClearQueueCheck","__doDisConnect","__doDelDisConnect","__updateKefuName","__sendMessageByContent","__botQuickEntry","__sender3rdProductsInfo","__confirmAckDvc","_$setSessionID","_$connect","_$pushMsgConnect","_$updateEvaluate","_$syncRobot","_$syncRobotEx","_$sendOfflineMessage","_$sendSelectShunt","_$sendPrdMsg","_$sendPushMsg","_$sendPushMsgStatus","_$sendThirdOrder","_$checkCanSendFile","_$getMoreBotList","_$getMoreBotDetail","_$evalRobotAnswer","_$sendInputContent"]);c._$batch(w,["__getDeviceID","__doResetTimeout","__getForeignInfo","__getProductInfo","__getNextTimeout","__getMessageBody","_$getKefu","_$getAppkey","_$getSessionID","_$getEvaluation","_$getVisitor","_$isDelay","_$isRobot","_$isInQueue","_$canSendMessage"],"after");return w},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","bcb1f11e87c301403d3b823c876c2457","c7aa9366cd28e791ea706b27d6415c7e","6206d0548a6481839c5e3bd6a4aad7fb","c0a456b030471faec92aa0d2ea80dffb","84d86c2d486b437b2fdbd0aaf8625f6f","a18d3aebbdbfdbd66028d87f4bc16716","989bbee1afb3aebb023915e137d34996","372b1a055fdd33f0a64140da071c7cdb");I$("b5fd5227971f68e93c3c9d8c4fce822c",function(e,t,i,n,a,o,s,r,_,c,d,f,l,u,h){if(window.debug)var m=window.debug("visitorSession:message");var p={};var g=[];var v=[];var b=function(e,t){var n=t.msgIdClient;if(null==n||void 0==n)return!1;var a=i._$indexOf(e,function(e){var i=e.msgIdClient;if(null!=i&&n==i&&e.type==t.type)return!0});return a>=0};var $=function(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t.id)return!0;return!1};d._$config({"msg-all":{method:"POST",url:"/webapi/user/message.action",format:function(e,t){var a=e.result;i._$forEach(a,function(e){if(!e.fromUser)e.from=l._$getKefu()||{}});a=this.__formatMessageList(a);i._$forEach(v,function(e){if(!b(a,e))a.push(e)});a.sort(function(e,t){return e.time>t.time?1:-1});if(t.ext&&t.ext.reconnect&&1==window.setting.dialogStyle){a.forEach(function(e){e.id=i._$uniqueID();this.__addItem({key:"msg-all",push:!0},e)}._$bind(this));n._$dispatchEvent(this.constructor,"listchange",{action:"refresh",key:"msg-all"})}}},"msg-history":{method:"POST",url:"/webapi/user/message/history.action",format:function(e,t){var n=e.result;i._$forEach(n,function(e){if(!e.fromUser)e.from={};if(!e.msgIdClient)e.msgIdClient=i._$uniqueID()});if(n.length){var a=n[n.length-1];n.push({id:i._$uniqueID(),type:"historySplit",content:{mid:a.id,sid:a.sessionId}});if(t.isFirst)n.unshift({id:i._$uniqueID(),type:"messageSplit",content:"以上为历史消息"})}n=this.__formatHistoryMessageList(n)},onload:function(e){if(e.length){this._$unshiftMsgToList(e);this._$dispatchEvent("onhistorylistload")}else this._$dispatchEvent("onhistorylistend")},onerror:"onhistorylistloaderr"}});u._$completeURL=function(e){return o._$decode(e)};u._$$Cache=e._$klass();h=u._$$Cache._$extend(d._$$Cache);h.__init=function(){var e=!1;return function(t){if(!e){e=!0;l._$addEvent("onmessage",this.__cbReceiveMessagePkg._$bind(this));l._$addEvent("oneval",this.__cbReceiveEvaluate._$bind(this));l._$addEvent("onevalresult",this.__cbReceiveResultEvaluate._$bind(this));l._$addEvent("shuntentries",this.__cbShuntEntries._$bind(this));l._$addEvent("receivethirdorder",this.__cbReceiveThirdOrderMsg._$bind(this));l._$addEvent("reconnect",this.__cbReconnect._$bind(this));l._$addEvent("onrobotanswerevalresult",this.__syncRobotAnswerEvalResult._$bind(this));l._$addEvent("onrobotevalcontentresult",this.__syncRobotAnswerEvalResult._$bind(this));l._$addEvent("onmorebotlist",this.__cbMoreBotList._$bind(this));l._$addEvent("onmorebotdetail",this.__cbMoreBotDetail._$bind(this));l._$addEvent("onmsgtrashed",this.__cbMsgTrashed._$bind(this))}this.__super(t)}}();h.__deduplicate=function(e,t){var i={};for(var n=0;n<e.length;n++){var a=e[n];if(a[t])if(i[a[t]])e.splice(n--,1);else i[a[t]]=!0;else;}};h.__deduplicateHistory=function(e){var t=5;var i=this._$getListInCache("msg-all");for(var n=0;n<e.length;n++){var a=e[n];for(var o=0;o<t;o++){var s=i.length-1-o;if(s<0)break;var r=i[s];if(a.msgIdClient&&r.msgIdClient&&a.msgIdClient==r.msgIdClient){e.splice(n--,1);break}}}};h.__formatMessageList=function(e){this.__doSplitQAList(e);this.__doParseProductList(e);this.__doParseMsg(e);this.__doParseBotMsgList(e);this.__doFilterTrashMsg(e);this.__deduplicate(e,"msgIdClient");return e};h.__formatHistoryMessageList=function(e){e=this.__formatMessageList(e);this.__deduplicateHistory(e);for(var i=0;i<e.length;i++){var n=e[i];if(n.sessionId!=l._$getSessionID()&&n.sessionId!=l._$getRobotSessionID())n.ishistory=!0;if(!l._$isRobot())n.ishistory=!0;if("custom"==n.type){var a=t._$text2type(n.content,"json"),o=a.staffinfo?JSON.parse(a.staffinfo):{},s=a.oldStaffInfo?JSON.parse(a.oldStaffInfo):{},r=a.newStaffInfo?JSON.parse(a.newStaffInfo):{};var _=a.cmd;switch(parseInt(_)){case 3:if(0==a.type){if(o.nickname)n.content="客服 "+o.nickname+" 为您服务";else n.content="客服为您服务";n.type="sys"}else if(2==a.type){n.content="留言开始";n.type="sys"}else if(3==a.type){n.content="进入排队";n.type="sys"}break;case 84:if(2==a.type){n.content="留言结束";n.type="sys"}else e.splice(i--,1)}}else;}};h.__doLoadList=function(e){e.onerror=function(t){e.onload&&e.onload([])};e.data=i._$merge(e.data,{k:l._$getAppkey(),u:l.__getDeviceID()});var t=(e.key||"").split("-");this.__doSendRequest(t[0]+"-"+t[1],e)};h._$getHistory=function(e){e=e||{};var t={appkey:l._$getAppkey(),token:l._$getSeqOfHistoryLoad(),limit:20,timestamp:+new Date};var i=l._$getSessionID();if(i)t.currentSid=i;var n=this._$getListInCache("msg-all");if(!e.isFirst&&n&&n.length){t.mid=n[0].content.mid;t.sid=n[0].content.sid}this.__doSendRequest("msg-history",{data:t,isFirst:e.isFirst})};h.__doFormatItem=function(e){if(e){e.ext=e.ext||{};if("image"===e.type){var t=e.content.url||"";if((t.indexOf("nos.netease.com")>=0||t.indexOf("nosdn.127.net")>=0)&&t.indexOf("?")<0){e.content.origin=t;e.content.url=t+"?imageView&thumbnail=1500x850";e.content.thumb=t+"?imageView&thumbnail=120x120";var n=this.__getDataInCacheWithDefault("nos-cache",{});n[e.content.url]=e.content}}var a=e.content;if(i._$isString(a))e.richContent=o._$encode(a)}};h.__doMapRobotQA=function(){var e=/<a\s(.*?)>/gi;var t=function(t){return(t||"").replace(e,'<a target="_blank" $1>')};return function(e,n){var a=this.__getDataInCacheWithDefault("robot-qa-list",{});i._$forEach(e,function(e){var o=e.id;if(!o){o=i._$uniqueID();e.id=o;e.randomId=!0}a[o]=e;e.origin=n;e.answer=t(e.answer)})}}();h.__cbReceiveMessagePkg=function(e){var t=function(){var e=!1;e=window.screenTop<-3e4&&window.screenLeft<-3e4;return e};if(1==window.setting.dialogStyle){if(this.__checkAckTimeout(l._$getAppkey())){var i=l._$getKefu();setTimeout(function(){this.__sendMsgToSDK(e);if(localStorage&&null==localStorage.getItem("YSF-MSGID-"+e.id)){localStorage.setItem("YSF-MSGID-"+e.id,1);s._$notifyMessage(e,i.nickname)}}._$bind(this),100*setting.dvcTimer)}}else if(document.hidden||t()){var i=l._$getKefu();s._$notifyMessage(e,i.nickname)}this.__cbReceiveMessage(e)};h.__cbReceiveMessage=function(){var e=function(e,t){var n=t.msgIdClient;if(null==n||void 0==n)return!1;var a=i._$indexOf(e,function(e){var t=e.msgIdClient;if(null!=t&&n==t)return!0});return a>=0};return function(t){var a=this._$getListInCache("msg-all");var o=[];i._$forEach(a,function(e){o.push({id:e.id,msgIdClient:e.msgIdClient,content:e.content})});m&&m("[recieveMessage] list:%O",o);if(!e(a,t)&&!e(g,t)){m&&m("[recieveMessage] msg:%O",t);if("qa-list"==t.type)this.__doMapRobotQA(t.list,t.origin);else if("crm-thirdorder"==t.type)this.__doParseBotMsg(t);var s="msg-all",r=this.__doSaveItemToCache(t),a=this._$getListInCache(s);if(this._$isLoaded(s)){a.push(r);n._$dispatchEvent(this.constructor,"listchange",{flag:1,key:s,data:r,action:"add"})}else v.push(r)}}}();h.__cbReceiveEvaluate=function(e){var t=i._$uniqueID();var a={id:t,sid:l._$getSessionID(),type:"eval-show",category:l._$getEvaluation().type,time:+new Date,isval:!1,messageInvite:e.messageInvite};n._$dispatchEvent(this.constructor,"oneval",{msg:a,autoPopup:e.autoPopup});this.__cbReceiveMessage(a)};h.__cbReceiveResultEvaluate=function(e){this._$recieveEvalMessage(i._$merge(e,{id:l._$getEvaluation().id,sid:l._$getSessionID(),type:"eval-show",time:+new Date,isval:!0}))};h._$sendAction=function(e,t){l._$action(e,this._$getItemInCache(t))};h._$getRobotItem=function(e){return this.__getDataInCacheWithDefault("robot-qa-list",{})[e]};h._$sendRobotMessage=function(e){var t=this.__getDataInCacheWithDefault("robot-qa-list",{})[e];if(t){l._$syncRobotEx({original_question:t.origin,matched_question:t.question,answer:t.answer,id:t.randomId?"":t.id});if(t.question)this.__cbReceiveMessage({type:"text",time:+new Date,id:i._$uniqueID(),sid:l._$getSessionID(),content:t.question,fromUser:1,from:l._$getVisitor(),to:l._$getKefu()});if(t.answer,!1)this.__cbReceiveMessage({type:"qa",time:+new Date,id:i._$uniqueID(),sid:l._$getSessionID(),content:t.answer,to:l._$getVisitor(),from:l._$getKefu()})}};h._$sendEvalMessage=function(e,t){var a={id:e.id,type:"eval-show",content:e.name,value:e.evaluation||0,isval:!0,messageThanks:e.messageThanks,tagList:e.tagList};a=i._$merge(this._$getItemInCache(e.id),a);this.__doSaveItemToCache(a,"msg-all");n._$dispatchEvent(this.constructor,"listchange",{data:a,key:"msg-all",flag:1,action:t?"add":"update"});l._$updateEvaluate(e.sid,e.evaluation,e.remarks,e.tagList,e.name)};h._$recieveEvalMessage=function(e){var t={id:e.id,type:"eval-show",content:e.content,value:e.evaluation||0,isval:!0};t=i._$merge(this._$getItemInCache(e.id),t);
var a=this._$getListInCache("msg-all"),o=b(a,t),s=b(g,t);this.__doSaveItemToCache(t,"msg-all");if(!o&&!s){a.push(t);n._$dispatchEvent(this.constructor,"listchange",{data:t,key:"msg-all",flag:1,action:o?"update":"add"})}};h._$sendMessage=function(e){if(e.content){if("image"===e.type){if(!e.content.file){this._$dispatchEvent("onerror",{code:"NotAnImage",message:"NotAnImage(请求对象不是合法图片)(上传文件失败)"});return}var t=this._$getImageByURL(e.content.file);if(t)e.content.file=t}var a;if(!e.id){a=i._$merge({state:1,id:"auto-"+i._$uniqueID(),sid:l._$getSessionID(),from:l._$getVisitor(),fromUser:1,time:+new Date},e);this.__cbReceiveMessage(a)}else{a=this._$getItemInCache(e.id);a.state=1;n._$dispatchEvent(this.constructor,"listchange",{data:a,key:"msg-all",action:"update"})}e.beginupload=function(e){if("file"==a.type){a.uploadObj=e;this._$updateMessage(a)}}._$bind(this),e.uploadprogress=function(e){if("file"==a.type){a.progressObj=e;n._$dispatchEvent(this.constructor,"fileuploadprogress",{msg:a})}}._$bind(this);e.uploaddone=function(t,i){if(i&&i.url)i.url=c._$transNosToCdn(i.url,"nim");delete a.uploadObj;if(!t){a.content=i;this.__doFormatItem(this._$getItemInCache(a.id))}else{f._$error("msg.uploaddone",t);a.state=-1;a.error=t;this._$updateMessage(a)}this._$dispatchEvent("onfileupload",{data:e})}._$bind(this);if(!e.done)e.done=function(e,t){a.error=e;a.time=(t||{}).time||a.time;if(e){f._$error("msg.done",e);if(!t){console.error(e.message);return}a.state=-1;if("custom"==t.type){t.content=a.content;t.type=a.type}a=i._$merge(a,t);if("NotAnImage"===e.code){this._$dispatchEvent("onerror",e);var o=this._$getListInCache("msg-all"),s=i._$indexOf(o,a);if(s>=0)o.splice(s,1);n._$dispatchEvent(this.constructor,"listchange",{data:a,key:"msg-all",action:"delete"});return}}else{a.state=0;a.msgIdClient=a.sid+"#"+t.idClient;var r=a.content.url;if("image"==a.type&&r){var _=new Image;_.onload=this._$updateMessage._$bind(this,a);_.onerror=this._$updateMessage._$bind(this,a);_.src=r;return}}this._$updateMessage(a)}._$bind(this);l._$sendMessage(e)}};h._$reSendMessage=function(e){var t=this._$getItemInCache(e);if(t){var n=i._$merge(t,{id:t.id,type:t.type,content:t.content});if("file"==n.type||"image"==n.type){if(!n.content.file)n.content={file:t.content}}else i._$merge(n,{resend:!0,idClient:t.idClient});this._$sendMessage(n)}};h._$getImageByURL=function(e){var t=this.__getDataInCacheWithDefault("nos-cache",{})[e];if(t)return i._$merge({},t,{url:t.origin||t.url})};h._$getAudioURL=function(e,t){t=t||function(){};var i=this._$getItemInCache(e);if(i){var n=i.content.url||"";if(!(n.indexOf("nos.netease.com")>=0||n.indexOf("nosdn.127.net")>=0))this.__doSendRequest("msg-audio",{query:{id:e},onload:function(e){if(200!=e.code)t();else{i.content.url=e.result;t(e.result)}},onerror:function(e){t()}});else t(n)}else t()};h.__cbShuntEntries=function(e){var t={};var a=this._$getListInCache("msg-all");i._$merge(t,{list:e.entries,from:e.from,type:"shunt",id:0,label:e.label});n._$dispatchEvent(this.constructor,"listchange",{data:t,key:"msg-all",action:"add",flag:1})};h.__doSplitQAList=function(e){i._$reverseEach(e,function(e,t,n){if("qa"==e.type){e.id=e.msgIdClient;var a=JSON.parse(e.content||"null"),o=r._$parse(a);i._$forEach(o,function(t,n,a){a[n]=i._$merge({},e,t)});o.unshift(t,1);n.splice.apply(n,o)}})};h.__doParseMsg=function(e){var n=this;var a={image:function(e){try{var t=JSON.parse(e.content);e.content=t;a["text"](e)}catch(i){a["text"](e)}},file:function(e){try{var t=JSON.parse(e.content);e.content=t;a["text"](e)}catch(i){a["text"](e)}},text:function(e){var t=n._$getListInCache("msg-all");if(b(t,e)||b(g,e))e.type="custom"},productinfo:function(e){try{var t=JSON.parse(e.content);i._$merge(e,t);a["text"](e)}catch(n){a["text"](e)}},"qa-list":function(e){n.__doMapRobotQA(e.list,e.origin)},richtext:function(e){try{var t=JSON.parse(e.content).content;e.content=t;e.type="rich";a["text"](e)}catch(i){a["text"](e)}}};a["audio"]=a["action"]=a["image"];a["qa"]=a["qa-list"];a["rich"]=a["richtext"];e.forEach(function(e,i){e.ext=t._$text2type(e.ext,"json")||{};if(a[e.type])a[e.type](e)})};h.__doParseProductList=function(e){var t,n={121:"productinfo"};i._$forEach(e,function(e,a){t=null;try{t=JSON.parse(e.content);if(t&&n[t.cmd]){e=i._$merge(e,{type:n[t.cmd]});e.product=t}}catch(o){}},this)};h.__doParseBotMsgList=function(e){i._$forEach(e,function(e,t){if("workflow"==e.type){try{e.content=JSON.parse(e.content)}catch(i){e.content={}}this.__doParseBotMsg(e)}}._$bind(this))};h.__doParseBotMsg=function(){var e=function(e){var t=[];if(e.width)t.push("width:"+e.width);if(e.color)t.push("color:"+e.color);if(e.align)t.push("text-align:"+e.align);var n=["display:inline-block;white-space:nowrap;word-wrap:normal","text-decoration:underline","font-style:italic","font-weight:bold"];if(e.flag){var a=[];var o=parseInt(e.flag).toString(2);o=new Array(n.length-o.length+1).join("0")+o;var s=o.split("");i._$forEach(o,function(e,t){if("1"==e)a.push(n[t])})}var r=t.join(";"),_=a.join(";");if(r)e.style=r;if(_)e.innerStyle=_};var t={qiyu_template_text:function(e){e.type="text";e.content=e.content.template.label},bot_form:function(e){i._$forEach(e.content.template.forms,function(e){e.required=parseInt(e.required)})},error_msg:function(e){e.content.template.label=r._$action(i._$uniqueID(),e.content.template.label)},card_layout:function(t){var n=t.content.template;i._$forEach(n.list,function(t){i._$forEach(t.list,function(t){i._$forEach(t,function(i){i.width=100/t.length+"%";e(i)})})})},detail_view:function(t){var n=t.content.template;i._$forEach(n.thumbnail.list,function(t){i._$forEach(t,function(i){i.width=100/t.length+"%";e(i)})});i._$forEach(n.detail.list,function(t){i._$forEach(t,function(t){e(t.left);e(t.right)})})},pair:function(t){var n=t.content.template;i._$forEach(n.list,function(t){i._$forEach(t,function(t){e(t.left);e(t.right)})})}};return function(e){var n=e.content.template.id;switch(e.content.type){case"01":e.type="text";e.content=e.content.template;break;case"02":case"03":break;default:e.type="crm-thirdorder";var a=t[n];if(i._$isFunction(a))a.call(this,e)}}}();h.__doFilterTrashMsg=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(1!=i.fromUser){var n=i.ext;if(n&&n.auditResult)e.splice(t--,1)}else;}};h.__sendMsgToSDK=function(e){e.category="notify";parent.postMessage("pkg:"+JSON.stringify(e),"*")};h.__checkAckTimeout=function(e){if(window.localStorage){var t="YSF-"+e+"-MSGTIME",i=parseInt(window.localStorage.getItem(t)),n=+new Date;if(Math.abs(n-i)>2100)return!0;else return!1}};h.__cbReconnect=function(){this.__doLoadList({data:{limit:1e5,offset:0},key:"msg-all",ext:{reconnect:1}})};h.__cbReceiveThirdOrderMsg=function(e){this.__doParseBotMsg(e);this._$addMessage(e,1);n._$dispatchEvent(this.constructor,"onthirdorder",e)};h.__syncRobotAnswerEvalResult=function(e){var t=this._$getItemInCache(e.id);var n=i._$loop(e,function(e,i){return t[i]!=e});if(n){t=i._$merge(t,e);this._$updateMessage(e)}};h._$addMessage=function(e,t){var i="msg-all",a=this._$getListInCache(i),e=this.__doSaveItemToCache(e);a.push(e);n._$dispatchEvent(this.constructor,"listchange",{flag:t,key:i,action:"add",data:e})};h._$updateMessage=function(e){var t="msg-all";e=this.__doSaveItemToCache(e);n._$dispatchEvent(this.constructor,"listchange",{key:t,action:"update",data:e})};h._$deleteMessage=function(e){var t="msg-all",a=this._$getListInCache(t);if(a.length<=0)console.error("why message list empty when delete");this._$clearItemInCache(e.id);var o=i._$indexOf(a,e);if(o>-1)a.splice(o,1);n._$dispatchEvent(this.constructor,"listchange",{key:t,action:"delete",data:e})};h._$unshiftMsgToList=function(e){var t="msg-all";i._$forEach(e,function(e){if(!e.id||e.id==-1)e.id=i._$uniqueID();this.__doUnshiftToList(t,e)}._$bind(this));n._$dispatchEvent(this.constructor,"listchange",{flag:1,key:t,offset:0,limit:e.length,action:"unshift"})};h._$abortFileTrans=function(e){var t=this._$getItemInCache(e);t.uploadObj.abort();this._$deleteMessage(t)};h._$getMoreBotList=function(e){l._$getMoreBotList(e)};h.__cbMoreBotList=function(e,t){var i={content:t};if(!e&&t)this.__doParseBotMsg(i);n._$dispatchEvent(this.constructor,"onmorebotlist",{error:e,content:i.content})};h._$getMoreBotDetail=function(e){l._$getMoreBotDetail(e)};h.__cbMoreBotDetail=function(e,t){var i={content:t};if(!e&&t)this.__doParseBotMsg(i);n._$dispatchEvent(this.constructor,"onmorebotdetail",{error:e,content:i.content})};h.__cbMsgTrashed=function(e){var t;var n=this._$getListInCache("msg-all");for(var a=n.length-1;a>=0;a--)if(n[a].msgIdClient==e.msgIdClient){t=n[a];break}if(t){i._$merge(t.ext,{auditResult:e.auditResult,trashWords:e.trashWords});this._$updateMessage(t)}};u._$do=d._$do._$bind(null,u._$$Cache);a._$$CustomEvent._$allocate({element:u._$$Cache,event:["listchange","oneval","fileuploadprogress","onthirdorder","onmorebotlist","onmorebotdetail"]});u._$$Cache._$allocate()},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","73178fa1c529e77edd2d067795ed0e51","c3ed3bec246daa40518ead2cb9447150","d64f649eed070094e05b6ae40a14317e","84d86c2d486b437b2fdbd0aaf8625f6f","c0a456b030471faec92aa0d2ea80dffb","7f31a069b85883a87d9e7be65faf8ba9","989bbee1afb3aebb023915e137d34996","a18d3aebbdbfdbd66028d87f4bc16716","1af021d5c158865e7dd70e474d81c2ea");I$("fefc17385a42901cb717428f457e2807",function(e,t,i,n,a,o,s,r,_,c){o._$$Draggable=t._$klass();c=o._$$Draggable._$extend(a._$$EventTarget);c.__reset=function(e){this.__super(e);this.__overflow=!!e.overflow;this.__body=i._$get(e.body);this.__mbar=i._$get(e.mbar)||this.__body;this.__view=i._$get(e.view)||i._$getPageBox();this.__direction=parseInt(e.direction)||0;this.__doInitDomEvent([[document,"mouseup",this.__onDragEnd._$bind(this)],[document,"mousemove",this.__onDragging._$bind(this)],[this.__mbar,"mousedown",this.__onDragStart._$bind(this)]])};c.__destroy=function(){this.__super();delete this.__body;delete this.__mbar;delete this.__view};c.__getMaxRange=function(){
return{x:this.__view.clientWidth-this.__body.offsetWidth,y:this.__view.clientHeight-this.__body.offsetHeight}};c.__onDragStart=function(e){n._$stop(e);if(!this.__offset){this.__offset={x:n._$pageX(e),y:n._$pageY(e)};this.__maxbox=this.__getMaxRange()}};c.__onDragging=function(e){if(this.__offset){n._$stop(e);var t={x:n._$pageX(e),y:n._$pageY(e)};var a=t.x-this.__offset.x,o=t.y-this.__offset.y,s=parseInt(i._$getStyle(this.__body,"top"))||0,r=parseInt(i._$getStyle(this.__body,"left"))||0,_={top:s+o,left:r+a};this.__offset=t;this._$setPosition(_)}};c.__onDragEnd=function(e){if(this.__offset){delete this.__maxbox;delete this.__offset;this._$dispatchEvent("ondragend",this._$getPosition())}};c._$setPosition=function(e){if(!this.__overflow){var t=this.__maxbox||this.__getMaxRange();e.top=Math.min(t.y,Math.max(0,e.top));e.left=Math.min(t.x,Math.max(0,e.left))}e.top=Math.round(e.top);e.left=Math.round(e.left);this._$dispatchEvent("onbeforechange",e);var i=this.__body.style;if(0==this.__direction||2==this.__direction)i.top=e.top+"px";if(0==this.__direction||1==this.__direction)i.left=e.left+"px";this._$dispatchEvent("onchange",e)};c._$getPosition=function(){return{left:parseInt(i._$getStyle(this.__body,"left"),10)||0,top:parseInt(i._$getStyle(this.__body,"top"),10)||0}};o._$$Dragger=o._$$Draggable;if(!0)e.copy(e.P("nej.ut"),o);return o},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","e4cc364ae94aa1c5f0562d86be81286e");I$("64bcce22b68613702fad059ca618d2f6",function(e,t,i,n,a,o,s,r){var _;a._$$Animation=t._$klass();_=a._$$Animation._$extend(i._$$EventTarget);_.__reset=function(e){this.__super(e);this.__end=e.to||o;this.__begin=e.from||{};this.__delay=Math.max(0,parseInt(e.delay)||0)};_.__destroy=function(){this.__super();this._$stop();if(this.__dtime){window.clearTimeout(this.__dtime);delete this.__dtime}delete this.__end;delete this.__begin};_.__onAnimationFrame=function(e){if(this.__begin){if((""+e).indexOf(".")>=0)e=+new Date;if(!this.__doAnimationFrame(e))this.__timer=n.requestAnimationFrame(this.__onAnimationFrame._$bind(this));else this._$stop()}};_.__doAnimationFrame=s;_._$play=function(){var e=function(){this.__dtime=window.clearTimeout(this.__dtime);this.__begin.time=+new Date;this.__timer=n.requestAnimationFrame(this.__onAnimationFrame._$bind(this))};return function(){this.__dtime=window.setTimeout(e._$bind(this),this.__delay)}}();_._$stop=function(){this.__timer=n.cancelAnimationFrame(this.__timer);this._$dispatchEvent("onstop")};if(!0)e.copy(e.P("nej.ut"),a);return a},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","e4cc364ae94aa1c5f0562d86be81286e","bb8b8f855b45d1f20ec7b61310b0f03f");I$("44e7f462a46c57d2d4e047b2250e0a70",function(e,t,i,n,a,o,s,r){var _;a._$$AnimBezier=t._$klass();_=a._$$AnimBezier._$extend(n._$$Animation);_.__reset=function(e){this.__super(e);this.__duration=e.duration||200;this.__epsilon=1/(200*this.__duration);this.__doParseTiming(e.timing);this.__doCalPolynomialCoefficients()};_.__destroy=function(){this.__super();delete this.__pointer;delete this.__coefficient};_.__doParseTiming=function(){var e=/^cubic\-bezier\((.*?)\)$/i,t=/\s*,\s*/i,n={linear:[0,0,1,1],ease:[.25,.1,.25,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[0,0,.58,1]};var a=function(e,t,i){i[t]=parseFloat(e)};return function(o){o=(o||"").toLowerCase();this.__pointer=n[o];if(e.test(o)){this.__pointer=RegExp.$1.split(t);i._$forEach(this.__pointer,a)}if(!this.__pointer)this.__pointer=n.ease}}();_.__doCalPolynomialCoefficients=function(){var e=this.__pointer,t=3*e[0],i=3*(e[2]-e[0])-t,n=1-t-i,a=3*e[1],o=3*(e[3]-e[1])-a,s=1-a-o;this.__coefficient={ax:n,ay:s,bx:i,by:o,cx:t,cy:a}};_.__doCalCubicBezierAtTime=function(){var e=function(e,t){return((t.ax*e+t.bx)*e+t.cx)*e};var t=function(e,t){return((t.ay*e+t.by)*e+t.cy)*e};var i=function(e,t){return(3*t.ax*e+2*t.bx)*e+t.cx};var n=function(t,n,a){var o,s,r,_,c,d;for(r=t,d=0;d<8;d++){_=e(r,a)-t;if(Math.abs(_)<n)return r;c=i(r,a);if(Math.abs(c)<1e-6)break;r-=_/c}o=0;s=1;r=t;if(r<o)return o;if(r>s)return s;for(;o<s;){_=e(r,a);if(Math.abs(_-t)<n)return r;if(t>_)o=r;else s=r;r=.5*(s-o)+o}return r};return function(e){return t(n(e/this.__duration,this.__epsilon,this.__coefficient),this.__coefficient)}}();_.__doAnimationFrame=function(e){var t=e-this.__begin.time,n=this.__doCalCubicBezierAtTime(t),a=i._$fixed(this.__begin.offset*(1-n)+this.__end.offset*n,2),o=!1;if(t>=this.__duration){a=this.__end.offset;o=!0}this._$dispatchEvent("onupdate",{offset:1*a});return o};_._$stop=function(){this._$dispatchEvent("onupdate",{offset:this.__end.offset});this.__super()};if(!0)e.copy(e.P("nej.ut"),a);return a},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","64bcce22b68613702fad059ca618d2f6");I$("f14070192b1391b9e8e5a994044b586b",function(e,t,i,n,a,o,s,r){var _;a._$$AnimEaseInOut=t._$klass();_=a._$$AnimEaseInOut._$extend(n._$$AnimBezier);_.__reset=function(e){e=i._$merge({},e);e.timing="easeinout";this.__super(e)};if(!0)e.copy(e.P("nej.ut"),a);return a},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","44e7f462a46c57d2d4e047b2250e0a70");I$("3f2eeb0c1587f8d753f400fd3d1979f7",function(e){e.__getOverflowParent=function(e){return e}});I$("ae937c1f2b5347cf2d34c08b990eba6a",function(e,t){if("trident"===e._$KERNEL.engine)I$("d969a56245f33e8347ab32ed4d5bc5a6",function(){t.__getOverflowParent=function(e){var t=e;if("BODY"==t.tagName)t=t.ownerDocument.documentElement;return t}});return t},"b5a2ea56adb918d7d443468b3a9b53d1","3f2eeb0c1587f8d753f400fd3d1979f7");I$("4515d6f61cb4f4be600fceec5d886e2a",function(e,t,i,n,a,o,s,r,_,c,d,f,l){var u;c._$$SimpleScroll=t._$klass();u=c._$$SimpleScroll._$extend(o._$$EventTarget);u.__init=function(){this.__aopt={to:{},from:{},duration:500,onstop:this.__doStopBarOpacity._$bind(this),onupdate:this.__doUpdateBarOpacity._$bind(this)};this.__dopt={x:{direction:1,ondragend:this.__onUpdateBarEnd._$bind(this,"x"),onbeforechange:this.__onBeforeUpdateBar._$bind(this,"x")},y:{direction:2,ondragend:this.__onUpdateBarEnd._$bind(this,"y"),onbeforechange:this.__onBeforeUpdateBar._$bind(this,"y")}};this.__dragger={};this.__super()};u.__reset=function(){var t={x:{min:0,speed:1,step:50,interval:50,left:0,right:0,hover:"js-hover",sb:"scrollWidth",cb:"clientWidth",ob:"offsetWidth",sr:"scrollLeft",ss:"width",sp:"left",dr:"right"},y:{min:0,speed:1,interval:50,step:50,top:0,bottom:0,hover:"js-hover",sb:"scrollHeight",cb:"clientHeight",ob:"offsetHeight",sr:"scrollTop",ss:"height",sp:"top",dr:"bottom"}};var n=function(n,a){if(!(a||d).body)a={body:a};var o=e.X(e.X({},t[n]),a);o.body=i._$get(o.body);if(o.body&&o.track){if(":parent"==o.track)o.track=o.body.parentNode;o.track=i._$get(o.track)}if(!o.min)o.min=!o.body?10:o.body[o.ob]||10;return o};var a=function(e,t){if(t){var i=this.__dopt[e];i.body=t;i.view=this.__parent;this.__dragger[e]=s._$$Dragger._$allocate(i)}};return function(e){this.__super(e);this.__bar={x:n("x",e.xbar),y:n("y",e.ybar)};this.__parent=i._$get(e.parent);this.__doInitDomEvent([[this.__parent,"mousewheel",this.__onMouseWheel._$bind(this)],[this.__parent,"scroll",this.__doSyncScrollBar._$bind(this)],[this.__parent,"mouseover",this.__doFixScrollBar._$bind(this)],[this.__bar.x.track,"mousedown",this.__onTrackDown._$bind(this,"x")],[this.__bar.y.track,"mousedown",this.__onTrackDown._$bind(this,"y")],[this.__bar.x.track,"mousewheel",this.__onMouseWheel._$bind(this)],[this.__bar.y.track,"mousewheel",this.__onMouseWheel._$bind(this)]]);var t=i._$get(e.trigger);if(t){this.__doInitDomEvent([[e.trigger,"mouseenter",this.__onMouseEnter._$bind(this)],[e.trigger,"mouseleave",this.__onMouseLeave._$bind(this)]]);this.__doUpdateBarOpacity({offset:0})}else this._$resize();a.call(this,"x",this.__bar.x.body);a.call(this,"y",this.__bar.y.body)}}();u.__destroy=function(){var e=function(e,t,i){e._$recycle();delete i[t];var n=this.__dopt[t];delete n.view;delete n.body};var t=function(e,t,n){if(e.body){var a={};a[e.ss]="";a[e.sp]="";i._$style(e.body,a);delete e.body}};return function(){this.__super();delete this.__isout;delete this.__parent;delete this.__dragging;this.__doStopBarOpacity();a._$loop(this.__dragger,e._$bind(this));a._$loop(this.__bar,t._$bind(this));delete this.__bar}}();u.__getOverflowParent=function(){return _.__getOverflowParent(this.__parent)};u.__doResetBarSize=function(e){var t=this.__getOverflowParent(),n=t[e.sb],a=t[e.cb],o=n-a,a=a-e[e.sp]-e[e.dr],s=n-a,r={},_={};if(o<=0){e.ratio=0;_.visibility="hidden";r[e.ss]=a+"px"}else{var c=Math.ceil(Math.max(e.min,a-a/n*s));_.visibility="visible";r[e.ss]=c+"px";e.max=Math.ceil(a-c+e[e.sp]);e.ratio=(a-c)/s}e.delta=0;if(e.body)e.delta=e.body[e.ob]-e.body[e.cb];i._$style(e.track||e.body,_);i._$style(e.body,r)};u.__doResetBarPosition=function(e,t){var n=this.__getOverflowParent();if(0!=t)n[e.sr]-=t*e.speed;if(e.body){var a=n[e.sr],o=Math.ceil(a*e.ratio)-e.delta+e[e.sp];i._$setStyle(e.body,e.sp,o+"px")}};u.__doSyncScrollBar=function(){if(!this.__dragging)this._$resize()};u.__doUpdateScrollBar=function(e,t){this.__doResetBarPosition(this.__bar.y,t);this.__doResetBarPosition(this.__bar.x,e)};u.__doAnimScrollBar=function(){this.__doStopBarOpacity();var e=this.__bar.y,t=e.track||e.body;if(!t){e=this.__bar.x;t=e.track||e.body}this.__aopt.from.offset=i._$getStyle(t,"opacity");this.__anim=r._$$AnimEaseInOut._$allocate(this.__aopt);this.__anim._$play()};u.__doUpdateBarOpacity=function(e){var t=e.offset;i._$setStyle(this.__bar.x.track||this.__bar.x.body,"opacity",t);i._$setStyle(this.__bar.y.track||this.__bar.y.body,"opacity",t)};u.__doStopBarOpacity=function(){if(this.__anim){this.__anim._$recycle();delete this.__anim}};u.__onMouseWheel=function(e){var t=this.__getOverflowParent(),i=t.scrollTop,a=t.scrollLeft;this.__doUpdateScrollBar(e.wheelDeltaX||0,e.wheelDeltaY||e.wheelDelta||0);i=t.scrollTop!=i;a=t.scrollLeft!=a;if(i||a)n._$stop(e)};u.__onMouseEnter=function(e){
this.__isout=!1;this._$resize();this.__aopt.delay=0;this.__aopt.to.offset=.6;this.__doAnimScrollBar()};u.__onMouseLeave=function(e){this.__isout=!0;if(!this.__dragging){this.__aopt.delay=500;this.__aopt.to.offset=0;this.__doAnimScrollBar()}};u.__onTrackDown=function(){var e={x:function(e){this.__doUpdateScrollBar(e,0)},y:function(e){this.__doUpdateScrollBar(0,e)}};var t,a,o;var s=function(e){o=1;a=null;t=window.clearTimeout(t);n._$delEvent(e.track,"mouseup",a)};var r=function(_,c,d){var f=this.__bar[_],l=parseInt(i._$getStyle(f.body,f.sp)),u=l+d;if(!(l<=c&&c<=u)){if(!a){a=s._$bind(this,f);n._$addEvent(f.track,"mouseup",a)}e[_].call(this,(c<l?1:-1)*f.step*o);t=window.setTimeout(r._$bind(this,_,c,d),f.interval);o++}else s(f)};return function(e,t){var a=this.__bar[e],o=i._$offset(a.track)[e],_=n._$page(t)[e],c=a.body[a.ob];s(a);r.call(this,e,_-o,c)}}();u.__onBeforeUpdateBar=function(e,t){this.__dragging=!0;var n=this.__getOverflowParent(),a=this.__bar[e],o=a[a.sp],s=Math.max(o,Math.min(a.max,t[a.sp]));n[a.sr]=Math.ceil((s-o)/a.ratio);t[a.sp]=s;i._$addClassName(a.track,a.hover)};u.__onUpdateBarEnd=function(e){this.__dragging=!1;if(this.__isout)this.__onMouseLeave();var t=this.__bar[e];i._$delClassName(t.track,t.hover)};u.__doFixScrollBar=function(e){this._$resize()};u._$resize=function(){this.__doResetBarSize(this.__bar.x);this.__doResetBarSize(this.__bar.y);this.__doUpdateScrollBar(0,0)};u._$show=function(){this.__onMouseEnter()};u._$hide=function(){this.__onMouseLeave()};if(!0)e.copy(e.P("nej.ut"),c);return c},"c27e07105db4b2613e9811a6e5ceab90","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","e4cc364ae94aa1c5f0562d86be81286e","fefc17385a42901cb717428f457e2807","f14070192b1391b9e8e5a994044b586b","ae937c1f2b5347cf2d34c08b990eba6a");I$("ed3f9d209f1211a4a959d1d3ae866f7a",".#<uispace>-parent{position:relative;}\n");I$("cf540de589f5418fd8872bb4fd620929",'<textarea name="ntp" id="#<sbBody>">\n  <div class="u-scrollbar"><span class="thumb">&nbsp;</span></div>\n</textarea>');I$("d4f78b74ede76946bfa040af6decdc10",function(e,t,i,n,a,o,s,r,_){r._$$Scrollbar=e._$klass();_=r._$$Scrollbar._$extend(a._$$Abstract);_.__init=function(){this.__sopt={ybar:{}};this.__super()};_.__reset=function(e){var n=t._$get(e.parent);if(n){var a=e.container||n.parentNode;this.__super({parent:a,clazz:"m-scrollbar"});this.__sopt.parent=n;this.__scrollbar=i._$$SimpleScroll._$allocate(this.__sopt);setTimeout(function(){if(this.__scrollbar)this.__scrollbar._$resize()}._$bind(this),1e3);this.__doInitDomEvent([[e.sbody||this.__sopt.parent,"scroll",this.__doShowScrollBar._$bind(this)]])}};_.__destroy=function(){delete this.__sopt.parent;delete this.__sopt.trigger;this.__doClearComponent();this.__super()};_.__initXGui=function(){var e=t._$pushCSSText(o),i=n._$parseUITemplate(s);return function(){this.__seed_css=e;this.__seed_html=i.sbBody}}();_.__initNode=function(){this.__super();this.__sopt.ybar.track=this.__body;this.__sopt.ybar.body=t._$getChildren(this.__body)[0]};_.__doShowScrollBar=function(){if(this.__stimer)window.clearTimeout(this.__stimer);if(this.__scrollbar)this.__scrollbar._$show()};_.__doHideScrollBar=function(){this.__stimer=window.clearTimeout(this.__stimer);if(this.__scrollbar)this.__scrollbar._$hide()};_._$resize=function(){if(this.__scrollbar)this.__scrollbar._$resize()}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","4515d6f61cb4f4be600fceec5d886e2a","3da49e23d83c707316e52d7e8e62291a","d1bf8daf5a41ea1e86db380d4fa07f12","ed3f9d209f1211a4a959d1d3ae866f7a","cf540de589f5418fd8872bb4fd620929");I$("6446596d35b13a078c61255f095e4418",function(e,t,i,n,a,o){i.__handleFileLabelClick=function(){};return i});I$("ce01ed6659e57db8e76dfb60b8d5552c",function(e,t,i,n,a,o,s){if("gecko"===e._$KERNEL.engine)I$("41fa12e514816294f473440d7325d2dc",function(){i.__handleFileLabelClick=function(){var e=function(e){t._$stop(e);t._$getElement(e,"t:label").control.click()};return function(i){t._$addEvent(i,"click",e)}}()});return i},"b5a2ea56adb918d7d443468b3a9b53d1","7b946b5cd842c1aceab62d37f3506966","6446596d35b13a078c61255f095e4418");I$("b7aac098ae4b6dc4338e9db07c9a613d",function(e,t,i,n,a,o,s,r,_,c){var d={},f=t._$pushCSSText(".#<uispace>{position:absolute;width:0;height:0;overflow:hidden;}");s._$bind=function(){var e=function(e){var t=d[e];if(!t){t={};d[e]=t}return t};var o=function(e,t){if(t){var i=[];n._$loop(t,function(e,t){i.push('<input type="hidden" name="'+t+'" value="'+e+'">')});e.insertAdjacentHTML("afterBegin",i.join(""))}};var s=function(e,i,n,a,s){var r,_=d[e],c=f+" "+(n||"");i=t._$get(i);if(i){r=t._$create("div",c);i.appendChild(r);t._$dataset(i,"id",e);o(i,a)}else{r=t._$create("form",c);t._$dataset(r,"id",e);o(r,a);(s||document.body).appendChild(r)}_.pid=t._$id(r)};var c=function(e,n){var a=n.accept||"";if(a)a='accept="'+a+'"';var o="";if(n.multiple)o='multiple="true"';var n=d[e],s=e+"-"+n.nmb,r=t._$html2node('<input type="file" '+o+" "+a+' contenteditable="false" id="'+s+'"/>');n.nmb++;t._$get(n.pid).appendChild(r);i._$addEvent(r,"change",l);return s};var l=function(e){var n=i._$getElement(e),a=n.id,o=a.split("-"),s=d[o[0]];if(n.value){if(s.multiple)t._$get(s.lab).htmlFor=c(o[0],s);if(!n.name){var r="";n.name=s.name+r}s.onchange({id:a,form:n.form,target:t._$get(s.lab)})}};return function(i,o){i=t._$get(i);if(i&&"LABEL"==i.tagName){t._$dumpCSSText();var d=n._$uniqueID(),f=e(d);o=o||r;s(d,o.form,o.clazz,o.param,t._$get(o.parent));f.nmb=0;f.name=o.name||"file";f.lab=t._$id(i);f.accept=o.accept||"";f.multiple=!!o.multiple;f.onchange=o.onchange||_;i.htmlFor=c(d,f);a.__handleFileLabelClick(i);return d}}}();s._$get=function(e){var i=d[e];if(i){var n=t._$get(i.pid);if(n){if("FORM"!=n.tagName)n=n.parentNode;return n}}};s._$unbind=function(e){var i=d[e];if(i){t._$remove(i.pid);delete d[e]}};s._$selectable=function(){var e;return function(){if(null==e){var t=document.createElement("input");t.type="file";e=!t.disabled}return e}}();o._$merge({_$bind:s._$bind});if(!0){var o=e.P("nej.e");o._$file=s._$bind;o._$getFileForm=s._$get;o._$removeFileForm=s._$unbind}return s},"c27e07105db4b2613e9811a6e5ceab90","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","ce01ed6659e57db8e76dfb60b8d5552c","c2028585a730a88452fc7218e9c1ddab");I$("4eaf84bc0111a08b63126ab7bbd3ad89",function(e,t,i,n,a,o){i.__setCursorPosition=function(e,t){e.selectionEnd=t.end||0;e.selectionStart=t.start||0;e.focus()};i.__getCursorPosition=function(e){e.focus();return{end:e.selectionEnd,start:e.selectionStart}};i.__getCursorPXPosition=function(t){var i=document.createElement("div");e._$style(i,{position:"absolute",visibility:"hidden",whiteSpace:"pre-wrap",appearance:"textarea",font:e._$getStyle(t,"font"),display:e._$getStyle(t,"display"),padding:e._$getStyle(t,"padding"),wordWrap:e._$getStyle(t,"wordWrap"),textAlign:e._$getStyle(t,"textAlign"),letterSpacing:e._$getStyle(t,"letterSpacing"),top:0,left:0,width:t.clientWidth+"px",height:t.clientHeight+"px"});i.innerText=t.value;var n=document.createElement("span");i.appendChild(n);document.body.appendChild(i);var a={width:0,top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight};e._$remove(i);return a};return i},"5bd21216eb7851bb48d84acf022ca85f","b5a2ea56adb918d7d443468b3a9b53d1");I$("bf0b09ad16f35a4b05eee20ae88d099f",function(e,t,i,n,a,o,s){if("trident"===t._$KERNEL.engine)I$("800319f3b6a0951168e858a1d7cad645",function(){e.__getCursorPXPosition=function(e){e.focus();var t=document.selection.createRange(),n=i._$getPageBox(),a=i._$offset(e);return{top:t.boundingTop-a.y+n.scrollTop,left:t.boundingLeft-a.x+n.scrollLeft,width:t.boundingWidth,height:t.boundingHeight}}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("4e9e99858aafb7ac6bb13b5570b24179",function(){e.__setCursorPosition=function(e,t){var i=e.createTextRange();i.collapse(!0);i.moveStart("character",t.start);i.moveEnd("character",t.end-t.start);i.select();e.focus()};e.__getCursorPosition=function(e){var t=document.selection.createRange();var i=e.createTextRange();i.moveToBookmark(t.getBookmark());var n=e.createTextRange();n.collapse(!0);n.setEndPoint("EndToStart",i);var a=n.text.length;return{start:a,end:a+t.text.length}}});return e},"4eaf84bc0111a08b63126ab7bbd3ad89","b5a2ea56adb918d7d443468b3a9b53d1","5bd21216eb7851bb48d84acf022ca85f");I$("1f56e2345bdd3144a9cc346df892e687",function(e,t,i,n,a,o,s,r,_){var c={};o._$cursor=c._$cursor=function(e,n){e=t._$get(e);if(!e)return{start:0,end:0};if(i._$isNumber(n))n={start:n,end:n};if(null!=n){if(null==n.end)n.end=n.start||0;a.__setCursorPosition(e,n)}else n=a.__getCursorPosition(e);return n};o._$coordinate=c._$coordinate=function(e){e=t._$get(e);if(!e)return{top:0,left:0,width:0,height:0};else return a.__getCursorPXPosition(e)};n._$merge(c);if(!0)e.copy(e.P("nej.e"),o);return o},"c27e07105db4b2613e9811a6e5ceab90","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","c2028585a730a88452fc7218e9c1ddab","bf0b09ad16f35a4b05eee20ae88d099f");I$("7fc77aaa1e6d8c27765ee05936030c92",'<textarea name="ntp" id="#<photoBody>">\n  <div class="m-modal m-modal-confirm m-modal-confirmphoto">\n      <div class="modal_dialog">\n          <div class="modal_hd">\n              <h3 class="modal_title">发送图片</h3>\n          </div>\n          <div class="modal_bd">\n              <div class="content j-flag"></div>\n          </div>\n          <div class="modal_ft">\n              <button class="u-btn ok j-flag">发送</button>\n              <button class="u-btn-cancel cancel j-flag">取消</button>\n          </div>\n      </div>\n  </div>\n</textarea>\n<textarea name="jst" id="#<photoList>">\n    {list photos as x}\n    {if x_length>1}\n    <div class="photo-wrap" style="background-image:url(${x.url})">&nbsp;</div>\n    {else}\n    <div class="photo-wrap"><img src="${x.url}"/></div>\n    {/if}\n    {/list}\n</textarea>');I$("c5e46de0cd843027825b03271306606d",function(e,t,i,n,a,o,s,r,_,c){
_._$$PhotoViewer=e._$klass();c=_._$$PhotoViewer._$extend(n._$$Abstract);c.__reset=function(e){this.__super(e);this.__doInitDomEvent([[this.__nok,"click",this.__onOK._$bind(this)],[this.__ncc,"click",this.__onCC._$bind(this)]]);this.__scrollbar=s._$$Scrollbar._$allocate({parent:this.__lbox});this.__list=e.photos||[];o._$render(this.__lbox,this.__seed_list,{photos:this.__list});this.__doUpdateClass(this.__list.length);this.__nok.focus()};c.__destroy=function(){this.__scrollbar._$recycle();this.__lbox.innerHTML="";delete this.__scrollbar;delete this.__list;this.__super()};c.__initXGui=function(){var e=a._$parseUITemplate(r);return function(){this.__seed_list=e.photoList;this.__seed_html=e.photoBody}}();c.__initNode=function(){this.__super();var e=t._$getByClassName(this.__body,"j-flag");this.__lbox=e[0];this.__nok=e[1];this.__ncc=e[2]};c.__doUpdateClass=function(){var e=["z-second","z-more"];return function(i){var n="";if(2==i)n=e[0];else if(i>2)n=e[1];t._$replaceClassName(this.__lbox.parentNode,e.join(" "),n)}}();c.__onOK=function(){this._$dispatchEvent("onok",{data:this.__list});this._$recycle()};c.__onCC=function(){this._$dispatchEvent("oncc");this._$recycle()};_._$preview=function(e){var t={parent:document.body};_._$$PhotoViewer._$allocate(i._$merge(t,e))}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","d4f78b74ede76946bfa040af6decdc10","7fc77aaa1e6d8c27765ee05936030c92");I$("ff35d9d76aae1ab7c01573e1cc1f8d2d",'<textarea name="ntp" id="#<mdlBody>">\n<div class="m-modal m-modal-confirm m-modal-filetrans">\n    <div class="modal_dialog">\n        <div class="modal_hd">\n            <h3 class="modal_title">发送文件</h3>\n        </div>\n        <div class="modal_bd">\n\t\t\t<ul class="file-list"></ul>\n        </div>\n        <div class="modal_ft">\n            <button class="u-btn ok">确定</button>\n            <button class="u-btn u-btn-cancel cancel">取消</button>\n            <div class="u-error">\n            \t<span class="error-msg"></span>\n            </div>\n        </div>\n    </div>\n</div>\n</textarea>\n\n<textarea name="jst" id="#<fileList>">\n\t{list files as file}\n\t\t<li class="file-item {if file.overSize || file.isZero}z-disabled{/if}">\n\t\t\t<i class="u-icon-${file.name|spliceSuffix} icon"></i>\n\t\t\t<span class="name">${file.name}</span>\n\t\t\t<span class="size">${file.size|fileSizeFormat}</span>\n            {if file.overSize}\n                <span class="file-error">大于100MB无法发送</span>\n            {elseif file.isZero}\n                <span class="file-error">空文件无法发送</span>\n            {/if}\n\t\t</li>\n\t{/list}\n</textarea>\n');I$("23b47283085e9c84c6144d7d366a9a6a",function(e,t,i,n,a,o,s,r,_,c,d){c._$$FileModal=e._$klass();d=c._$$FileModal._$extend(a._$$Abstract);d.__init=function(e){this.__super(e);r._$extend({fileSizeFormat:o._$fileSizeFormat,spliceSuffix:o._$spliceSuffix})};d.__reset=function(e){this.__super(e);this.__data=n._$merge({max:9,files:[],isValid:!1},e);this.__data.originFiles=this.__data.files;this.__data.files=Array.prototype.slice.call(this.__data.files);var t=this.__data.files,i=this.__data.max;if(t.length>i)t.splice(i);n._$forEach(t,function(e){if("INPUT"==e.tagName&&e.value)e.name=e.value.match(/[^\/\\]+$/);e.isZero=e.size<=0?!0:!1;e.overSize=e.size>100*Math.pow(1024,2)?!0:!1});this.__onCanSendFile({result:e.canSend});this.__doInitDomEvent([[this.__nok,"click",this.__onOK._$bind(this)],[this.__ncancel,"click",this.__onCancel._$bind(this)]]);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this));this.__nok.focus();this.__render()};d.__destroy=function(){this.__super()};d.__initXGui=function(){var e=s._$parseUITemplate(_);return function(){this.__seed_html=e.mdlBody;this.__list_html=e.fileList}}();d.__initNode=function(){this.__super();this.__ntlt=t._$getByClassName(this.__body,"modal_title")[0];this.__nok=t._$getByClassName(this.__body,"ok")[0];this.__ncancel=t._$getByClassName(this.__body,"cancel")[0];this.__nlist=t._$getByClassName(this.__body,"file-list")[0];this.__nerror=t._$getByClassName(this.__body,"u-error")[0]};d.__render=function(){r._$render(this.__nlist,this.__list_html,this.__data)};d.__onOK=function(e){if(this.__data.isValid){var t=this.__getValidateFiles();this._$dispatchEvent("onok",e,t);this._$recycle()}};d.__onCancel=function(e){this._$dispatchEvent("oncancel",e);this._$recycle()};d.__onCanSendFile=function(e){this.__data.canSend=e.result;this.__validate()};d.__getValidateFiles=function(){var e=[];n._$forEach(this.__data.files,function(t){if(!t.overSize&&!t.isZero)e.push(t)});return e};d.__validate=function(){if(this.__getValidateFiles().length>0&&this.__data.canSend){this.__data.isValid=!0;this._$enableOk()}else{this.__data.isValid=!1;this._$disableOk()}var e="";if(0==this.__data.canSend)e="您同一时间段发送文件过多，请稍后再试";else if(this.__data.originFiles.length>this.__data.max)e="一次仅可发送前"+this.__data.max+"个文件";this.__nerror.innerText=e};d._$disableOk=function(){t._$attr(this.__nok,"disabled",!0);t._$addClassName(this.__nok,"z-disabled");t._$style(this.__nok,{color:"#fff"})};d._$enableOk=function(){this.__nok.removeAttribute("disabled");t._$delClassName(this.__nok,"z-disabled");t._$style(this.__nok,{color:"#fff"})}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","7f31a069b85883a87d9e7be65faf8ba9","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","ff35d9d76aae1ab7c01573e1cc1f8d2d");I$("312e01a6925afa3148c1190d72498aeb",function(e,t,i,n,a,o,s,r,_,c){_._$$FileTransfer=e._$klass();c=_._$$FileTransfer._$extend(a._$$Abstract);c.__init=function(){this.__super()};c.__reset=function(e){this.__super(e);this.__fopt=i._$merge({node:null,accept:"*",multiple:!1,onchange:this.__onFileSelect._$bind(this)},e);if(this.__fopt.node){this.__fileSel=o._$bind(this.__fopt.node,this.__fopt);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this))}};c.__destroy=function(){if(this.__fileSel)this.__fileSel._$recycle();this.__super()};c.__onFileSelect=function(e){this.__form=e.form;var i=t._$get(e.id),n=i.files;if(void 0===n){n=[];n.push(i)}this.__fModal=s._$$FileModal._$allocate({parent:document.body,canSend:this.__canSend,files:n,onok:this.__onOk._$bind(this),oncancel:this.__onCancel._$bind(this)});this.__canSend&&delete this.__canSend},c.__onOk=function(e,t){this._$dispatchEvent("onsend",t);this.__form.reset()};c.__onCancel=function(){this.__form.reset()};c.__checkCanSendFile=function(){this.__timestamp=i._$uniqueID();r._$checkCanSendFile({timestamp:this.__timestamp})};c.__onCanSendFile=function(e){this.__canSend=!!e.result;if(this.__fModal)this.__fModal._$dispatchEvent("oncansendfile",{result:this.__canSend})}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","d1bf8daf5a41ea1e86db380d4fa07f12","b7aac098ae4b6dc4338e9db07c9a613d","23b47283085e9c84c6144d7d366a9a6a","1af021d5c158865e7dd70e474d81c2ea");I$("77ddc975b19b8fb6445c7b08a908fa21",'<textarea name="ntp" id="#<cnt>">\n  <div class="f-dn">\n  \t<div class="j-flag portrait_cnt"></div>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<list>">\n\t<div class="portrait_list f-clr j-list">\n\t\t{list plist as p}\n\t\t<!-- 行开始 -->\n\t\t{if (p_index + 1) % col === 1}\n\t\t<ul class="f-clr">\n\t\t{/if}\n\t\t<!-- 行开始end -->\n\t\t\t<li><i class="portrait_img portrait_icon_${p.file|reduceExt}" data-src="${prefix}${p.file}" data-id="${p.id}" title="${p.tag}" alt="${p.tag}"></i></li>\n\t\t<!-- 行结束 -->\n\t\t{if p_index % col === col-1}\n\t\t</ul>\n\t\t{/if}\n\t\t<!-- 行结束end -->\n\t\t{/list}\n\t</div>\n</textarea>');I$("aa1a926fe7da20dd0f142521c5fcd3df",{plist:[{id:"emoticon_emoji_01",tag:"[可爱]",file:"emoji_01.png"},{id:"emoticon_emoji_0",tag:"[大笑]",file:"emoji_00.png"},{id:"emoticon_emoji_02",tag:"[色]",file:"emoji_02.png"},{id:"emoticon_emoji_03",tag:"[嘘]",file:"emoji_03.png"},{id:"emoticon_emoji_04",tag:"[亲]",file:"emoji_04.png"},{id:"emoticon_emoji_05",tag:"[呆]",file:"emoji_05.png"},{id:"emoticon_emoji_06",tag:"[口水]",file:"emoji_06.png"},{id:"emoticon_emoji_145",tag:"[汗]",file:"emoji_145.png"},{id:"emoticon_emoji_07",tag:"[呲牙]",file:"emoji_07.png"},{id:"emoticon_emoji_08",tag:"[鬼脸]",file:"emoji_08.png"},{id:"emoticon_emoji_09",tag:"[害羞]",file:"emoji_09.png"},{id:"emoticon_emoji_10",tag:"[偷笑]",file:"emoji_10.png"},{id:"emoticon_emoji_11",tag:"[调皮]",file:"emoji_11.png"},{id:"emoticon_emoji_12",tag:"[可怜]",file:"emoji_12.png"},{id:"emoticon_emoji_13",tag:"[敲]",file:"emoji_13.png"},{id:"emoticon_emoji_14",tag:"[惊讶]",file:"emoji_14.png"},{id:"emoticon_emoji_15",tag:"[流感]",file:"emoji_15.png"},{id:"emoticon_emoji_16",tag:"[委屈]",file:"emoji_16.png"},{id:"emoticon_emoji_17",tag:"[流泪]",file:"emoji_17.png"},{id:"emoticon_emoji_18",tag:"[嚎哭]",file:"emoji_18.png"},{id:"emoticon_emoji_19",tag:"[惊恐]",file:"emoji_19.png"},{id:"emoticon_emoji_20",tag:"[怒]",file:"emoji_20.png"},{id:"emoticon_emoji_21",tag:"[酷]",file:"emoji_21.png"},{id:"emoticon_emoji_22",tag:"[不说]",file:"emoji_22.png"},{id:"emoticon_emoji_23",tag:"[鄙视]",file:"emoji_23.png"},{id:"emoticon_emoji_24",tag:"[阿弥陀佛]",file:"emoji_24.png"},{id:"emoticon_emoji_25",tag:"[奸笑]",file:"emoji_25.png"},{id:"emoticon_emoji_26",tag:"[睡着]",file:"emoji_26.png"},{id:"emoticon_emoji_27",tag:"[口罩]",file:"emoji_27.png"},{id:"emoticon_emoji_28",tag:"[生气]",file:"emoji_28.png"},{id:"emoticon_emoji_29",tag:"[抠鼻孔]",file:"emoji_29.png"},{id:"emoticon_emoji_30",tag:"[疑问]",file:"emoji_30.png"},{id:"emoticon_emoji_31",tag:"[怒骂]",file:"emoji_31.png"},{id:"emoticon_emoji_32",tag:"[晕]",file:"emoji_32.png"},{id:"emoticon_emoji_33",tag:"[呕吐]",file:"emoji_33.png"},{id:"emoticon_emoji_160",tag:"[拜一拜]",file:"emoji_160.png"},{id:"emoticon_emoji_161",tag:"[惊喜]",file:"emoji_161.png"},{id:"emoticon_emoji_162",tag:"[流汗]",file:"emoji_162.png"
},{id:"emoticon_emoji_163",tag:"[卖萌]",file:"emoji_163.png"},{id:"emoticon_emoji_164",tag:"[默契眨眼]",file:"emoji_164.png"},{id:"emoticon_emoji_165",tag:"[烧香拜佛]",file:"emoji_165.png"},{id:"emoticon_emoji_166",tag:"[晚安]",file:"emoji_166.png"},{id:"emoticon_emoji_116",tag:"[撇嘴]",file:"new_emoji_01.png"},{id:"emoticon_emoji_117",tag:"[难过]",file:"1f641.png"},{id:"emoticon_emoji_118",tag:"[冷汗]",file:"1f628.png"},{id:"emoticon_emoji_119",tag:"[抓狂]",file:"1f629.png"},{id:"emoticon_emoji_120",tag:"[傲慢]",file:"1f615.png"},{id:"emoticon_emoji_121",tag:"[困]",file:"1f62a.png"},{id:"emoticon_emoji_123",tag:"[疯了]",file:"1f616.png"},{id:"emoticon_emoji_124",tag:"[白眼]",file:"new_emoji_02.png"},{id:"emoticon_emoji_125",tag:"[衰]",file:"new_emoji_05.png"},{id:"emoticon_emoji_126",tag:"[再见]",file:"new_emoji_06.png"},{id:"emoticon_emoji_127",tag:"[哼哼]",file:"1f63e.png"},{id:"emoticon_emoji_129",tag:"[饥饿]",file:"new_emoji_03.png"},{id:"emoticon_emoji_143",tag:"[飞吻]",file:"new_emoji_10.png"},{id:"emoticon_emoji_144",tag:"[微笑]",file:"1f642.png"},{id:"emoticon_emoji_145",tag:"[泪中带笑]",file:"new_emoji_13.png"},{id:"emoticon_emoji_146",tag:"[吐舌头]",file:"1f61d.png"},{id:"emoticon_emoji_147",tag:"[忧郁]",file:"new_emoji_11.png"},{id:"emoticon_emoji_148",tag:"[尴尬]",file:"1f630.png"},{id:"emoticon_emoji_149",tag:"[舒适]",file:"1f60c.png"},{id:"emoticon_emoji_150",tag:"[不悦]",file:"1f612.png"},{id:"emoticon_emoji_155",tag:"[拍掌]",file:"new_emoji_09.png"},{id:"emoticon_emoji_156",tag:"[糗大了]",file:"new_emoji_07.png"},{id:"emoticon_emoji_122",tag:"[奋斗]",file:"1f4aa-1f3fc.png"},{id:"emoticon_emoji_130",tag:"[乒乓]",file:"new_emoji_23.png"},{id:"emoticon_emoji_131",tag:"[猪头]",file:"1f437.png"},{id:"emoticon_emoji_132",tag:"[玫瑰]",file:"new_emoji_25.png"},{id:"emoticon_emoji_133",tag:"[凋谢]",file:"new_emoji_24.png"},{id:"emoticon_emoji_134",tag:"[瓢虫]",file:"1f41e.png"},{id:"emoticon_emoji_135",tag:"[月亮]",file:"new_emoji_30.png"},{id:"emoticon_emoji_136",tag:"[礼物]",file:"new_emoji_28.png"},{id:"emoticon_emoji_137",tag:"[拥抱]",file:"new_emoji_08.png"},{id:"emoticon_emoji_138",tag:"[抱拳]",file:"new_emoji_18.png"},{id:"emoticon_emoji_139",tag:"[勾引]",file:"new_emoji_19.png"},{id:"emoticon_emoji_140",tag:"[差劲]",file:"new_emoji_20.png"},{id:"emoticon_emoji_141",tag:"[爱你]",file:"new_emoji_21.png"},{id:"emoticon_emoji_142",tag:"[NO]",file:"new_emoji_22.png"},{id:"emoticon_emoji_151",tag:"[幽灵]",file:"1f47b.png"},{id:"emoticon_emoji_152",tag:"[礼盒]",file:"1f49d.png"},{id:"emoticon_emoji_153",tag:"[拜托]",file:"1f64f-1f3fc.png"},{id:"emoticon_emoji_154",tag:"[气球]",file:"1f388.png"},{id:"emoticon_emoji_34",tag:"[强]",file:"emoji_34.png"},{id:"emoticon_emoji_35",tag:"[弱]",file:"emoji_35.png"},{id:"emoticon_emoji_36",tag:"[OK]",file:"emoji_36.png"},{id:"emoticon_emoji_37",tag:"[拳头]",file:"emoji_37.png"},{id:"emoticon_emoji_38",tag:"[胜利]",file:"emoji_38.png"},{id:"emoticon_emoji_39",tag:"[鼓掌]",file:"emoji_39.png"},{id:"emoticon_emoji_167",tag:"[握手]",file:"emoji_167.png"},{id:"emoticon_emoji_40",tag:"[发怒]",file:"emoji_40.png"},{id:"emoticon_emoji_41",tag:"[骷髅]",file:"emoji_41.png"},{id:"emoticon_emoji_42",tag:"[便便]",file:"emoji_42.png"},{id:"emoticon_emoji_43",tag:"[火]",file:"emoji_43.png"},{id:"emoticon_emoji_44",tag:"[溜]",file:"emoji_44.png"},{id:"emoticon_emoji_45",tag:"[爱心]",file:"emoji_45.png"},{id:"emoticon_emoji_46",tag:"[心碎]",file:"emoji_46.png"},{id:"emoticon_emoji_47",tag:"[钟情]",file:"emoji_47.png"},{id:"emoticon_emoji_48",tag:"[唇]",file:"emoji_48.png"},{id:"emoticon_emoji_49",tag:"[戒指]",file:"emoji_49.png"},{id:"emoticon_emoji_50",tag:"[钻石]",file:"emoji_50.png"},{id:"emoticon_emoji_51",tag:"[太阳]",file:"emoji_51.png"},{id:"emoticon_emoji_52",tag:"[有时晴]",file:"emoji_52.png"},{id:"emoticon_emoji_53",tag:"[多云]",file:"emoji_53.png"},{id:"emoticon_emoji_54",tag:"[雷]",file:"emoji_54.png"},{id:"emoticon_emoji_55",tag:"[雨]",file:"emoji_55.png"},{id:"emoticon_emoji_56",tag:"[雪花]",file:"emoji_56.png"},{id:"emoticon_emoji_57",tag:"[爱人]",file:"emoji_57.png"},{id:"emoticon_emoji_58",tag:"[帽子]",file:"emoji_58.png"},{id:"emoticon_emoji_59",tag:"[皇冠]",file:"emoji_59.png"},{id:"emoticon_emoji_60",tag:"[篮球]",file:"emoji_60.png"},{id:"emoticon_emoji_61",tag:"[足球]",file:"emoji_61.png"},{id:"emoticon_emoji_62",tag:"[垒球]",file:"emoji_62.png"},{id:"emoticon_emoji_63",tag:"[网球]",file:"emoji_63.png"},{id:"emoticon_emoji_64",tag:"[台球]",file:"emoji_64.png"},{id:"emoticon_emoji_65",tag:"[咖啡]",file:"emoji_65.png"},{id:"emoticon_emoji_66",tag:"[啤酒]",file:"emoji_66.png"},{id:"emoticon_emoji_67",tag:"[干杯]",file:"emoji_67.png"},{id:"emoticon_emoji_68",tag:"[柠檬汁]",file:"emoji_68.png"},{id:"emoticon_emoji_69",tag:"[餐具]",file:"emoji_69.png"},{id:"emoticon_emoji_70",tag:"[汉堡]",file:"emoji_70.png"},{id:"emoticon_emoji_71",tag:"[鸡腿]",file:"emoji_71.png"},{id:"emoticon_emoji_72",tag:"[面条]",file:"emoji_72.png"},{id:"emoticon_emoji_73",tag:"[冰淇淋]",file:"emoji_73.png"},{id:"emoticon_emoji_74",tag:"[沙冰]",file:"emoji_74.png"},{id:"emoticon_emoji_75",tag:"[生日蛋糕]",file:"emoji_75.png"},{id:"emoticon_emoji_76",tag:"[蛋糕]",file:"emoji_76.png"},{id:"emoticon_emoji_77",tag:"[糖果]",file:"emoji_77.png"},{id:"emoticon_emoji_78",tag:"[葡萄]",file:"emoji_78.png"},{id:"emoticon_emoji_79",tag:"[西瓜]",file:"emoji_79.png"},{id:"emoticon_emoji_80",tag:"[光碟]",file:"emoji_80.png"},{id:"emoticon_emoji_81",tag:"[手机]",file:"emoji_81.png"},{id:"emoticon_emoji_82",tag:"[电话]",file:"emoji_82.png"},{id:"emoticon_emoji_83",tag:"[电视]",file:"emoji_83.png"},{id:"emoticon_emoji_84",tag:"[声音开启]",file:"emoji_84.png"},{id:"emoticon_emoji_85",tag:"[声音关闭]",file:"emoji_85.png"},{id:"emoticon_emoji_86",tag:"[铃铛]",file:"emoji_86.png"},{id:"emoticon_emoji_87",tag:"[锁头]",file:"emoji_87.png"},{id:"emoticon_emoji_88",tag:"[放大镜]",file:"emoji_88.png"},{id:"emoticon_emoji_89",tag:"[灯泡]",file:"emoji_89.png"},{id:"emoticon_emoji_90",tag:"[锤头]",file:"emoji_90.png"},{id:"emoticon_emoji_91",tag:"[烟]",file:"emoji_91.png"},{id:"emoticon_emoji_92",tag:"[炸弹]",file:"emoji_92.png"},{id:"emoticon_emoji_93",tag:"[枪]",file:"emoji_93.png"},{id:"emoticon_emoji_94",tag:"[刀]",file:"emoji_94.png"},{id:"emoticon_emoji_95",tag:"[药]",file:"emoji_95.png"},{id:"emoticon_emoji_96",tag:"[打针]",file:"emoji_96.png"},{id:"emoticon_emoji_97",tag:"[钱袋]",file:"emoji_97.png"},{id:"emoticon_emoji_98",tag:"[钞票]",file:"emoji_98.png"},{id:"emoticon_emoji_99",tag:"[银行卡]",file:"emoji_99.png"},{id:"emoticon_emoji_100",tag:"[手柄]",file:"emoji_100.png"},{id:"emoticon_emoji_101",tag:"[麻将]",file:"emoji_101.png"},{id:"emoticon_emoji_102",tag:"[调色板]",file:"emoji_102.png"},{id:"emoticon_emoji_103",tag:"[电影]",file:"emoji_103.png"},{id:"emoticon_emoji_104",tag:"[麦克风]",file:"emoji_104.png"},{id:"emoticon_emoji_105",tag:"[耳机]",file:"emoji_105.png"},{id:"emoticon_emoji_106",tag:"[音乐]",file:"emoji_106.png"},{id:"emoticon_emoji_107",tag:"[吉他]",file:"emoji_107.png"},{id:"emoticon_emoji_108",tag:"[火箭]",file:"emoji_108.png"},{id:"emoticon_emoji_109",tag:"[飞机]",file:"emoji_109.png"},{id:"emoticon_emoji_110",tag:"[火车]",file:"emoji_110.png"},{id:"emoticon_emoji_111",tag:"[公交]",file:"emoji_111.png"},{id:"emoticon_emoji_112",tag:"[轿车]",file:"emoji_112.png"},{id:"emoticon_emoji_113",tag:"[出租车]",file:"emoji_113.png"},{id:"emoticon_emoji_114",tag:"[警车]",file:"emoji_114.png"},{id:"emoticon_emoji_115",tag:"[自行车]",file:"emoji_115.png"}],pmap:{emoticon_emoji_01:{tag:"[可爱]",file:"emoji_01.png"},emoticon_emoji_00:{tag:"[大笑]",file:"emoji_00.png"},emoticon_emoji_02:{tag:"[色]",file:"emoji_02.png"},emoticon_emoji_03:{tag:"[嘘]",file:"emoji_03.png"},emoticon_emoji_04:{tag:"[亲]",file:"emoji_04.png"},emoticon_emoji_05:{tag:"[呆]",file:"emoji_05.png"},emoticon_emoji_06:{tag:"[口水]",file:"emoji_06.png"},emoticon_emoji_145:{tag:"[汗]",file:"emoji_145.png"},emoticon_emoji_07:{tag:"[呲牙]",file:"emoji_07.png"},emoticon_emoji_08:{tag:"[鬼脸]",file:"emoji_08.png"},emoticon_emoji_09:{tag:"[害羞]",file:"emoji_09.png"},emoticon_emoji_10:{tag:"[偷笑]",file:"emoji_10.png"},emoticon_emoji_11:{tag:"[调皮]",file:"emoji_11.png"},emoticon_emoji_12:{tag:"[可怜]",file:"emoji_12.png"},emoticon_emoji_13:{tag:"[敲]",file:"emoji_13.png"},emoticon_emoji_14:{tag:"[惊讶]",file:"emoji_14.png"},emoticon_emoji_15:{tag:"[流感]",file:"emoji_15.png"},emoticon_emoji_16:{tag:"[委屈]",file:"emoji_16.png"},emoticon_emoji_17:{tag:"[流泪]",file:"emoji_17.png"},emoticon_emoji_18:{tag:"[嚎哭]",file:"emoji_18.png"},emoticon_emoji_19:{tag:"[惊恐]",file:"emoji_19.png"},emoticon_emoji_20:{tag:"[怒]",file:"emoji_20.png"},emoticon_emoji_21:{tag:"[酷]",file:"emoji_21.png"},emoticon_emoji_22:{tag:"[不说]",file:"emoji_22.png"},emoticon_emoji_23:{tag:"[鄙视]",file:"emoji_23.png"},emoticon_emoji_24:{tag:"[阿弥陀佛]",file:"emoji_24.png"},emoticon_emoji_25:{tag:"[奸笑]",file:"emoji_25.png"},emoticon_emoji_26:{tag:"[睡着]",file:"emoji_26.png"},emoticon_emoji_27:{tag:"[口罩]",file:"emoji_27.png"},emoticon_emoji_28:{tag:"[生气]",file:"emoji_28.png"},emoticon_emoji_29:{tag:"[抠鼻孔]",file:"emoji_29.png"},emoticon_emoji_30:{tag:"[疑问]",file:"emoji_30.png"},emoticon_emoji_31:{tag:"[怒骂]",file:"emoji_31.png"},emoticon_emoji_32:{tag:"[晕]",file:"emoji_32.png"},emoticon_emoji_33:{tag:"[呕吐]",file:"emoji_33.png"},emoticon_emoji_160:{tag:"[拜一拜]",file:"emoji_160.png"},emoticon_emoji_161:{tag:"[惊喜]",file:"emoji_161.png"},emoticon_emoji_162:{tag:"[流汗]",file:"emoji_162.png"},emoticon_emoji_163:{tag:"[卖萌]",file:"emoji_163.png"},emoticon_emoji_164:{tag:"[默契眨眼]",file:"emoji_164.png"},emoticon_emoji_165:{tag:"[烧香拜佛]",file:"emoji_165.png"},emoticon_emoji_166:{tag:"[晚安]",file:"emoji_166.png"},emoticon_emoji_34:{tag:"[强]",file:"emoji_34.png"},emoticon_emoji_35:{tag:"[弱]",file:"emoji_35.png"},emoticon_emoji_36:{tag:"[OK]",file:"emoji_36.png"},emoticon_emoji_37:{tag:"[拳头]",file:"emoji_37.png"},emoticon_emoji_38:{tag:"[胜利]",file:"emoji_38.png"},emoticon_emoji_39:{tag:"[鼓掌]",file:"emoji_39.png"},emoticon_emoji_200:{tag:"[握手]",file:"emoji_200.png"},emoticon_emoji_40:{tag:"[发怒]",file:"emoji_40.png"},emoticon_emoji_41:{tag:"[骷髅]",file:"emoji_41.png"},emoticon_emoji_42:{tag:"[便便]",file:"emoji_42.png"},emoticon_emoji_43:{tag:"[火]",file:"emoji_43.png"},emoticon_emoji_44:{tag:"[溜]",file:"emoji_44.png"
},emoticon_emoji_45:{tag:"[爱心]",file:"emoji_45.png"},emoticon_emoji_46:{tag:"[心碎]",file:"emoji_46.png"},emoticon_emoji_47:{tag:"[钟情]",file:"emoji_47.png"},emoticon_emoji_48:{tag:"[唇]",file:"emoji_48.png"},emoticon_emoji_49:{tag:"[戒指]",file:"emoji_49.png"},emoticon_emoji_50:{tag:"[钻石]",file:"emoji_50.png"},emoticon_emoji_51:{tag:"[太阳]",file:"emoji_51.png"},emoticon_emoji_52:{tag:"[有时晴]",file:"emoji_52.png"},emoticon_emoji_53:{tag:"[多云]",file:"emoji_53.png"},emoticon_emoji_54:{tag:"[雷]",file:"emoji_54.png"},emoticon_emoji_55:{tag:"[雨]",file:"emoji_55.png"},emoticon_emoji_56:{tag:"[雪花]",file:"emoji_56.png"},emoticon_emoji_57:{tag:"[爱人]",file:"emoji_57.png"},emoticon_emoji_58:{tag:"[帽子]",file:"emoji_58.png"},emoticon_emoji_59:{tag:"[皇冠]",file:"emoji_59.png"},emoticon_emoji_60:{tag:"[篮球]",file:"emoji_60.png"},emoticon_emoji_61:{tag:"[足球]",file:"emoji_61.png"},emoticon_emoji_62:{tag:"[垒球]",file:"emoji_62.png"},emoticon_emoji_63:{tag:"[网球]",file:"emoji_63.png"},emoticon_emoji_64:{tag:"[台球]",file:"emoji_64.png"},emoticon_emoji_65:{tag:"[咖啡]",file:"emoji_65.png"},emoticon_emoji_66:{tag:"[啤酒]",file:"emoji_66.png"},emoticon_emoji_67:{tag:"[干杯]",file:"emoji_67.png"},emoticon_emoji_68:{tag:"[柠檬汁]",file:"emoji_68.png"},emoticon_emoji_69:{tag:"[餐具]",file:"emoji_69.png"},emoticon_emoji_70:{tag:"[汉堡]",file:"emoji_70.png"},emoticon_emoji_71:{tag:"[鸡腿]",file:"emoji_71.png"},emoticon_emoji_72:{tag:"[面条]",file:"emoji_72.png"},emoticon_emoji_73:{tag:"[冰淇淋]",file:"emoji_73.png"},emoticon_emoji_74:{tag:"[沙冰]",file:"emoji_74.png"},emoticon_emoji_75:{tag:"[生日蛋糕]",file:"emoji_75.png"},emoticon_emoji_76:{tag:"[蛋糕]",file:"emoji_76.png"},emoticon_emoji_77:{tag:"[糖果]",file:"emoji_77.png"},emoticon_emoji_78:{tag:"[葡萄]",file:"emoji_78.png"},emoticon_emoji_79:{tag:"[西瓜]",file:"emoji_79.png"},emoticon_emoji_80:{tag:"[光碟]",file:"emoji_80.png"},emoticon_emoji_81:{tag:"[手机]",file:"emoji_81.png"},emoticon_emoji_82:{tag:"[电话]",file:"emoji_82.png"},emoticon_emoji_83:{tag:"[电视]",file:"emoji_83.png"},emoticon_emoji_84:{tag:"[声音开启]",file:"emoji_84.png"},emoticon_emoji_85:{tag:"[声音关闭]",file:"emoji_85.png"},emoticon_emoji_86:{tag:"[铃铛]",file:"emoji_86.png"},emoticon_emoji_87:{tag:"[锁头]",file:"emoji_87.png"},emoticon_emoji_88:{tag:"[放大镜]",file:"emoji_88.png"},emoticon_emoji_89:{tag:"[灯泡]",file:"emoji_89.png"},emoticon_emoji_90:{tag:"[锤头]",file:"emoji_90.png"},emoticon_emoji_91:{tag:"[烟]",file:"emoji_91.png"},emoticon_emoji_92:{tag:"[炸弹]",file:"emoji_92.png"},emoticon_emoji_93:{tag:"[枪]",file:"emoji_93.png"},emoticon_emoji_94:{tag:"[刀]",file:"emoji_94.png"},emoticon_emoji_95:{tag:"[药]",file:"emoji_95.png"},emoticon_emoji_96:{tag:"[打针]",file:"emoji_96.png"},emoticon_emoji_97:{tag:"[钱袋]",file:"emoji_97.png"},emoticon_emoji_98:{tag:"[钞票]",file:"emoji_98.png"},emoticon_emoji_99:{tag:"[银行卡]",file:"emoji_99.png"},emoticon_emoji_100:{tag:"[手柄]",file:"emoji_100.png"},emoticon_emoji_101:{tag:"[麻将]",file:"emoji_101.png"},emoticon_emoji_102:{tag:"[调色板]",file:"emoji_102.png"},emoticon_emoji_103:{tag:"[电影]",file:"emoji_103.png"},emoticon_emoji_104:{tag:"[麦克风]",file:"emoji_104.png"},emoticon_emoji_105:{tag:"[耳机]",file:"emoji_105.png"},emoticon_emoji_106:{tag:"[音乐]",file:"emoji_106.png"},emoticon_emoji_107:{tag:"[吉他]",file:"emoji_107.png"},emoticon_emoji_108:{tag:"[火箭]",file:"emoji_108.png"},emoticon_emoji_109:{tag:"[飞机]",file:"emoji_109.png"},emoticon_emoji_110:{tag:"[火车]",file:"emoji_110.png"},emoticon_emoji_111:{tag:"[公交]",file:"emoji_111.png"},emoticon_emoji_112:{tag:"[轿车]",file:"emoji_112.png"},emoticon_emoji_113:{tag:"[出租车]",file:"emoji_113.png"},emoticon_emoji_114:{tag:"[警车]",file:"emoji_114.png"},emoticon_emoji_115:{tag:"[自行车]",file:"emoji_115.png"},emoticon_emoji_116:{tag:"[撇嘴]",file:"new_emoji_01.png"},emoticon_emoji_117:{tag:"[难过]",file:"1f641.png"},emoticon_emoji_118:{tag:"[冷汗]",file:"1f628.png"},emoticon_emoji_119:{tag:"[抓狂]",file:"1f629.png"},emoticon_emoji_120:{tag:"[傲慢]",file:"1f615.png"},emoticon_emoji_121:{tag:"[困]",file:"1f62a.png"},emoticon_emoji_122:{tag:"[疯了]",file:"1f616.png"},emoticon_emoji_123:{tag:"[奋斗]",file:"1f4aa-1f3fc.png"},emoticon_emoji_124:{tag:"[白眼]",file:"new_emoji_02.png"},emoticon_emoji_125:{tag:"[衰]",file:"new_emoji_05.png"},emoticon_emoji_126:{tag:"[再见]",file:"new_emoji_06.png"},emoticon_emoji_127:{tag:"[哼哼]",file:"1f63e.png"},emoticon_emoji_128:{tag:"[阴险]",file:"1f608.png"},emoticon_emoji_129:{tag:"[饥饿]",file:"new_emoji_03.png"},emoticon_emoji_130:{tag:"[乒乓]",file:"new_emoji_23.png"},emoticon_emoji_131:{tag:"[猪头]",file:"1f437.png"},emoticon_emoji_132:{tag:"[玫瑰]",file:"new_emoji_25.png"},emoticon_emoji_133:{tag:"[凋谢]",file:"new_emoji_24.png"},emoticon_emoji_134:{tag:"[瓢虫]",file:"1f41e.png"},emoticon_emoji_135:{tag:"[月亮]",file:"new_emoji_30.png"},emoticon_emoji_136:{tag:"[礼物]",file:"new_emoji_28.png"},emoticon_emoji_137:{tag:"[拥抱]",file:"new_emoji_08.png"},emoticon_emoji_138:{tag:"[抱拳]",file:"new_emoji_18.png"},emoticon_emoji_139:{tag:"[勾引]",file:"new_emoji_19.png"},emoticon_emoji_140:{tag:"[差劲]",file:"new_emoji_20.png"},emoticon_emoji_141:{tag:"[爱你]",file:"new_emoji_21.png"},emoticon_emoji_142:{tag:"[NO]",file:"new_emoji_22.png"},emoticon_emoji_143:{tag:"[飞吻]",file:"new_emoji_10.png"},emoticon_emoji_144:{tag:"[微笑]",file:"1f642.png"},emoticon_emoji_146:{tag:"[吐舌头]",file:"1f61d.png"},emoticon_emoji_147:{tag:"[忧郁]",file:"new_emoji_11.png"},emoticon_emoji_148:{tag:"[尴尬]",file:"1f630.png"},emoticon_emoji_149:{tag:"[舒适]",file:"1f60c.png"},emoticon_emoji_150:{tag:"[不悦]",file:"1f612.png"},emoticon_emoji_151:{tag:"[幽灵]",file:"1f47b.png"},emoticon_emoji_152:{tag:"[礼盒]",file:"1f49d.png"},emoticon_emoji_153:{tag:"[拜托]",file:"1f64f-1f3fc.png"},emoticon_emoji_154:{tag:"[气球]",file:"1f388.png"},emoticon_emoji_155:{tag:"[拍掌]",file:"new_emoji_09.png"},emoticon_emoji_156:{tag:"[泪中带笑]",file:"1f602.png"},emoticon_emoji_157:{tag:"[糗大了]",file:"new_emoji_07.png"}},pmap2:{"[大笑]":"emoticon_emoji_00","[可爱]":"emoticon_emoji_01","[色]":"emoticon_emoji_02","[嘘]":"emoticon_emoji_03","[亲]":"emoticon_emoji_04","[呆]":"emoticon_emoji_05","[口水]":"emoticon_emoji_06","[汗]":"emoticon_emoji_145","[呲牙]":"emoticon_emoji_07","[鬼脸]":"emoticon_emoji_08","[害羞]":"emoticon_emoji_09","[偷笑]":"emoticon_emoji_10","[调皮]":"emoticon_emoji_11","[可怜]":"emoticon_emoji_12","[敲]":"emoticon_emoji_13","[惊讶]":"emoticon_emoji_14","[流感]":"emoticon_emoji_15","[委屈]":"emoticon_emoji_16","[流泪]":"emoticon_emoji_17","[嚎哭]":"emoticon_emoji_18","[惊恐]":"emoticon_emoji_19","[怒]":"emoticon_emoji_20","[酷]":"emoticon_emoji_21","[不说]":"emoticon_emoji_22","[鄙视]":"emoticon_emoji_23","[阿弥陀佛]":"emoticon_emoji_24","[奸笑]":"emoticon_emoji_25","[睡着]":"emoticon_emoji_26","[口罩]":"emoticon_emoji_27","[生气]":"emoticon_emoji_28","[抠鼻孔]":"emoticon_emoji_29","[疑问]":"emoticon_emoji_30","[怒骂]":"emoticon_emoji_31","[晕]":"emoticon_emoji_32","[呕吐]":"emoticon_emoji_33","[拜一拜]":"emoticon_emoji_160","[惊喜]":"emoticon_emoji_161","[流汗]":"emoticon_emoji_162","[卖萌]":"emoticon_emoji_163","[默契眨眼]":"emoticon_emoji_164","[烧香拜佛]":"emoticon_emoji_165","[晚安]":"emoticon_emoji_166","[强]":"emoticon_emoji_34","[弱]":"emoticon_emoji_35","[OK]":"emoticon_emoji_36","[拳头]":"emoticon_emoji_37","[胜利]":"emoticon_emoji_38","[鼓掌]":"emoticon_emoji_39","[握手]":"emoticon_emoji_200","[发怒]":"emoticon_emoji_40","[骷髅]":"emoticon_emoji_41","[便便]":"emoticon_emoji_42","[火]":"emoticon_emoji_43","[溜]":"emoticon_emoji_44","[爱心]":"emoticon_emoji_45","[心碎]":"emoticon_emoji_46","[钟情]":"emoticon_emoji_47","[唇]":"emoticon_emoji_48","[戒指]":"emoticon_emoji_49","[钻石]":"emoticon_emoji_50","[太阳]":"emoticon_emoji_51","[有时晴]":"emoticon_emoji_52","[多云]":"emoticon_emoji_53","[雷]":"emoticon_emoji_54","[雨]":"emoticon_emoji_55","[雪花]":"emoticon_emoji_56","[爱人]":"emoticon_emoji_57","[帽子]":"emoticon_emoji_58","[皇冠]":"emoticon_emoji_59","[篮球]":"emoticon_emoji_60","[足球]":"emoticon_emoji_61","[垒球]":"emoticon_emoji_62","[网球]":"emoticon_emoji_63","[台球]":"emoticon_emoji_64","[咖啡]":"emoticon_emoji_65","[啤酒]":"emoticon_emoji_66","[干杯]":"emoticon_emoji_67","[柠檬汁]":"emoticon_emoji_68","[餐具]":"emoticon_emoji_69","[汉堡]":"emoticon_emoji_70","[鸡腿]":"emoticon_emoji_71","[面条]":"emoticon_emoji_72","[冰淇淋]":"emoticon_emoji_73","[沙冰]":"emoticon_emoji_74","[生日蛋糕]":"emoticon_emoji_75","[蛋糕]":"emoticon_emoji_76","[糖果]":"emoticon_emoji_77","[葡萄]":"emoticon_emoji_78","[西瓜]":"emoticon_emoji_79","[光碟]":"emoticon_emoji_80","[手机]":"emoticon_emoji_81","[电话]":"emoticon_emoji_82","[电视]":"emoticon_emoji_83","[声音开启]":"emoticon_emoji_84","[声音关闭]":"emoticon_emoji_85","[铃铛]":"emoticon_emoji_86","[锁头]":"emoticon_emoji_87","[放大镜]":"emoticon_emoji_88","[灯泡]":"emoticon_emoji_89","[锤头]":"emoticon_emoji_90","[烟]":"emoticon_emoji_91","[炸弹]":"emoticon_emoji_92","[枪]":"emoticon_emoji_93","[刀]":"emoticon_emoji_94","[药]":"emoticon_emoji_95","[打针]":"emoticon_emoji_96","[钱袋]":"emoticon_emoji_97","[钞票]":"emoticon_emoji_98","[银行卡]":"emoticon_emoji_99","[手柄]":"emoticon_emoji_100","[麻将]":"emoticon_emoji_101","[调色板]":"emoticon_emoji_102","[电影]":"emoticon_emoji_103","[麦克风]":"emoticon_emoji_104","[耳机]":"emoticon_emoji_105","[音乐]":"emoticon_emoji_106","[吉他]":"emoticon_emoji_107","[火箭]":"emoticon_emoji_108","[飞机]":"emoticon_emoji_109","[火车]":"emoticon_emoji_110","[公交]":"emoticon_emoji_111","[轿车]":"emoticon_emoji_112","[出租车]":"emoticon_emoji_113","[警车]":"emoticon_emoji_114","[自行车]":"emoticon_emoji_115","[撇嘴]":"emoticon_emoji_116","[难过]":"emoticon_emoji_117","[冷汗]":"emoticon_emoji_118","[抓狂]":"emoticon_emoji_119","[傲慢]":"emoticon_emoji_120","[困]":"emoticon_emoji_121","[疯了]":"emoticon_emoji_122","[奋斗]":"emoticon_emoji_123","[白眼]":"emoticon_emoji_124","[衰]":"emoticon_emoji_125","[再见]":"emoticon_emoji_126","[哼哼]":"emoticon_emoji_127","[阴险]":"emoticon_emoji_128","[饥饿]":"emoticon_emoji_129","[乒乓]":"emoticon_emoji_130","[猪头]":"emoticon_emoji_131","[玫瑰]":"emoticon_emoji_132","[凋谢]":"emoticon_emoji_133","[瓢虫]":"emoticon_emoji_134","[月亮]":"emoticon_emoji_135","[礼物]":"emoticon_emoji_136","[拥抱]":"emoticon_emoji_137","[抱拳]":"emoticon_emoji_138","[勾引]":"emoticon_emoji_139","[差劲]":"emoticon_emoji_140","[爱你]":"emoticon_emoji_141","[NO]":"emoticon_emoji_142","[飞吻]":"emoticon_emoji_143",
"[微笑]":"emoticon_emoji_144","[吐舌头]":"emoticon_emoji_146","[忧郁]":"emoticon_emoji_147","[尴尬]":"emoticon_emoji_148","[舒适]":"emoticon_emoji_149","[不悦]":"emoticon_emoji_150","[幽灵]":"emoticon_emoji_151","[礼盒]":"emoticon_emoji_152","[拜托]":"emoticon_emoji_153","[气球]":"emoticon_emoji_154","[拍掌]":"emoticon_emoji_155","[泪中带笑]":"emoticon_emoji_156","[糗大了]":"emoticon_emoji_157"}});I$("5fbe769443dda80288886727976f0221",function(e,t,i,n,a,o,s,r,_,c,d,f){var l="PORTRAIT_"+n._$uniqueID(),u=appConfig.path.sdk+"res/portrait/emoji/";d._$$Portrait=e._$klass();f=d._$$Portrait._$extend(s._$$Abstract);f.__init=function(){this.__super();o._$extend({reduceExt:function(e){return e.substr(0,e.length-4)}})};f.__reset=function(e){this.__btn=t._$get(e.btn);if(this.__btn){e.parent=e.parent&&t._$get(e.parent)||document.body;this.__col=e.col||12;c=n._$merge(c,{col:this.__col,prefix:d._$getPortraitRoot()});this.__super(e);this.__render();r._$$Scrollbar._$allocate({parent:this.__cnt});this.__doInitDomEvent([[this.__btn,"click",this.__onBtnClick._$bind(this)],[document,"click",this.__hideCnt._$bind(this)],[this.__body,"click",this.__selectItem._$bind(this)]])}};f.__destroy=function(){this.__doClearComponent();this.__super()};f.__initXGui=function(){var e=a._$parseUITemplate(_);return function(){this.__seed_html=e.cnt;this.__seed_list=e.list}}();f.__initNode=function(){this.__super();var e=t._$getByClassName(this.__body,"j-flag");this.__cnt=e[0];this.__prev=e[1];this.__next=e[2]};f.__onBtnClick=function(e){t._$hasClassName(this.__body,"f-dn")?this.__showCnt(e):this.__hideCnt(e)};f.__showCnt=function(e){i._$stop(e);i._$dispatchEvent(document,"click");t._$delClassName(this.__body,"f-dn");this._$dispatchEvent("onShow")};f._$hide=function(){this.__hideCnt()};f.__hideCnt=function(e){t._$addClassName(this.__body,"f-dn");this._$dispatchEvent("onHide")};f.__selectItem=function(e){i._$stop(e);var n=i._$getElement(e,"d:id");if(n){var a={id:t._$dataset(n,"id"),tag:t._$attr(n,"title"),src:t._$dataset(n,"src")};a.html=d._$getImgHTML(a);this._$dispatchEvent("onSelect",a);this.__hideCnt(e)}};f.__render=function(){o._$render(this.__cnt,this.__seed_list,c)};f._$getData=function(){return c};d._$isPortrait=function(e){var t=(e.src||"").toLowerCase(),i=d._$getPortraitRoot();return 0===t.indexOf(i)};d._$hasPortrait=function(e){var t=n._$indexOf(e.getElementsByTagName("img"),function(e){return d._$isPortrait(e)});return t>=0};d._$getPortraitRoot=function(){return appConfig.protocol.sdk+"://"+appConfig.domain.sdk+appConfig.online.sdk+"res/portrait/emoji/"};d._$formatPortrait=function(e){var t=e.getElementsByTagName("img");if(t&&t.length){e=e.cloneNode(!0);n._$reverseEach(e.getElementsByTagName("img"),function(e){var t=e.parentNode;if(d._$isPortrait(e)){var i=e.ownerDocument.createTextNode(e.title);t.replaceChild(i,e)}else t.removeChild(e)});return e}};d._$isPortraitURL=function(e){var t=e.className||"";return t.indexOf(l)>=0};d._$hasPortrait=function(e){var t=n._$indexOf(e.getElementsByTagName("img"),function(e){return d._$isPortraitURL(e)});return t>=0};d._$formatPortrait=function(e){var t=e.getElementsByTagName("img");if(t&&t.length){e=e.cloneNode(!0);n._$reverseEach(e.getElementsByTagName("img"),function(e){var t=e.ownerDocument.createTextNode(e.title);e.parentNode.replaceChild(t,e)});return e}};d._$portrait2text=function(e){var i=document.createElement("div");i.innerHTML=e;var n=i.getElementsByTagName("img");for(var a=n.length-1;a>=0;a--){var o=n[a];var s=t._$attr(o,"title");var r=document.createTextNode(s);i.replaceChild(r,o)}return i.innerHTML};d._$text2portrait=function(){var e=/(\[[^\]]+\])/gi;return function(t){var i=c.pmap;var n=c.pmap2;t=t.replace(e,function(e,t){if(n[t]){var a=d._$getImgHTML({id:n[t],tag:t,src:d._$getPortraitRoot()+i[n[t]].file});return a}else return t});return t}}();d._$getImgHTML=function(e){var t='<img class="portrait_icon '+l+'" data-id="'+e.id+'" src="'+e.src+'" title="'+e.tag+'" alt="'+e.tag+'">';return t}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","d1bf8daf5a41ea1e86db380d4fa07f12","d4f78b74ede76946bfa040af6decdc10","77ddc975b19b8fb6445c7b08a908fa21","aa1a926fe7da20dd0f142521c5fcd3df");I$("0515a0040b5ea07e289bddc693d015b9",'<textarea name="ntp" id="#<editBody>">\n  <div class="m-iptbox">\n    <label id="portrait_btn" class="portrait_label" title="发送表情"><i class="u-icon u-icon-portrait"></i></label>\n    <label class="photo_label j-flag" title="发送图片"><i class="u-icon u-icon-photo"></i></label>\n    <label class="file_label j-fflag" title="发送文件"><i class="u-icon u-icon-file"></i></label>\n    <div class="textarea j-richflag">\n      <div class="textarea-mn j-flag"></div>\n    </div>\n    <button type="submit" class="u-btn u-btn-send j-flag">发送</button>\n    <form class="form j-flag"></form>\n    <div class="disabled"></div>\n  </div>\n</textarea>\n<textarea name="jst" id="#<editStyle>">\n  <head>\n    <meta charset="utf-8"/>\n    <style>\n      html,body{cursor:text;font-size:14px;font-family:Arial;word-wrap:break-word;}\n      html,body,p{margin:0;padding:0;border:0}\n      html{width:100%;height:100%;overflow:hidden;}\n      body{line-height:16px;padding:11px 10px;white-space:pre-wrap;}\n      img{max-width:90%;}\n      .portrait_icon{\n        width: 24px;\n        height: 24px;\n        vertical-align: middle;\n        display: inline-block;\n      }\n      ${css}\n    </style>\n  </head>\n  <body contenteditable="true"></body>\n</textarea>\n<textarea name="txt" id="#<editToast>">\n  <div class="tips-message">\n    <i class ="u-icon u-icon-warning"></i>\n    <h4></h4>\n  </div>\n</textarea>\n<textarea name="txt" id="#<editPlaceHolder>">\n  <div class="empty">请输入消息</div>\n</textarea>\n');I$("e6445ba124fca311850026939fc9606d",function(e,t,i){i.__insertLineBreak=function(e){e.execCommand("insertLineBreak")};i.__insertHTML=function(e,t){e.execCommand("insertHTML",!1,t)};i.__unlink=function(e){e.execCommand("unlink",!1)};i.__getTextContent=function(e){return e&&e.innerText||""};i.__focusToEnd=function(e){e.focus();var t=e.getSelection();if(t.rangeCount>0){var i=t.getRangeAt(0);i.selectNodeContents(e.document.body);i.collapse(!1)}};i.__fixFocus=function(e){};i.__collapse=function(e){try{e.getSelection().collapseToEnd()}catch(t){}};i.__hasSelectionHack=function(){return!1};i.__saveSelection=function(){};i.__revertSelection=function(e,t){};i.__getPosition=function(e){if(e){var t=e.getSelection(),i=t.getRangeAt(0);if(i){var n=(i.getClientRects()||[])[0];if(n){var a=e.document,o=Math.max(a.body.scrollTop,a.documentElement.scrollTop),s=Math.min(a.body.clientHeight,a.documentElement.clientHeight);if(n.top>0&&n.top<s)return;return{top:n.top+o,left:n.left}}}}}},"2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f");I$("6bee25735a4d9fe7575f4cc1d6544f5f",function(e,t,i){if("trident"===e._$KERNEL.engine)I$("5a60847a505b4a6090a29a2388022fae",function(){i.__getPosition=function(e){};i.__saveSelection=function(e){var t=e.document;if(e.getSelection){var i=e.getSelection();if(i.rangeCount>0)return i.getRangeAt(0)}else if(t.selection)return t.selection.createRange()};i.__revertSelection=function(e,t){if(e&&t)if(t.select)t.select();else if(e.getSelection){var i=e.getSelection();i.addRange(t)}}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>"6.0")I$("7bd35530bc9c396083895a07773ae3b8",function(){i.__insertLineBreak=function(e){var t=e.getSelection().getRangeAt(0);var i=e.createElement("p");i.innerText=" ";t.insertNode(i);t.collapse(!0)};i.__insertHTML=function(e,i){var n=e.getSelection();if(n.getRangeAt){var a=n.getRangeAt(0);if(a){var o=e.createElement("div");o.innerHTML=i;a.deleteContents();t._$reverseEach(o.childNodes,function(e){a.insertNode(e)});a.collapse(!1)}}}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="6.0")I$("ebf2752808f1cb89d83bfff96fce5f01",function(){i.__insertLineBreak=function(e){var t=e.selection.createRange();t.pasteHTML("<p></p>");t.collapse(!1);t.select()};i.__insertHTML=function(e,t){var i=e.selection.createRange();if(i.pasteHTML)i.pasteHTML(t)};i.__hasSelectionHack=function(){return!0}});if("webkit"===e._$KERNEL.engine)I$("6ae58fb964dce9df52cce1a78f1db9d5",function(){i.__fixFocus=function(e){var t=e.getSelection();if(!(t&&t.rangeCount>0)){var i=e.document.createRange();i.selectNodeContents(e.document.body);t.addRange(i);i.collapse(!1)}}});if("gecko"===e._$KERNEL.engine)I$("7afaead929ff59d58d8f6600df6bc543",function(){i.__insertLineBreak=function(e){e.execCommand("insertHTML",!1,"<p></p>")};i.__getTextContent=function(){var e=/inline|cell/i;var i=function(t){return!e.test(window.getComputedStyle(t,null).display||"")};var n=function(e,a){var o=e.childNodes;if(0!==o.length||e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.TEXT_NODE){if(0===o.length)return;if(a.length>0)if("\n"!==a[a.length-1]&&i(e))a.push("\n");else a.push(" ");t._$forEach(o,function(e){n(e,a)})}else a.push(e.textContent||e.nodeValue||"")};return function(e){var t=[];n(e,t);return t.join("")}}()});return i},"b5a2ea56adb918d7d443468b3a9b53d1","2ad7178887dc8cdca6f726aa3bb0d129","e6445ba124fca311850026939fc9606d");I$("721eb0d1fc679ff84cb7e25b04a2daff",function(e,t,i,n,a,o,s,r,_,c,d,f,l,u,h,m,p){var g="YSF_MSG_"+n._$uniqueID()+"_";m._$$YSFEditor=e._$klass();p=m._$$YSFEditor._$extend(a._$$Abstract);p.__init=function(){this.__sopt={};this.__ropt={};this.__fopt={accept:"image/*",onchange:this.__onFileSelect._$bind(this)};this.__popt={clazz:"pc_portrait",btn:"portrait_btn",onSelect:this.__onPortraitSelect._$bind(this)};this.__eopt={visible:!0,onload:this.__onIFrameLoaded._$bind(this)};this.__super()};p.__reset=function(e){this.__super(e);this.__inputComposition=!1;t._$dataset(this.__fopt.btn,"log",e.log||"");this.__limit=parseInt(e.maxLength)||0;this.__placeholder=e.placeholder||"输入消息...";this.__doShowPlaceHolder();var i=parseInt(e.maxHeight)||0;if(i)this.__range=[0,i];this.__sopt.css=e.css||"";
this.__iframe=t._$createXFrame(this.__eopt);this.__doInitDomEvent([[this.__nsender,"click",this.__doSubmitContent._$bind(this,{label:0})],[this.__nholder,"click",this._$focus._$bind(this)],[this.__nfile,"click",this.__onFileBtnClick._$bind(this)]]);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this));if(e.popt){this.__popt=n._$merge(this.__popt,e.popt);this.__popt.parent=this.__popt.parent||this.__body}this.__portrait=l._$$Portrait._$allocate(this.__popt);this.__ftOpt={node:this.__nfile,multiple:!0,onsend:this.__doSendFile._$bind(this)};this.__fileTransfer=f._$$FileTransfer._$allocate(this.__ftOpt)};p.__destroy=function(){if(this.__scrollbar){this.__scrollbar._$recycle();delete this.__scrollbar}if(this.__observer){this.__observer.disconnect();delete this.__observer}if(this.__stimer){window.clearTimeout(this.__stimer);delete this.__stimer}t._$remove(this.__iframe);delete this.__iframe;delete this.__content;delete this.__range;this.__doHideToast();this._$clear();this.__super()};p.__initXGui=function(){var e=o._$parseUITemplate(u);return function(){this.__seed_tst=e.editToast;this.__seed_hld=e.editPlaceHolder;this.__seed_cnt=e.editStyle;this.__seed_html=e.editBody}}();p.__initNode=function(){this.__super();var e=t._$getByClassName(this.__body,"j-flag");this.__richText=t._$getByClassName(this.__body,"j-richflag")[0];this.__eopt.parent=e[1];this.__ropt.container=e[1];this.__fopt.btn=e[0];this.__fopt.form=e[3];this.__fopt.parent=this.__body;r._$bind(this.__fopt.btn,this.__fopt);this.__nsender=e[2];this.__ntoast=t._$html2node(o._$getTextTemplate(this.__seed_tst));this.__nholder=t._$html2node(o._$getTextTemplate(this.__seed_hld));this.__nfile=t._$getByClassName(this.__body,"j-fflag")[0]};p.__getViewPort=function(){try{return this.__iframe.contentWindow}catch(e){}};p.__getContext=function(){try{return this.__getViewPort().document}catch(e){}};p.__getBody=function(){try{var e=this.__getContext().body;return"true"==e.contentEditable?e:null}catch(t){}};p.__hasContent=function(){var e=this.__getBody(),t=this.__getTextContent(e).trim();if(!t)return l._$hasPortrait(e);else return!!t};p.__getTextContent=function(e){return h.__getTextContent(e||this.__getBody())};p.__doShowToast=function(e){this.__doHideToast();this.__body.appendChild(this.__ntoast);this.__ntoast.getElementsByTagName("h4")[0].innerHTML=e;this.__xtimer=window.setTimeout(this.__doHideToast._$bind(this),5e3)};p.__doHideToast=function(){if(this.__xtimer)this.__xtimer=window.clearTimeout(this.__xtimer);t._$removeByEC(this.__ntoast)};p.__doShowPlaceHolder=function(e){e=e||this.__placeholder;this.__nholder.innerText=e;this.__eopt.parent.appendChild(this.__nholder)};p.__doHidePlaceHolder=function(){t._$removeByEC(this.__nholder)};p.__doDumpImageFromEvent=function(e){var t=[],i=e.clipboardData||window.clipboardData||{};n._$forEach(i.items,function(e){if(0===e.type.indexOf("image")){var i=e.getAsFile();t.push({file:i,url:URL.createObjectURL(i)})}});var a=e.dataTransfer||{};n._$forEach(a.files,function(e){if(0===e.type.indexOf("image"))t.push({file:e,url:URL.createObjectURL(e)})});return t};p.__doDumpImageFromContent=function(e){var t=[],i=e.getElementsByTagName("IMG");n._$reverseEach(i,function(e){var i=e.src||"";if(0===i.indexOf("data:image")||i.indexOf("nos.netease.com")>0||i.indexOf("nosdn.127.net")>=0){t.push({url:i,file:i});e.parentNode.removeChild(e)}});return t};p.__doDumpTextFromEvent=function(e){var t="",i=e.clipboardData;if(i)t=i.getData("text/plain");else if(window.clipboardData)t=clipboardData.getData("text");return t||""};p.__doCheckEnter=function(e){if(13==e.keyCode){i._$stop(e);if(!e.ctrlKey)this.__doSubmitContent({label:1});else{h.__insertLineBreak(this.__getContext());var n=t._$getStyle(this.__getBody(),"lineHeight"),a=parseInt(n)||20;this.__getViewPort().scrollBy(0,a);this.__doCheckScrollBar()}}};p.__doCheckScrollBar=function(){var e=function(){delete this.__stimer;if(this.__scrollbar)this.__scrollbar._$resize()};return function(){if(!this.__stimer)this.__stimer=window.setTimeout(e._$bind(this),50)}}();p.__doCheckAutoHeight=function(){var e=this.__range;if(e&&e[0]!==e[1]){var i=this.__eopt.parent;if(!e[0]){if(!i.clientHeight)return;var n=i.clientHeight,a=e[1];e[0]=n;e[1]=Math.max(a,n)}var o=this.__getBody();if(o){t._$setStyle(i,"height","1px");var s=Math.max(e[0],Math.min(o.scrollHeight,e[1]));t._$setStyle(i,"height",s+"px");this._$dispatchEvent("onheightchange")}}};p.__doCheckInputLimit=function(e){if(this.__limit){if(null==e)e=this._$getContent().trim();if(e.length>this.__limit)this._$setContent(e.substr(0,this.__limit))}};p.__doCheckSubmitable=function(){this.__doDisableSubmit(!this.__hasContent())};p.__doCheckPlaceHolder=function(){var e=this.__hasContent();!e?this.__doShowPlaceHolder():this.__doHidePlaceHolder()};p.__doCheckEventMessage=function(e){var t=this.__doDumpTextFromEvent(e);if(0===t.indexOf(g)){i._$stop(e);this._$dispatchEvent("onsubmit",{type:"message",content:t.replace(g,"")})}};p.__doCheckEventImage=function(e){var t=this.__doDumpImageFromEvent(e);if(!t||!t.length){this.__filterRichContent(e);window.setTimeout(this.__doCheckContentImage._$bind(this),100)}else{i._$stop(e);this.__doPreviewImage(t)}};p.__doCheckContentImage=function(){var e=this.__getBody(),t=this.__doDumpImageFromContent(e);e.scrollTop=2*e.scrollHeight;h.__focusToEnd(this.__getViewPort());if(t&&t.length)this.__doPreviewImage(t)};p.__doSelectionChange=function(e){var t=this.__onSelectionChange._$bind(this);if(!window.MutationObserver){this.__doInitDomEvent([[e,"selectionchange",t]]);if(h.__hasSelectionHack())this.__doInitDomEvent([[e,"keydown",t],[e,"keyup",t]])}else{this.__observer=new MutationObserver(t);this.__observer.observe(e,{subtree:!0,childList:!0,attributes:!0,characterData:!0})}};p.__doLoadImage=function(e,t,i){var n=this,a=new Image;a.onload=function(){t.call(n,e)};a.onerror=function(){e.file=null;(i||t).call(n,e)};a.src=e.url};p.__doPreviewImage=function(){var e=function(e){var t=[];n._$forEach(e,function(e){if(e.file)t.push(e)});return t};return function(t){var i=0,a=this;if(!this.__onPreviewState){var o=function(){i++;if(i==t.length){var n=e(t);if(!n.length)this.__doSendImage({});else{a.__onPreviewState=!0;d._$preview({photos:n,onok:function(){a.__doSendImage(n);delete a.__onPreviewState},oncc:function(){delete a.__onPreviewState}})}}};n._$forEach(t,function(e){if(e.url)this.__doLoadImage(e,o,o);else i++},this)}}}();p.__doSendFile=function(e){n._$forEach(e,function(e){this._$dispatchEvent("onsubmit",{type:"file",content:{file:e,name:e.name,size:e.size}})},this)};p.__doSendImage=function(e){if(!n._$isArray(e))this._$dispatchEvent("onsubmit",{type:"image",content:{url:e.url,file:e.file}});else n._$forEach(e,this.__doSendImage,this)};p.__doSubmitContent=function(e){var t=this._$getContent().trim();if(t)if(!(this.__limit&&t.length>this.__limit))this._$dispatchEvent("onsubmit",n._$merge({type:"text",content:t},e));else this._$toast("消息内容超过最大限制"+this.__limit+"个字符")};p.__doDisableSubmit=function(e){this.__nsender.disabled=!!e;!e?t._$delClassName(this.__nsender,"u-btn-disabled"):t._$addClassName(this.__nsender,"u-btn-disabled")};p.__doFocusToEnd=function(){h.__collapse(this.__getViewPort())};p.__onIFrameLoaded=function(e){var t=this.__getContext();t.open();t.write(s._$get(this.__seed_cnt,this.__sopt));t.close();var n=this.__getViewPort();this.__doInitDomEvent([[t,"paste",this.__onContentPaste._$bind(this)],[t,"drop",this.__onFileDropIn._$bind(this)],[t,"keydown",this.__doCheckEnter._$bind(this)],[n,"focus",this.__doHidePlaceHolder._$bind(this)],[n,"blur",this.__doCheckPlaceHolder._$bind(this)],[n,"scroll",this.__doCheckScrollBar._$bind(this)],[t,"click",i._$dispatchEvent._$bind(i,document,"click")],[t,"beforedeactivate",this.__doSaveSelection._$bind(this)],[t,"compositionstart",this.__onCompositionStart._$bind(this)],[t,"compositionend",this.__onCompositionEnd._$bind(this)]]);this.__doSelectionChange(t);try{t.execCommand("enableObjectResizing",!1,!1)}catch(a){}this.__ropt.parent=t.body;this.__ropt.sbody=this.__getViewPort();this.__scrollbar=c._$$Scrollbar._$allocate(this.__ropt);this._$setContent(this.__content||"");this.__setIframeStyle(t)};p.__doSaveSelection=function(){this.__range=h.__saveSelection(this.__getViewPort())};p.__onSelectionChange=function(e){var t=this._$getContent();this.__doCheckSubmitable();this.__doCheckAutoHeight();!this.__inputComposition&&this._$dispatchEvent("oninputchange",t)};p.__onContentPaste=function(e){this.__doCheckEventMessage(e);if(!this.__disSendImg)this.__doCheckEventImage(e);else{this.__stopImgEvent(e);this.__filterRichContent(e)}};p.__onFileSelect=function(e){var i=t._$get(e.id),n={file:(i.files||[])[0]};if(!n.file)n.file=i;else if(n.file.type.indexOf("image")<0)n.file=null;else n.url=URL.createObjectURL(n.file);this.__doLoadImage(n,this.__doSendImage)};p.__onFileDropIn=function(e){if(!this.__disSendImg){this.__doCheckEventImage(e);i._$stop(e);window.setTimeout(this.__doFocusToEnd._$bind(this),150)}else this.__stopImgEvent(e)};p.__onPortraitSelect=function(e){var t=this.__getContext();try{this._$focus();h.__fixFocus(this.__getViewPort());this.__doScrollToCursor();h.__insertHTML(t,e.html)}catch(i){console.log(i)}this.__onSelectionChange()};p.__doScrollToCursor=function(){var e=this.__getViewPort(),t=h.__getPosition(e);if(t)if(e)e.scrollTo(0,t.top||0)};p._$setContent=function(e){var t=this.__getBody();var i=document.createElement("div");if(t){delete this.__content;if("innerText"in i)i.innerText=e||"";else i.textContent=e||"";t.innerHTML=this.__text2portrait(i.innerHTML);this.__onSelectionChange()}else this.__content=e||""};p._$getContent=function(){var e=this.__getBody(),t=l._$formatPortrait(e)||e;return this.__getTextContent(t)};p._$reset=function(){this._$resetFile();this._$resetContent()};p._$resetFile=function(){this.__fopt.form.reset()};p._$resetContent=function(){this._$setContent("")};p._$focus=function(){var e=this.__getViewPort();if(e){this.__doHidePlaceHolder();e.focus();h.__revertSelection(e,this.__range);
delete this.__range}};p._$blur=function(){window.focus()};p._$disable=function(e){!e?t._$delClassName(this.__body,"z-disabled"):t._$addClassName(this.__body,"z-disabled");this.__portrait._$hide()};p._$toast=function(e){if(!e)this.__doHideToast();else this.__doShowToast(e)};p._$placeholder=function(e){this._$reset();this.__doShowPlaceHolder(e)};p._$clear=function(e){e=e||{};if(!e.disabled&&e.focus){this._$reset();this._$focus()}else{this._$blur();this._$placeholder(e.placeholder);this._$disable(!!e.disabled);if(e.toast)this.__doShowToast(e.toast)}};m._$copy=function(e){i._$addEvent(e,"copy",function(e){var n=i._$getElement(e,"d:copyId");if(n){i._$stop(e);var a=g+t._$dataset(n,"copyId");if(e.clipboardData)e.clipboardData.setData("text/plain",a);else if(window.clipboardData)clipboardData.setData("text",a)}})};p.__portrait2text=function(e){return l._$portrait2text(e)};p.__text2portrait=function(e){return l._$text2portrait(e)};p._$toggleOpr=function(e){if(e){t._$addClassName(this.__richText,"u-status-robot");t._$addClassName(this.__fopt.btn,"f-dn");t._$addClassName("portrait_btn","f-dn");t._$addClassName(this.__nfile,"f-dn");this.__portrait._$hide()}else{t._$delClassName(this.__richText,"u-status-robot");t._$delClassName(this.__fopt.btn,"f-dn");t._$delClassName("portrait_btn","f-dn");t._$delClassName(this.__nfile,"f-dn")}this._$setDisSendImg(e)};p.__filterRichContent=function(e){i._$stop(e);var t=this.__getContext();var n=this.__doDumpTextFromEvent(e);n=this.__text2portrait(n);h.__insertHTML(t,n)};p._$setDisSendImg=function(e){e?this.__disSendImg=!0:delete this.__disSendImg};p.__stopImgEvent=function(e){var t=this.__doDumpImageFromEvent(e);if(!t||!t.length);else i._$stop(e)};p.__onFileBtnClick=function(e){this.__timestamp=n._$uniqueID();this._$dispatchEvent("checkcansendfile",this.__timestamp)};p.__onCanSendFile=function(e){if(e.timestamp==this.__timestamp){this.__canSend=!!e.result;this.__fileTransfer._$dispatchEvent("oncansendfile",{result:this.__canSend})}};p.__setIframeStyle=function(e){var t=function(e,t,i,n){if(e&&i){i="#"+i;if(!t)var a=e+"{"+i+"}";else a=e+"{"+t+":"+i+"}";var o=document.createTextNode(a);n.appendChild(o)}};var i=n._$query2object(location.search.substr(1)),a=i["editorColor"],o=i["editorBgColor"];if(a||o){var s=e.createElement("style"),r=e.head;s.type="text/css";r.appendChild(s);t("body","color",a,s);t("body","background-color",o,s)}};p.__onCompositionStart=function(e){this.__inputComposition=!0};p.__onCompositionEnd=function(e){this.__inputComposition=!1;var t=this._$getContent();!this.__inputComposition&&this._$dispatchEvent("oninputchange",t)}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","b7aac098ae4b6dc4338e9db07c9a613d","1f56e2345bdd3144a9cc346df892e687","d4f78b74ede76946bfa040af6decdc10","c5e46de0cd843027825b03271306606d","312e01a6925afa3148c1190d72498aeb","5fbe769443dda80288886727976f0221","0515a0040b5ea07e289bddc693d015b9","6bee25735a4d9fe7575f4cc1d6544f5f");I$("43ffdf8c18f84c57f523e6e59bd42807",'<textarea name="ntp" id="#<lbBody>">\n  <div class="m-layer">\n      <div class="close j-flag">\n          <i class="u-icon-closewhite"></i>\n      </div>\n      <table>\n          <tbody>\n          <tr>\n              <td>\n                  <div class="lywrap">\n                      <div class="lyct small">\n                          <div class="prev j-flag">\n                              <i class="u-icon-prev"></i>\n                          </div>\n                          <div class="imgWrap j-flag"></div>\n                          <div class="next j-flag">\n                              <i class="u-icon-next"></i>\n                          </div>\n                      </div>\n                  </div>\n              </td>\n          </tr>\n          </tbody>\n      </table>\n  </div>\n</textarea>\n<textarea name="txt" id="#<lbLoading>">\n  <div class="status loading"><img src="/prd/res/img/loading.gif"/></div>\n</textarea>\n<textarea name="txt" id="#<lbError>">\n  <div class="status error"><div class="message j-flxg"></div></div>\n</textarea>');I$("4dc6938a0c6e195149d0d7dd9992d114",function(e,t,i,n,a,o,s,r,_){r._$$LightBox=e._$klass();_=r._$$LightBox._$extend(a._$$Abstract);_.__init=function(){this.__super()};_.__reset=function(e){this._$batEvent({onshow:this.__doFadeIn._$bind(this),onhide:this.__doFadeOut._$bind(this)});this.__super(e);this.__doInitDomEvent([[this.__nclose,"click",this.__doExitFullScreen._$bind(this)],[this.__nprev,"click",this._$backward._$bind(this)],[this.__nnext,"click",this._$forward._$bind(this)],[this.__nbox,"click",this.__doRedirect2Href._$bind(this)],[document,"keydown",this.__doCheckNavigator._$bind(this)],[document,"fullscreenchange",this.__onFullScreenChange._$bind(this)],[this.__ntest,"load",this.__onImageLoad._$bind(this,!0)],[this.__ntest,"error",this.__onImageLoad._$bind(this,!1)]]);this.__list=e.list||[];this.__index=parseInt(e.index)||0;this.__disabled=e.disabled||"j-disabled";this._$go();if(e.fullscreen)this.__doFullScreen()};_.__destroy=function(){i._$remove(this.__image);delete this.__fulled;this.__super()};_.__initXGui=function(){var e=o._$parseUITemplate(s);return function(){this.__seed_html=e.lbBody;this.__seed_load=e.lbLoading;this.__seed_error=e.lbError}}();_.__initNode=function(){this.__super();var e=i._$getByClassName(this.__body,"j-flag");this.__nclose=e[0];this.__nprev=e[1];this.__nbox=e[2];this.__nnext=e[3];this.__ntest=new Image;this.__nloading=i._$html2node(o._$getTextTemplate(this.__seed_load));this.__nerror=i._$html2node(o._$getTextTemplate(this.__seed_error))};_.__doFadeIn=function(e){i._$addClassName(e.target,"a-fadein")};_.__doFadeOut=function(e){};_.__doCheckDisableStatus=function(){this.__index<=0?i._$addClassName(this.__nprev,this.__disabled):i._$delClassName(this.__nprev,this.__disabled);this.__index>=this.__list.length-1?i._$addClassName(this.__nnext,this.__disabled):i._$delClassName(this.__nnext,this.__disabled)};_.__doFullScreen=function(){var e=this.__body.requestFullscreen||this.__body.msRequestFullscreen||this.__body.mozRequestFullScreen||this.__body.webkitRequestFullScreen;if(e)e.call(this.__body);this.__fulled=!0};_.__doExitFullScreen=function(e){var t=document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;if(t)t.call(document);this.__doCloseFullScreen()};_.__doCloseFullScreen=function(e){this._$dispatchEvent("onexit");this._$recycle()};_.__onFullScreenChange=function(e){var t=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;if(!t)this.__doExitFullScreen()};_.__doRedirect2Href=function(e){var t=this.__list[this.__index];if(t&&t.href)window.open(t.href)};_.__doRenderImage=function(){var e=this.__list[this.__index];if(e){this.__doHideError();this.__doHideLoading();if(this.__image){var n={target:this.__image};this._$dispatchEvent("onhide",n);if(!n.stopped)i._$remove(this.__image)}this.__image=new Image;this.__nbox.appendChild(this.__image);t._$addEvent(this.__image,"error",this.__doCheckImageError._$bind(this));if(!e.thumb){i._$delClassName(this.__nbox.parentNode,"small");this.__image.src=e.src}else{i._$addClassName(this.__nbox.parentNode,"small");this.__doShowLoading();this.__image.src=e.thumb;this.__ntest.src=e.src}this._$dispatchEvent("onshow",{target:this.__image})}};_.__doCheckNavigator=function(e){var t=e.keyCode;if(37!==t)if(39!==t){if(27===t)this.__doExitFullScreen()}else this._$forward();else this._$backward()};_.__doShowLoading=function(){this.__nbox.parentNode.appendChild(this.__nloading)};_.__doHideLoading=function(){i._$removeByEC(this.__nloading)};_.__doShowError=function(e){i._$getByClassName(this.__nerror,"j-flxg")[0].innerText=e||"加载失败，请稍后再试";this.__nbox.parentNode.appendChild(this.__nerror)};_.__doHideError=function(){i._$removeByEC(this.__nloading)};_.__doCheckImageError=function(){var e="";if(navigator.onLine===!1)e="网络连接失败，请稍后再试";this.__doShowError(e)};_.__onImageLoad=function(e){var t=this.__list[this.__index];if(this.__ntest.src==t.src){this.__doHideLoading();if(e){i._$delClassName(this.__nbox.parentNode,"small");this.__image.src=t.src}else this.__doCheckImageError()}};_._$go=function(e){var t=this.__index+(e||0);this.__index=Math.max(0,Math.min(t,this.__list.length-1));this.__doCheckDisableStatus();this.__doRenderImage()};_._$backward=function(){if(!i._$hasClassName(this.__nprev,this.__disabled))this._$go(-1)};_._$forward=function(){if(!i._$hasClassName(this.__nnext,this.__disabled))this._$go(1)};r._$lightbox=function(e){var t=i._$get(e.current),a=e.group||"";if(t)a=i._$dataset(t,"group")||a;var o=i._$get(e.parent)||document.body,s=o.getElementsByTagName("IMG"),_=[],c=0;n._$forEach(s,function(e){if(!a||a==i._$dataset(e,"group")){var o={src:e.src,title:e.alt||"",href:i._$dataset(e,"href")};var s=i._$dataset(e,"src"),r=i._$dataset(e,"thumb");if(s){o.thumb=o.src;o.src=n._$absolute(s)}else if(r)o.thumb=n._$absolute(r);_.push(o);if(e===t)c=_.length-1}});r._$$LightBox._$allocate(n._$merge({fullscreen:!0,disabled:"z-page-disabled"},e,{parent:document.body,index:c,list:_}))};r._$delegate=function(e,i){t._$addEvent(e,"click",function(n){var a=t._$getElement(n,"d:group");if(a&&"IMG"==a.tagName){var o=e.scrollTop;r._$lightbox({parent:e,current:a,fullscreen:"mobile"==i?0:1,onexit:function(){window.setTimeout(function(){e.scrollTop=o},100)}})}})}},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","43ffdf8c18f84c57f523e6e59bd42807");I$("cc5f76c97f6797d31f16d35713973b8d",'<textarea name="ntp" id="#<lbBody>">\n  <div class="m-modal m-modal-confirm m-modal-satisfyEva" style="display:none">\n\n      <table>\n          <tbody>\n          <tr>\n              <td class="j-flagmain">\n                  <div class="lywrap j-flag">\n                      <div class="close" data-action="close">\n                          &times;\n                      </div>\n                      <form class="m-form-evaluate j-form">\n                        <h2 class="form_tlt j-title"></h2>\n                        <div class="evaWrap j-flaglist"></div>\n                        <div class="form_item itm-remarks">\n                            <textarea placeholder="备注(选填)" name="remarks">&lt/textarea>\n                        </div>\n                        <div class="form_item itm-btn">\n                            <a class="u-btn u-btn-disabled ok j-formbtn " data-action="submitform">确定</a>\n                        </div>\n                      </form>\n                  </div>\n              </td>\n\t          <td class="m-modal-confirmEva j-flagconfirm" style="display:none">\n\t\t          <div class="modal_dialog">\n\t\t              <div class="modal_hd">\n\t\t                  <h3 class="modal_title">标题</h3>\n\t\t              </div>\n\t\t              <div class="modal_bd">\n\t\t                  <span>是否放弃当前评价,放弃后不可恢复</span>\n\t\t              </div>\n\t\t              <div class="modal_ft">\n\t\t                  <div class="group">\n\t\t                      <a class="u-btn" data-action="confirmok">确定</a>\n\t\t                      <a class="u-btn u-btn-disabled" data-action="confirmclose">取消</a>\n\t\t                  </div>\n\t\t              </div>\n\t\t          </div>\n\t\t      </td>\n\n          </tr>\n          </tbody>\n      </table>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<lbForm>">\n    <ul class="form_item item-list j-formitm">\n        {list list as x}\n        <li>\n            <label>\n                <div class="itm head">\n                    <img src="${x.img}">\n                </div>\n                <div class="itm choice" data-action="selitem" data-index="${x_index}">\n                    <i class="u-icon-radio {if x_index == selModelIndex}active{/if}"></i>\n                    <span>${x.name}</span>\n                    <input type="radio" name="evaluation" value="${x.value}" {if x.active}checked="true"{/if}>\n                </div>\n            </label>\n        </li>\n        {/list}\n    </ul>\n    {if selModelIndex > -1}\n        <ul class="form_item itm-tag-list">\n        {var tagList = list[selModelIndex].tagList}\n        {list tagList as tag}\n            <li class="tag-item {if tag.isSelected}active{/if}" data-action="selectTag" data-index="${tag_index}">${tag.name|escape}</li>\n        {/list}\n        </ul>\n    {/if}\n</textarea>');
I$("403938ace7e9cded43881ea0073b0c08",function(e,t,i,n,a,o,s,r,_,c,d){c._$$EvaluateModal=e._$klass();d=c._$$EvaluateModal._$extend(a._$$Abstract);var f=window.resourceConfig.satisfy;var l={2:{1:f+"s1.png",100:f+"s4.png"},3:{1:f+"s1.png",50:f+"s2.png",100:f+"s3.png"},5:{1:f+"s0.png",25:f+"s1.png",50:f+"s2.png",75:f+"s3.png",100:f+"s4.png"}};d.__init=function(){this.__super()};d.__reset=function(e){var a=e.form.type,o=l[a];this.__nform=i._$getByClassName(this.__container,"j-form")[0];this.__formData=r._$copy(e.form);this.__formData.list.forEach(function(e){e.img=o[e.value];if(!e.tagList)e.tagList=[];n._$forEach(e.tagList,function(e,t,i){i[t]={name:e}})});this.__resetFormData(this.__formData);this.__createEvalForm(this.__formData);t._$addEvent(this.__nform["remarks"],"keyup",this.__cbRemarks._$bind(this));r._$delegate(this,this.__body,{close:function(e,i){t._$stop(i);this.__hideModal(0)},selitem:this.__selectItem._$bind(this),selectTag:this.__selectTag._$bind(this),confirmclose:function(){this.__showModal()},confirmok:function(){this.__hideModal(1)},submitform:this.__submit._$bind(this)});this.__super(e)};d.__destroy=function(){this.__super()};d.__initXGui=function(){var e=o._$parseUITemplate(_);return function(){this.__seed_html=e.lbBody;this.__seed_modal=e.lbForm}}();d.__initNode=function(){this.__super();var e=i._$getByClassName(this.__body,"j-flag");this.__container=e[0];this.__ntitle=i._$getByClassName(this.__body,"j-title")[0]};d.__resetFormData=function(e){var t=this.__formData.type,i=l[t];this.__nform["remarks"].value="";this.__formData.selModelIndex=-1;this.__formData.list.forEach(function(e){e.img=i[e.value];n._$forEach(e.tagList,function(e){e.isSelected=!1})})};d.__render=function(){var e=i._$getByClassName(this.__container,"j-flaglist")[0];var t=this.__formData;s._$render(e,this.__seed_modal,t);this._$setEvalTypesClassName(t.list)};d.__createEvalForm=function(e){this.__render();this.__ntitle.innerText=this.__formData.messageInvite||"感谢您的咨询，请对我们的服务做出评价"};d.__hideModal=function(e){var t=this.__nform["remarks"].value,n=i._$getByClassName(this.__body,"j-flagmain")[0],a=i._$getByClassName(this.__body,"j-flagconfirm")[0];var o=function(){this.__resetFormData();this.__render();this.__disSubmit(!0)};if(!t||0!=e){if(1==e){i._$setStyle(n,"display","");i._$setStyle(a,"display","none")}this._$dispatchEvent("onhide");o.call(this);i._$setStyle(this.__body,"display","none")}else{i._$setStyle(n,"display","none");i._$setStyle(a,"display","")}};d.__showModal=function(){var e=i._$getByClassName(this.__body,"j-flagmain")[0],t=i._$getByClassName(this.__body,"j-flagconfirm")[0];i._$setStyle(e,"display","");i._$setStyle(t,"display","none")};d._$showModal=function(e,t,n){this.__evalFlag=e;this.__sid=t;this.__mid=n;i._$setStyle(this.__body,"display","block");this._$dispatchEvent("onshow")};d.__cbRemarks=function(e){var t=e.target||{value:""},i=t.value.trim().length;if(i>100)t.value=t.value.slice(0,100)};d._$setEvalTypesClassName=function(e){var t={2:"two",3:"three",5:"five"};var n=t[e.length],a=i._$getByClassName(this.__container,"j-formitm")[0];i._$addClassName(a,n)};d.__disSubmit=function(e){var t=i._$getByClassName(this.__container,"j-formbtn")[0];if(e){i._$addClassName(t,"u-btn-disabled");i._$attr(t,"data-flag",0)}else{i._$delClassName(t,"u-btn-disabled");i._$attr(t,"data-flag",1)}};d.__selectItem=function(e){var t=i._$dataset(e,"index"),e=i._$getByClassName(this.__container,"j-flaglist")[0];this.__formData.selModelIndex=t;this.__disSubmit(!1);this.__render()};d.__selectTag=function(e,t){var n=i._$dataset(e,"index"),a=this.__formData;var o=a.list[a.selModelIndex],s=o.tagList[n];s.isSelected=!s.isSelected;this.__render()};d.__submit=function(e,t){var i=e.getAttribute("data-flag");if(i&&0!=i){var a=this.__formData,o=a.list[a.selModelIndex];var s={evaluation:o.value,name:o.name,remarks:(this.__nform["remarks"].value||"").trim(),id:this.__mid,flag:this.__evalFlag,sid:!this.__evalFlag?this.__sid:null,messageThanks:this.__formData.messageThanks};var r=[];n._$forEach(o.tagList,function(e){if(e.isSelected)r.push(e.name)});s.tagList=r;this._$dispatchEvent("submit",s);this.__hideModal(1)}}},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","7f31a069b85883a87d9e7be65faf8ba9","cc5f76c97f6797d31f16d35713973b8d");I$("a7e632f25275a18bf80a6315807aa186",function(e,t,i,n,a,o){o._$dur2time=function(){var e=function(e){return""+e};return function(e){if(!e)return'0"';e=Math.round(e/1e3);return e+'"'}}();o._$dur2width=function(e){return 40+7*e/1e3};o._$media=function(){var o={audio:function(t){var i="z-icon-playing";if(!e._$hasClassName(t,i)){var o=e._$dataset(t,"id");a._$do(function(a){a._$getAudioURL(o,function(a){if(a){a+=(a.indexOf("?")<0?"?":"&")+"audioTrans&type=mp3";n._$play(a,{key:"ysf-online-audio",onstatechange:function(n){if(2==n.state)e._$addClassName(t,i);else e._$delClassName(t,i)},ontimeupdate:function(e){},onerror:function(n){e._$delClassName(t,i)}})}})})}else n._$stop("ysf-online-audio")}};return function(n,a){t._$addEvent(n,"click",function(n){var s=t._$getElement(n,"d:action");if(s){var r=o[e._$dataset(s,"action")];if(i._$isFunction(r))r.call(a,s)}})}}()},"5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","0da1314733e282dceaf4eb2ef12df98d","b5fd5227971f68e93c3c9d8c4fce822c");I$("f6c813689eaa285538c4e6c9c0425d8d",function(e,t,i,n,a,o,s){o._$$HeadTab=e._$klass();s=o._$$HeadTab._$extend(a._$$Abstract);s.__reset=function(e){this.__super(e);this.tab={node:e.node,list:e.list,total:e.list.length,offset:0,parentWidth:e.parentWidth,selected:e.selected||"z-crt"};this.startNodeIndexMap=[0];this.currentNodeIndex=0;if(e.node){n._$merge(this.tab,{icon:this.__initIconNode(e.node)});this.__initEvent();this.__resetTab();t._$style(this.tab.node,{left:"0px",position:"absolute"})}};s.__initIconNode=function(e){var i=e.parentNode.parentNode;if(i){var a=function(e){var t=document.createElement("a");t.className=e;return t};var o=function(e){var i=t._$getChildren(e,"j-flag-triangle");n._$forEach(i,function(e){t._$remove(e)})};o(i);var s=a("icon-triangle-left j-flag-triangle");var r=a("icon-triangle-right j-flag-triangle");i.appendChild(s);i.appendChild(r);return[s,r]}};s.__initEvent=function(){i._$addEvent(this.tab.icon[0],"click",this.__clickLeftIcon._$bind(this));i._$addEvent(this.tab.icon[1],"click",this.__clickRightIcon._$bind(this));this._$addEvent("onresize",this.__onWidthResize._$bind(this))};s.__resetTab=function(){var e=this.tab.node.parentNode.offsetWidth,i=this.tab.node.scrollWidth,n=Math.ceil(i/e);this.startNodeIndexMap=[0];var a=0;for(var o=0,s=this.tab.list.length;o<s;o++){var r=this.tab.list[o],_=parseFloat(t._$getStyle(r,"margin-left")),c=parseFloat(t._$getStyle(r,"margin-right")),d=r.getBoundingClientRect().width+_+c,f=this.tab.node.parentNode.getBoundingClientRect().width;a+=d;if(a-c>f){a=d;this.startNodeIndexMap.push(o)}}this.__setIcon()};s.__onPageChange=function(){this.__setIcon();this.__positionScreen()};s.__setIcon=function(){t._$setStyle(this.tab.icon[0],"display","none");t._$setStyle(this.tab.icon[1],"display","none");if(void 0!=this.__getPreStartNodeIndex())t._$setStyle(this.tab.icon[0],"display","block");if(this.__getNextStartNodeIndex())t._$setStyle(this.tab.icon[1],"display","block")};s.__positionScreen=function(){var e=3;var i=this.tab.list[this.currentNodeIndex];var n=t._$offset(i,i.parentNode).x||0;t._$setStyle(this.tab.node,"left",-n+e+"px")};s.__clickLeftIcon=function(e){var t=this.__getPreStartNodeIndex();if(void 0!=t){this.currentNodeIndex=t;this.__onPageChange()}};s.__clickRightIcon=function(e){var t=this.__getNextStartNodeIndex();this.currentNodeIndex=t;this.__onPageChange()};s.__getPreStartNodeIndex=function(){for(var e=this.startNodeIndexMap.length-1;e>=0;e--){var t=this.startNodeIndexMap[e];if(t<this.currentNodeIndex)return t}};s.__getNextStartNodeIndex=function(){for(var e=0;e<this.startNodeIndexMap.length;e++){var t=this.startNodeIndexMap[e];if(t>this.currentNodeIndex)return t}return!1};s.__onWidthResize=function(){this.__resetTab()};s._$recycle=function(){i._$delEvent(this.tab.icon[0],"click");i._$delEvent(this.tab.icon[1],"click");this.__super()}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12");I$("8d84dc6f6c5b6acddca89946669ed134",'<textarea name="ntp" id="#<lbEntry>">\n</textarea>\n\n<textarea name="jst" id="#<lbList>">\n\t<ul class="m-botentry j-flag">\n\t\t{list list as x}\n\t\t<li class="li" data-action="${x.action}" data-id="${x.id}" data-url="${x.url}" data-label="${x.label}">\n\t\t\t${x.label}\n\t\t</li>\n\t\t{/list}\n\t</ul>\n</textarea>\n');I$("4dd00be5440ebfb77e7dab150ec057ac",function(e,t,i,n,a,o,s,r,_,c,d){c._$$BotEntry=e._$klass();d=c._$$BotEntry._$extend(a._$$Abstract);d.__reset=function(e){this.__super(e);var i=e.list;var n=this;this.__timer={};this.__timer["resize"]=null;if(i&&i.length>0)this.__renderList(e.list);t._$addEvent(window,"resize",function(e){if(n.__timer.resize)clearTimeout(n.__timer.resize);n.__timer.resize=setTimeout(function(){n.__ht._$dispatchEvent("onresize")},500)})};d.__destroy=function(){this.__super()};d.__initXGui=function(){var e=o._$parseUITemplate(_);return function(){this.__seed_html=e.lbEntry;this.__seed_list=e.lbList}}();d.__initNode=function(){this.__super();this.__delegate(this.__body,"li",this.__selectItem._$bind(this));i._$style(this.__body,{right:"20px",left:"20px",height:"100%",position:"absolute",overflow:"hidden"})};d.__renderList=function(e){s._$render(this.__body,this.__seed_list,{list:e});var t=i._$getByClassName(this.__body,"j-flag")[0];var e=i._$getChildren(t);this.__ht=r._$$HeadTab._$allocate({node:t,list:e})};d.__delegate=function(e,i,n){var a=this;t._$addEvent(e,"click",function(e){
var a=t._$getElement(e,"t:"+i);if(a)n(a)})};d.__selectItem=function(e){var t=i._$dataset(e,"label"),n=i._$dataset(e,"action"),a=i._$dataset(e,"url");this._$dispatchEvent("select",{label:t,action:n,url:a})}},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","f6c813689eaa285538c4e6c9c0425d8d","8d84dc6f6c5b6acddca89946669ed134");I$("6b705df96729b96a8b9a51eac133a142",function(e,t,i,n,a,o,s,r,_){r._$$WFList=e._$klass();_=r._$$WFList._$extend(a._$$Abstract);_.__init=function(){this.__super()};_.__reset=function(e){this.__super(e);this.__opt={listBox:e.listBox,scrollBox:e.scrollBox,tplSeed:e.tplSeed,scrollDelta:e.scrollDelta};this.__data={list:e.data||[],limit:e.limit,page:e.data.length/e.limit-1};this.__locked=!1;this.__doInitDomEvent([[this.__opt.scrollBox,"scroll",this.__onScroll._$bind(this)]]);this._$addEvent("listchange",this.__onListChange._$bind(this));this._$refresh()};_.__destroy=function(){this.__super()};_._$refresh=function(){s._$render(this.__opt.listBox,this.__opt.tplSeed,{beg:0,end:this.__data.list.length-1,xlist:this.__data.list})};_._$next=function(){this.__locked=!0;this._$dispatchEvent("ongetList",{page:this.__data.page+1})};_.__onListChange=function(e){var t=e.data;switch(e.action){case"append":this.__append(t);break;case"refresh":this._$refresh()}this.__locked=!1};_.__append=function(e){var t=this.__data.list.length;this.__data.list=this.__data.list.concat(e);this.__data.page++;var i=s._$get(this.__opt.tplSeed,{beg:t,end:this.__data.list.length-1,xlist:this.__data.list});this.__opt.listBox.insertAdjacentHTML("beforeend",i)};_.__onScroll=function(){if(!this.__locked){var e=this.__opt.scrollBox,i=this.__opt.listBox,n=t._$offset(i,e),a=n.y+i.offsetHeight-e.scrollTop-e.clientHeight;if(a<=this.__opt.scrollDelta)this._$next()}}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90");I$("1ac6d5d96970319d19bd5ba3a9fd0d7d",'<textarea name="ntp" id="#<orderBody>">\n\t<div class="m-modal m-modal-thirdorder">\n\t    <div class="modal_dialog">\n\t        <div class="modal_hd1">\n\t            <p class="modal_title">请选择你想咨询的订单</p>\n\t            <div class="modal_close">&times;</div>\n\t        </div>\n\t        <div class="modal_bd">\n\t\t\t\t<div class="m-thirdorder">\n\t\t\t\t\t<ul class="order-list"></ul>\n          <div class="load-status"></div>\n\t\t\t\t</div>\n\t        </div>\n\t    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<orderList>">\n\t{list beg..end as y} \n\t\t{var item=xlist[y]}\n      <li class="item">\n        <div class="shop">\n          <i class="icon u-icon-shop"></i>\n          <span class="name" title="${item.s_name}">${item.s_name}</span>\n          <span class="status" title="${item.s_status}">${item.s_status}</span>\n        </div>\n        <ul class="inner-list">\n          {list item.goods as good}\n          <li class="inner-item" data-action="select" data-orderindex="${item_index}" data-goodindex="${good_index}" data-params="${good.params}"  data-target="${good.target}" data-status="${good.p_status}" data-img="${good.p_img}" data-name="${good.p_name}" data-stock="${good.p_stock}" data-price="${good.p_price}" data-count="${good.p_count}">\n            <div class="bd">\n              <div class="left">\n                <img class="img" src="${good.p_img}">\n              </div>\n              <div class="mid">\n                <p class="name" title="${good.p_name}">${good.p_name}</p>\n                <p class="stock">${good.p_stock}</p>\n              </div>\n              <div class="right">\n                <p class="money">${good.p_price}</p>\n                <p class="count">${good.p_count}</p>\n                <p class="status">${good.p_status}</p>\n              </div>\n            </div>\n          </li>\n          {/list}\n        </ul>\n      </li>\n  {/list}\n</textarea>\n\n<textarea name="jst" id="#<orderListStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading_03ce3dcc84af110e9da8699a841e5200.gif">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\' || status.type == \'empty\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');I$("ef3981ce516efa5fd67f856e936d95b7",function(e,t,i,n,a,o,s,r,_,c,d,f,l){f._$$ThirdOrderList=e._$klass();l=f._$$ThirdOrderList._$extend(a._$$Abstract);l.__init=function(){this.__super()};l.__reset=function(e){this.__super(e);this.__listBox=t._$getByClassName(this.__body,"order-list")[0];this.__scrollBox=t._$getByClassName(this.__body,"m-thirdorder")[0];this.__nstatus=t._$getByClassName(this.__scrollBox,"load-status")[0];this.__data=r._$copy(e.data);this.__loadComplete=!1;this.__listConfig={listBox:this.__listBox,scrollBox:this.__scrollBox,tplSeed:this.__seed_list,scrollDelta:40,data:this.__data.content.template.list,ongetList:this.__getList._$bind(this)};var i=t._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[i,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotlist",this.__onListLoad._$bind(this)]]);r._$delegate(this,this.__listBox,{select:this.__onSelect._$bind(this)});this.__list=_._$$WFList._$allocate(this.__listConfig);this.__list._$next()};l.__destroy=function(){this.__list&&this.__list._$recycle();this.__list=null;this.__super()};l.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.orderBody;this.__seed_list=e.orderList;this.__seed_status=e.orderListStatus}}();l.__initNode=function(){this.__super()};l.__renderStatus=function(e){s._$render(this.__nstatus,this.__seed_status,{status:e})};l.__getList=function(){if(!this.__loadComplete){this.__renderStatus({type:"loading",msg:"加载中"});c._$do(function(e){e._$getMoreBotList(this.__data.content)}._$bind(this))}};l.__onListLoad=function(e){var t=e.content;if("order_list"==t.template.id)if(e.error)this.__renderStatus({type:"error",msg:"加载失败，"+e.error.message});else if(0==t.template.list.length){this.__loadComplete=!0;this.__renderStatus({type:"empty",msg:"已经到底了"})}else{this.__renderStatus({type:"success",msg:""});this.__data.content=t;this.__list._$dispatchEvent("listchange",{action:"append",data:t.template.list});setTimeout(function(){if(this.__listBox.clientHeight<=this.__scrollBox.clientHeight)this.__list._$next()}._$bind(this),500)}};l.__onClose=function(){this._$recycle()};l.__onSelect=function(e,t){if(e){this._$dispatchEvent("onselect",e,t);this.__onClose()}}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","7f31a069b85883a87d9e7be65faf8ba9","6b705df96729b96a8b9a51eac133a142","b5fd5227971f68e93c3c9d8c4fce822c","1ac6d5d96970319d19bd5ba3a9fd0d7d");I$("3e028e771c5eb428a1c9f9ae9c062df8",'<textarea name="ntp" id="#<inputCnt>">\n  <div class="m-input form-item j-flag">\n  </div>\n</textarea>\n<textarea name="jst" id="#<inputBody>">\n  <label class="label">\n    <span class="title">${label}</span>\n    {if required}\n    <span class="u-required">*</span>\n    {/if}\n  </label>\n  <div class="input">\n    <input type="text" class="j-input" name="${key}" maxlength="${maxlength}" value="${value}">\n  </div>\n  <div class="z-error j-error"></div>\n</textarea>\n');I$("b3766373d116c51b859d94ae63004333",function(e,t,i,n,a,o,s,r,_,c,d){c._$$Input=e._$klass();d=c._$$Input._$extend(a._$$Abstract);d.__init=function(){this.__super()};d.__reset=function(e){this.__super(e);this.__data=r._$extend(e.data,{label:"",key:"",value:"",maxlength:100,rules:[]});s._$render(this.__body,this.__seed_body,e.data);this.__defineNode();this.__initEvent()};d.__destroy=function(){this.__super()};d.__initXGui=function(){var e=o._$parseUITemplate(_);return function(){this.__seed_html=e.inputCnt;this.__seed_body=e.inputBody}}();d.__initNode=function(){this.__super()};d.__defineNode=function(){this.__nerror=i._$getByClassName(this.__body,"j-error")[0];this.__ninput=i._$getByClassName(this.__body,"j-input")[0]};d.__initEvent=function(){this.__doInitDomEvent([[this.__ninput,"keyup",this.__onkeyUp._$bind(this)]])};d.__renderErrorMsg=function(e){this.__nerror.innerText=e};d.__onkeyUp=function(e){var t=this.__ninput.value;n._$forEach(this.__data.forbidden,function(e){this.__data.value=t.replace(e,"")}._$bind(this));if(t!=this.__data.value)this.__ninput.value=this.__data.value};d._$validate=function(){var e={required:function(e){var t="此信息不能为空";if(!e||""==e.trim()){this.__renderErrorMsg(t);return!1}else{this.__renderErrorMsg("");return!0}}};return function(){var t=this.__ninput.value;for(var i=0;i<this.__data.rules.length;i++){var n=this.__data.rules[i];var a=e[n.name].call(this,t);if(!a)return!1}return!0}}();d._$getData=function(){var e={key:this.__data.key,label:this.__data.label,value:this.__ninput.value,type:"input"};return e}},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","7f31a069b85883a87d9e7be65faf8ba9","3e028e771c5eb428a1c9f9ae9c062df8");I$("b398ae68808c2f9fee4dc360b829b66f",'<textarea name="ntp" id="#<uploadCnt>">\n  <div class="m-upload form-item j-flag">\n  </div>\n</textarea>\n<textarea name="jst" id="#<uploadBody>">\n  <label class="label">\n    <span class="title">${label}</span>\n    {if required}\n    <span class="u-required">*</span>\n    {/if}\n  </label>\n  <div class="input j-input">\n  </div>\n  <div class="z-error j-error"></div>\n</textarea>\n\n<textarea name="jst" id="#<uploadInput>">\n  {if !value}\n  <label class="j-upload" name="${key}">${uploadBtn}</label>\n  {else}\n  <label class="j-upload f-dn" name="${key}">${uploadBtn}</label>\n  <div class="preview">\n    <i class="u-close" data-action="remove"></i>\n    <div class="left">\n      <i class="cover" data-action="preview" data-url="${value.url}"></i>\n    </div>\n    <div class="right">\n      <div class="name">${value.name}</div>\n      <div class="size">${value.size|fileSizeFormat}</div>\n    </div>\n  </div>\n  {/if}\n</textarea>');
I$("e4cba52a326ec70ff65cf1cd04a0c095",function(e,t,i,n,a,o,s,r,_,c,d,f,l){f._$$Upload=e._$klass();l=f._$$Upload._$extend(a._$$Abstract);l.__init=function(){this.__super();s._$extend({fileSizeFormat:c._$fileSizeFormat})};l.__reset=function(e){this.__super(e);this.__data=c._$extend(e.data,{label:"",key:"",value:"",uploadBtn:"上传附件",rules:[],accept:"*"});try{this.__data.value=JSON.parse(this.__data.value)}catch(t){}this.__render();this.__defineNode();this.__initWidget();this.__initEvent()};l.__destroy=function(){this.__super()};l.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.uploadCnt;this.__seed_body=e.uploadBody;this.__seed_input=e.uploadInput}}();l.__initNode=function(){this.__super()};l.__render=function(){s._$render(this.__body,this.__seed_body,this.__data);this.__renderInput()};l.__renderInput=function(){var e=i._$getByClassName(this.__body,"j-input")[0];s._$render(e,this.__seed_input,this.__data)};l.__defineNode=function(){this.__nerror=i._$getByClassName(this.__body,"j-error")[0]};l.__initWidget=function(){var e=i._$getByClassName(this.__body,"j-upload")[0];var t={accept:this.__data.accept,multiple:!1,node:e,onchange:this.__onFileSelect._$bind(this)};this.__fileSel=r._$bind(e,t)};l.__initEvent=function(){c._$delegateWithStopEvent(this,this.__body,{remove:this.__removeFile._$bind(this),preview:this.__previewFile._$bind(this)})};l.__onFileSelect=function(e){this.__form=e.form;var t=i._$get(e.id),n=t.files;window.nim.previewFile({type:"file",fileInput:t,uploadprogress:this.__onUploadProgress._$bind(this),done:this.__onUploadDone._$bind(this)})};l.__onUploadProgress=function(e){};l.__onUploadDone=function(e,t){if(!e){t.url=c._$transNosToCdn(t.url,"nim");this.__data.value={url:t.url,name:t.name,size:t.size};if(!this.__checkFormat(t))this.__nerror.innerText="目前可支持上传jpg/jpeg/png/bmp/gif格式的图片";else this.__renderInput()}else this.__nerror.innerText="图片上传失败，请稍后重试"};l.__checkFormat=function(e){var t=this.__data.accept.split(",");for(var i=0;i<t.length;i++){var n=t[i];if(n.indexOf("*")>-1)return!0;n=n.split("/")[1];if(e.ext.toLowerCase()==n.toLowerCase())return!0}return!1};l.__renderErrorMsg=function(e){this.__nerror.innerText=e};l._$validate=function(){var e={required:function(e){var t="此信息不能为空";if(!e){this.__renderErrorMsg(t);return!1}else{this.__renderErrorMsg("");return!0}}};return function(){var t=this.__data.value;for(var i=0;i<this.__data.rules.length;i++){var n=this.__data.rules[i];var a=e[n.name].call(this,t);if(!a)return!1}return!0}}();l._$getData=function(){var e={key:this.__data.key,label:this.__data.label,value:this.__data.value,type:this.__data.fileType||"image"};return e};l.__previewFile=function(e,t){var n=t.target,a=i._$dataset(n,"url");if(a)window.open(a,"_blank")};l.__removeFile=function(e,t){this.__data.value=null;this.__renderInput();this.__initWidget()}},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","b7aac098ae4b6dc4338e9db07c9a613d","ba59bcf74b0f62bae6020b0801aef10c","7f31a069b85883a87d9e7be65faf8ba9","b398ae68808c2f9fee4dc360b829b66f");I$("79db01419756d26f4fda92add0b35b0b",'<textarea name="ntp" id="#<formCnt>">\n    <div class="m-form j-flag">\n    </div>\n</textarea>\n<textarea name="jst" id="#<formBody>">\n    <div class="form-hd">\n        ${title}\n    </div>\n    <div class="form-content j-form">\n    </div>\n    <div class="actions">\n        <button class="j-submit">${submitBtn}</button>\n    </div>\n</textarea>\n');I$("bb795a9d66392797af251eae6cabed99",function(e,t,i,n,a,o,s,r,_,c,d,f,l){f._$$Form=e._$klass();l=f._$$Form._$extend(a._$$Abstract);l.__init=function(){this.__super()};l.__reset=function(e){this.__super(e);c._$extend(e.data,{title:"请填写表单",submitBtn:"提交"});s._$render(this.__body,this.__seed_body,e.data);this.__defineNode();this.__initWidget(e.data.list||[]);this.__initEvent()};l.__destroy=function(){this.__super()};l.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.formCnt;this.__seed_body=e.formBody}}();l.__initNode=function(){this.__super()};l.__defineNode=function(){this.__nsubmit=i._$getByClassName(this.__body,"j-submit")[0];this.__nform=i._$getByClassName(this.__body,"j-form")[0]};l.__initWidget=function(e){var t={input:r._$$Input,image:_._$$Upload};this.__widgets=[];n._$forEach(e,function(e){var i=t[e.type]._$allocate({parent:this.__nform,data:e});this.__widgets.push(i)}._$bind(this))};l.__initEvent=function(){this.__doInitDomEvent([[this.__nsubmit,"click",this.__submit._$bind(this)]])};l.__validate=function(){var e=!0;n._$forEach(this.__widgets,function(t){var i=t._$validate();if(!i)e=!1});return e};l.__getData=function(){var e=[];n._$forEach(this.__widgets,function(t){var i=t._$getData();e.push(i)});return e};l.__submit=function(){if(this.__validate()){var e=this.__getData();this._$dispatchEvent("onsubmit",e)}}},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","b3766373d116c51b859d94ae63004333","e4cba52a326ec70ff65cf1cd04a0c095","7f31a069b85883a87d9e7be65faf8ba9","79db01419756d26f4fda92add0b35b0b");I$("e1171a58ef1b19e2205cc960a1ccb5cd",'<textarea name="ntp" id="#<formCnt>">\n    <div class="m-bot-form-cnt">\n    </div>\n</textarea>\n<textarea name="jst" id="#<formBody>">\n    <div class="m-bot-form m-form j-flag">\n        <div class="form-hd">\n            <div class="portrait u-icon-avater">\n                <img src="${icon}" alt="">\n            </div>\n            <div class="title">${title}</div>\n            <div class="u-hide j-hide">\n                <i class="icon-hide"></i>\n            </div>\n        </div>\n        <div class="form-content j-form">\n        </div>\n        <div class="actions">\n            <button type="button" class="u-btn j-submit">${submitBtn}</button>\n        </div>\n    </div>\n</textarea>\n');I$("8497955fc06dc5bf1d473a237354b87a",function(e,t,i,n,a,o,s,r,_,c,d,f){d._$$BotForm=e._$klass();f=d._$$BotForm._$extend(_._$$Form);f.__init=function(){this.__super()};f.__reset=function(e){e.data.icon=e.data.icon||"https://qiyukf.nosdn.127.net/sdk/res/default/robot_portrait@2x_5efee7fa6fe0f977ddf09e37822a1b7c.png";this.__super(e)};f.__destroy=function(){this.__super()};f.__initXGui=function(){var e=o._$parseUITemplate(c);return function(){this.__seed_html=e.formCnt;this.__seed_body=e.formBody}}();f.__initNode=function(){this.__super()};f.__defineNode=function(){this.__super();this.__nhide=i._$getByClassName(this.__body,"j-hide")[0]};f.__initEvent=function(){this.__super();this.__doInitDomEvent([[this.__nhide,"click",this.__hide._$bind(this)]])};f.__hide=function(){this._$dispatchEvent("onhide",this.__getData());this._$recycle()}},"7c0d5856d6e99d0fb30abadfe6db5ad1","7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","7f31a069b85883a87d9e7be65faf8ba9","bb795a9d66392797af251eae6cabed99","e1171a58ef1b19e2205cc960a1ccb5cd");I$("8d5d567d2cc42905d9b0d4a04c200e72",'<textarea name="ntp" id="#<botListBody>">\n\t<div class="m-modal m-modal-botList">\n\t    <div class="modal_dialog">\n\t        <div class="modal_hd-bot">\n\t            <p class="modal_title j-title"></p>\n\t            <div class="modal_close">&times;</div>\n\t        </div>\n\t        <div class="modal_bd">\n\t\t\t\t<div class="m-botList j-scroll-box">\n\t\t\t\t\t<ul class="list">\n            <div class="m-card-layout">\n              <ul class="group-list j-list-box">\n              </ul>\n            </div>     \n          </ul>\n          <div class="load-status j-status"></div>\n\t\t\t\t</div>\n\t        </div>\n\t    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<botListList>">\n\t{list beg..end as y} \n\t\t{var group=xlist[y]}\n      {if group.action.type == "block"}\n      <li class="group-item" data-action="select" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="block">\n      {elseif group.action.type == "popup"}\n        <li class="group-item" data-action="select" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="popup">\n      {elseif group.action.type == "url"}\n      <li class="group-item" data-action="openlink" href="${group.action.target}">\n      {else}\n      <li class="group-item">\n      {/if}\n        <ul class="tr-list">\n          {list group.list as tr}\n            <li class="tr-item">\n              <ul class="td-list">\n                {list tr as td}\n                  <li class="td-item" style="${td.style}">\n                    <div class="inner" style="${td.innerStyle}">\n                      {if td.type == "text"}\n                        <span>${td.value}</span>\n                      {elseif td.type == "image"}\n                        <img src="${td.value}" alt="">\n                      {else}\n                        <span>[暂不支持的消息类型]</span>\n                      {/if}\n                    </div>\n                  </li>\n                {/list}\n              </ul>\n            </li>\n          {/list}\n        </ul>\n      </li>\n  {/list}\n</textarea>\n\n<textarea name="jst" id="#<botListStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading_03ce3dcc84af110e9da8699a841e5200.gif">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\' || status.type == \'empty\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');I$("0af8f78faaa36ef38268382c56c690df",function(e,t,i,n,a,o,s,r,_,c,d,f,l){
f._$$BotList=e._$klass();l=f._$$BotList._$extend(a._$$Abstract);l.__init=function(){this.__super()};l.__reset=function(e){this.__super(e);this.__listBox=t._$getByClassName(this.__body,"j-list-box")[0];this.__scrollBox=t._$getByClassName(this.__body,"j-scroll-box")[0];this.__nstatus=t._$getByClassName(this.__scrollBox,"j-status")[0];this.__ntitle=t._$getByClassName(this.__body,"j-title")[0];this.__data=r._$copy(e.data);this.__loadComplete=!1;this.__listConfig={listBox:this.__listBox,scrollBox:this.__scrollBox,tplSeed:this.__seed_list,scrollDelta:40,data:this.__data.content.template.list,ongetList:this.__getList._$bind(this)};var i=t._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[i,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotlist",this.__onListLoad._$bind(this)]]);r._$delegate(this,this.__listBox,{select:this.__onSelect._$bind(this)});this.__ntitle.innerText=this.__data.content.template.action.title||"";this.__list=_._$$WFList._$allocate(this.__listConfig);this.__list._$next()};l.__destroy=function(){this.__list&&this.__list._$recycle();this.__list=null;this.__autoScrollTimer&&clearTimeout(this.__autoScrollTimer);this.__super()};l.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.botListBody;this.__seed_list=e.botListList;this.__seed_status=e.botListStatus}}();l.__initNode=function(){this.__super()};l.__renderStatus=function(e){s._$render(this.__nstatus,this.__seed_status,{status:e})};l.__getList=function(){if(!this.__loadComplete){this.__renderStatus({type:"loading",msg:"加载中"});c._$do(function(e){e._$getMoreBotList(this.__data.content)}._$bind(this))}};l.__onListLoad=function(e){var t=e.content;if("card_layout"==t.template.id)if(e.error)this.__renderStatus({type:"error",msg:"加载失败，"+e.error.message});else if(0==t.template.list.length){this.__loadComplete=!0;this.__renderStatus({type:"empty",msg:"已经到底了"})}else{this.__renderStatus({type:"success",msg:""});this.__data.content=t;this.__list._$dispatchEvent("listchange",{action:"append",data:t.template.list});this.__autoScrollTimer=setTimeout(function(){if(this.__listBox.clientHeight<=this.__scrollBox.clientHeight)this.__list._$next()}._$bind(this),500)}};l.__onClose=function(){this.__destroy()};l.__onSelect=function(e,t){if(e){this._$dispatchEvent("onselect",e,t);this.__onClose()}}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","7f31a069b85883a87d9e7be65faf8ba9","6b705df96729b96a8b9a51eac133a142","b5fd5227971f68e93c3c9d8c4fce822c","8d5d567d2cc42905d9b0d4a04c200e72");I$("b5521975958c55a62ffefde5ef9b139e",'<textarea name="ntp" id="#<botDetailBody>">\n\t<div class="m-modal m-modal-botDetail">\n    <div class="modal_dialog">\n      <div class="modal_hd-bot">\n        <p class="modal_title j-title"></p>\n        <div class="modal_close">&times;</div>\n      </div>\n      <div class="modal_bd">\n  \t\t\t<div class="m-botDetail">\n  \t\t\t\t<ul class="list j-list"></ul>\n  \t\t\t</div>\n        <div class="load-status j-status"></div>\n      </div>\n    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<botDetailList>">\n  <div class="m-card-layout">\n    <ul class="group-list">\n    \t{list list as group} \n        <li class="group-item">\n          <ul class="tr-list">\n            {list group as tr}\n              <li class="tr-item">\n    \t\t\t\t\t\t<div class="left" style="${tr.left.style}">\n                  <div class="inner" style="${tr.left.innerStyle}">\n      \t\t\t\t\t\t\t{if tr.left.type == \'text\'}\n                \t\t\t<span>${tr.left.value}</span>\n                \t\t{elseif tr.left.type == \'image\'}\n                \t\t\t<img src="${tr.left.value}" alt="">\n                    {else}\n                      <span>[暂不支持的消息类型]</span>\n      \t\t\t\t\t\t\t{/if}\n                  </div>\n    \t\t\t\t\t\t</div>\n    \t\t\t\t\t\t<div class="right" style="${tr.right.style}">\n                  <div class="inner" style="${tr.right.innerStyle}">\n      \t\t\t\t\t\t\t{if tr.right.type == \'text\'}\n                \t\t\t<span>${tr.right.value}</span>\n                \t\t{elseif tr.right.type == \'image\'}\n                \t\t\t<img src="${tr.right.value}" alt="">\n                    {else}\n                      <span>[暂不支持的消息类型]</span>\n      \t\t\t\t\t\t\t{/if}\n                  </div>\n    \t\t\t\t\t\t</div>\n              </li>\n            {/list}\n          </ul>\n        </li>\n      {/list}\n    </ul>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<botDetailStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading_03ce3dcc84af110e9da8699a841e5200.gif">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');I$("13aee0f51783d67bfea7c5f1335c8cf4",function(e,t,i,n,a,o,s,r,_,c,d,f,l){f._$$BotDetail=e._$klass();l=f._$$BotDetail._$extend(a._$$Abstract);l.__init=function(){this.__super()};l.__reset=function(e){this.__super(e);this.__nlist=t._$getByClassName(this.__body,"j-list")[0];this.__ntitle=t._$getByClassName(this.__body,"j-title")[0];this.__nstatus=t._$getByClassName(this.__body,"j-status")[0];this.__data=r._$copy(e.data);if(this.__data.content){this.__data.content.template.id="pair";i._$merge(this.__data.content.template,this.__data.content.template.detail);this.__onDataLoad({error:null,content:this.__data.content})}else if(this.__data.request)this.__getData(this.__data.request);var n=t._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[n,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotdetail",this.__onDataLoad._$bind(this)]])};l.__destroy=function(){this.__super()};l.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.botDetailBody;this.__seed_list=e.botDetailList;this.__seed_status=e.botDetailStatus}}();l.__initNode=function(){this.__super()};l.__renderList=function(){s._$render(this.__nlist,this.__seed_list,this.__data.content.template)};l.__rendStatus=function(){s._$render(this.__nstatus,this.__seed_status,{status:this.__data.status});if("success"==this.__data.status.type)t._$addClassName(this.__nstatus,"f-dn");else t._$delClassName(this.__nstatus,"f-dn")};l.__renderTitle=function(){this.__ntitle.innerText=this.__data.content.template.label||""};l.__getData=function(e){this.__data.status={type:"loading",msg:""};this.__rendStatus();c._$do(function(t){t._$getMoreBotDetail(e)}._$bind(this))};l.__onDataLoad=function(e){var t=e.content;if("pair"==t.template.id)if(e.error){this.__data.status={type:"error",msg:"加载失败，"+e.error.message};this.__rendStatus()}else{if(0==t.template.list.length)this.__data.status={type:"error",msg:t.template.label};else{this.__data.status={type:"success",msg:""};this.__data.content=e.content}this.__rendStatus();this.__renderTitle();this.__renderList()}};l.__onClose=function(){this.__destroy()}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","d1bf8daf5a41ea1e86db380d4fa07f12","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","7f31a069b85883a87d9e7be65faf8ba9","6b705df96729b96a8b9a51eac133a142","b5fd5227971f68e93c3c9d8c4fce822c","b5521975958c55a62ffefde5ef9b139e");!function(){"use strict";function e(t,i,n){function a(){n=n||t;i=i||"root";var e=new Error('Failed to require "'+n+'" from "'+i+'"');e.path=n;e.parent=i;e.require=!0;throw e}var o=e.resolve(t);if(null!=o){var s=e.modules[o];if(!s._resolving&&!s.exports){var r={};r.exports={};r.client=r.component=!0;s._resolving=!0;s.call(this,r.exports,e.relative(o),r);delete s._resolving;s.exports=r.exports}return s.exports}else a()}e.modules={};e.aliases={};e.exts=["",".js",".json","/index.js","/index.json"];e.resolve=function(t){if("/"===t.charAt(0))t=t.slice(1);for(var i=0;i<5;i++){var n=t+e.exts[i];if(e.modules.hasOwnProperty(n))return n;if(e.aliases.hasOwnProperty(n))return e.aliases[n]}};e.normalize=function(e,t){var i=[];if("."!=t.charAt(0))return t;e=e.split("/");t=t.split("/");for(var n=0;n<t.length;++n)if(".."===t[n])e.pop();else if("."!=t[n]&&""!=t[n])i.push(t[n]);return e.concat(i).join("/")};e.register=function(t,i){e.modules[t]=i};e.alias=function(t,i){function n(){throw new Error('Failed to alias "'+t+'", it does not exist')}if(e.modules.hasOwnProperty(t))e.aliases[i]=t;else n()};e.relative=function(t){function i(n){var a=i.resolve(n);return e(a,t,n)}var n=e.normalize(t,"..");i.resolve=function(i){var a=i.charAt(0);if("/"===a)return i.slice(1);if("."===a)return e.normalize(n,i);var o=t.split("/");var s=o.length;for(;s--&&"deps"!==o[s];);i=o.slice(0,s+2).join("/")+"/deps/"+i;return i};i.exists=function(t){return e.modules.hasOwnProperty(i.resolve(t))};return i};e.register("regularjs/src/Regular.js",function(e,t,i){var n=t("./env.js");var a=t("./parser/Lexer.js");var o=t("./parser/Parser.js");var s=t("./config.js");var r=t("./util");var _=t("./helper/extend.js");if(n.browser){var c=t("./helper/combine.js");var d=t("./dom.js");var f=t("./walkers.js");var l=t("./group.js")}var u=t("./helper/event.js");var h=t("./helper/watcher.js");var m=t("./helper/parse.js");var p=t("./helper/filter.js");var g=d.doc;var v=function(e,t){var i=n.isRunning;n.isRunning=!0;var a,s;e=e||{};t=t||{};e.data=e.data||{};e.computed=e.computed||{};e.events=e.events||{};if(this.data)r.extend(e.data,this.data);if(this.computed)r.extend(e.computed,this.computed);if(this.events)r.extend(e.events,this.events);r.extend(this,e,!0);if(this.$parent)this.$parent._append(this);this._children=[];this.$refs={};s=this.template;if("string"==typeof s&&s.length<16&&(a=d.find(s)))s=a.innerHTML;if(s&&s.nodeType)s=s.innerHTML;if("string"==typeof s)this.template=new o(s).parse();this.computed=b(this.computed);
this.$root=this.$root||this;if(this.events)this.$on(this.events);this.$emit("$config");this.config&&this.config(this.data);if(this._body&&this._body.length){this.$body=r.getCompileFn(this._body,this.$parent,{outer:this,namespace:t.namespace,extra:t.extra,record:!0});this._body=null}if(s){this.group=this.$compile(this.template,{namespace:t.namespace});c.node(this)}if(!this.$parent)this.$update();this.$ready=!0;this.$emit("$init");if(this.init)this.init(this.data);n.isRunning=i};f&&(f.Regular=v);r.extend(v,{_directives:{__regexp__:[]},_plugins:{},_protoInheritCache:["directive","use"],__after__:function(e,t){var i;this.__after__=e.__after__;if(t.name)v.component(t.name,this);if(i=t.template){var n,a;if("string"==typeof i&&i.length<16&&(n=d.find(i))){i=n.innerHTML;if(a=d.attr(n,"name"))v.component(a,this)}if(i.nodeType)i=i.innerHTML;if("string"==typeof i)this.prototype.template=new o(i).parse()}if(t.computed)this.prototype.computed=b(t.computed);v._inheritConfig(this,e)},directive:function(e,t){if("object"===r.typeOf(e)){for(var i in e)if(e.hasOwnProperty(i))this.directive(i,e[i]);return this}var n=r.typeOf(e);var a=this._directives,o;if(null!=t){if("function"==typeof t)t={link:t};if("string"===n)a[e]=t;else if("regexp"===n){t.regexp=e;a.__regexp__.push(t)}return this}else if("string"===n&&(o=a[e]))return o;else{var s=a.__regexp__;for(var _=0,c=s.length;_<c;_++){o=s[_];var d=o.regexp.test(e);if(d)return o}}},plugin:function(e,t){var i=this._plugins;if(null==t)return i[e];i[e]=t;return this},use:function(e){if("string"==typeof e)e=v.plugin(e);if("function"!=typeof e)return this;e(this,v);return this},config:function(e,t){var i=!1;if("object"==typeof e)for(var n in e){if("END"===n||"BEGIN"===n)i=!0;s[n]=e[n]}if(i)a.setup()},expression:m.expression,Parser:o,Lexer:a,_addProtoInheritCache:function(e,t){if(Array.isArray(e))return e.forEach(v._addProtoInheritCache);var i="_"+e+"s";v._protoInheritCache.push(e);v[i]={};if(!v[e])v[e]=function(n,a){var o=this[i];if("object"==typeof n){for(var s in n)if(n.hasOwnProperty(s))this[e](s,n[s]);return this}if(null==a)return o[n];o[n]=t?t(a):a;return this}},_inheritConfig:function(e,t){var i=v._protoInheritCache;var n=r.slice(i);n.forEach(function(i){e[i]=t[i];var n="_"+i+"s";if(t[n])e[n]=r.createObject(t[n])});return e}});_(v);v._addProtoInheritCache("component");v._addProtoInheritCache("filter",function(e){return"function"==typeof e?{get:e}:e});u.mixTo(v);h.mixTo(v);v.implement({init:function(){},config:function(){},destroy:function(){this.$emit("$destroy");this.group&&this.group.destroy(!0);this.group=null;this.parentNode=null;this._watchers=null;this._children=[];var e=this.$parent;if(e){var t=e._children.indexOf(this);e._children.splice(t,1)}this.$parent=null;this.$root=null;this._handles=null;this.$refs=null},$compile:function(e,t){t=t||{};if("string"==typeof e)e=new o(e).parse();var i=this.__ext__,n=t.record,a;if(t.extra)this.__ext__=t.extra;if(n)this._record();var s=this._walk(e,t);if(n){a=this._release();var r=this;if(a.length)s.ondestroy=function(){r.$unwatch(a)}}if(t.extra)this.__ext__=i;return s},$bind:function(e,t,i){var n=r.typeOf(t);if("expression"===t.type||"string"===n)this._bind(e,t,i);else if("array"===n)for(var a=0,o=t.length;a<o;a++)this._bind(e,t[a]);else if("object"===n)for(var a in t)if(t.hasOwnProperty(a))this._bind(e,a,t[a]);e.$update();return this},$unbind:function(){},$inject:c.inject,$mute:function(e){e=!!e;var t=e===!1&&this._mute;this._mute=!!e;if(t)this.$update();return this},_bind:function(e,t,i){var n=this;if(!(e&&e instanceof v))throw"$bind() should pass Regular component as first argument";if(!t)throw"$bind() should  pass as least one expression to bind";if(!i)i=t;t=m.expression(t);i=m.expression(i);if(i.set){var a=this.$watch(t,function(t){e.$update(i,t)});e.$on("$destroy",function(){n.$unwatch(a)})}if(t.set){var o=e.$watch(i,function(e){n.$update(t,e)});this.$on("$destroy",e.$unwatch.bind(e,o))}i.set(e,t.get(this))},_walk:function(e,t){if("array"===r.typeOf(e)){var i=[];for(var n=0,a=e.length;n<a;n++)i.push(this._walk(e[n],t));return new l(i)}if("string"==typeof e)return g.createTextNode(e);else return f[e.type||"default"].call(this,e,t)},_append:function(e){this._children.push(e);e.$parent=this},_handleEvent:function(e,t,i,n){var a=this.constructor,o="function"!=typeof i?r.handleEvent.call(this,i,t):i,s=a.event(t),_;if(s)_=s.call(this,e,o,n);else d.on(e,t,o);return s?_:function(){d.off(e,t,o)}},_touchExpr:function(e){var t,i=this.__ext__,n={};if("expression"!==e.type||e.touched)return e;t=e.get||(e.get=new Function(r.ctxName,r.extName,r.prefix+"return ("+e.body+")"));n.get=!i?t:function(e){return t(e,i)};if(e.setbody&&!e.set){var a=e.setbody;e.set=function(t,i,n){e.set=new Function(r.ctxName,r.setName,r.extName,r.prefix+a);return e.set(t,i,n)};e.setbody=null}if(e.set)n.set=!i?e.set:function(t,n){return e.set(t,n,i)};r.extend(n,{type:"expression",touched:!0,once:e.once||e.constant});return n},_f_:function(e){var t=this.constructor;var i=t.filter(e);if(!i)throw Error("filter "+e+" is undefined");return i},_sg_:function(e,t,i){if("undefined"!=typeof i){var n=this.computed,a=n[e];if(a){if("expression"===a.type&&!a.get)this._touchExpr(a);if(a.get)return a.get(this);else r.log("the computed '"+e+"' don't define the get function,  get data."+e+" altnately","warn")}}if("undefined"!=typeof t&&"undefined"!=typeof e)return i&&"undefined"!=typeof i[e]?i[e]:t[e]},_ss_:function(e,t,i,n,a){var a=this.computed,n=n||"=",o,s=a?a[e]:null;if("="!==n){o=s?s.get(this):i[e];switch(n){case"+=":t=o+t;break;case"-=":t=o-t;break;case"*=":t=o*t;break;case"/=":t=o/t;break;case"%=":t=o%t}}if(s)if(s.set)return s.set(this,t);else r.log("the computed '"+e+"' don't define the set function,  assign data."+e+" altnately","warn");i[e]=t;return t}});v.prototype.inject=function(){r.log("use $inject instead of inject","error");return this.$inject.apply(this,arguments)};v.filter(p);i.exports=v;var b=function(){function e(e){return function(t){return e.call(t,t.data)}}function t(e){return function(t,i){e.call(t,i,t.data);return i}}return function(i){if(i){var n={},a,o,s;for(var r in i){a=i[r];s=typeof a;if("expression"!==a.type)if("string"===s)n[r]=m.expression(a);else{o=n[r]={type:"expression"};if("function"===s)o.get=e(a);else{if(a.get)o.get=e(a.get);if(a.set)o.set=t(a.set)}}else n[r]=a}return n}}}()});e.register("regularjs/src/util.js",function(e,t,i){t("./helper/shim.js")();var n=i.exports;var a=t("./helper/entities.js");var o=[].slice;var s={}.toString;var r="undefined"!=typeof window?window:global;n.noop=function(){};n.uid=function(){var e=0;return function(){return e++}}();n.extend=function(e,t,i){for(var n in t)if("undefined"==typeof e[n]||i===!0)e[n]=t[n];return e};n.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)if(e.hasOwnProperty(i))t.push(i);return t};n.varName="d";n.setName="p_";n.ctxName="c";n.extName="e";n.rWord=/^[\$\w]+$/;n.rSimpleAccessor=/^[\$\w]+(\.[\$\w]+)*$/;n.nextTick="function"==typeof setImmediate?setImmediate.bind(r):function(e){setTimeout(e,0)};n.prefix="var "+n.varName+"="+n.ctxName+".data;"+n.extName+"="+n.extName+"||'';";n.slice=function(e,t,i){var n=[];for(var a=t||0,o=i||e.length;a<o;a++){var s=e[a];n.push(s)}return n};n.typeOf=function(e){return null==e?String(e):s.call(e).slice(8,-1).toLowerCase()};n.makePredicate=function f(e,t){function i(e){if(1===e.length)return n+="return str === '"+e[0]+"';";n+="switch(str){";for(var t=0;t<e.length;++t)n+="case '"+e[t]+"':";n+="return true}return false;"}if("string"==typeof e)e=e.split(" ");var n="",a=[];e:for(var o=0;o<e.length;++o){for(var s=0;s<a.length;++s)if(a[s][0].length===e[o].length){a[s].push(e[o]);continue e}a.push([e[o]])}if(a.length>3){a.sort(function(e,t){return t.length-e.length});n+="switch(str.length){";for(var o=0;o<a.length;++o){var r=a[o];n+="case "+r[0].length+":";i(r)}n+="}"}else i(e);return new Function("str",n)};n.trackErrorPos=function(){function e(e,t){var i=0;for(var n=0,a=e.length;n<a;n++){var o=(e[n]||"").length;if(i+o>t)return{num:n,line:e[n],start:t-n-i,prev:e[n-1],next:e[n+1]};i+=o}}function t(e,t,i,o){var s=e.length;var r=t-n;if(r<0)r=0;var _=t+a;if(_>s)_=s;var c=e.slice(r,_);var d="["+(i+1)+"] "+(r>0?"..":"");var f=_<s?"..":"";var l=d+c+f;if(o)l+="\n"+new Array(t-r+d.length+1).join(" ")+"^^^";return l}var i=/\r\n|[\n\r\u2028\u2029]/g;var n=20,a=20;return function(n,a){if(a>n.length-1)a=n.length-1;i.lastIndex=0;var o=n.split(i);var s=e(o,a);var r=s.start,_=s.num;return(s.prev?t(s.prev,r,_-1)+"\n":"")+t(s.line,r,_,!0)+"\n"+(s.next?t(s.next,r,_+1)+"\n":"")}}();var _=/\((\?\!|\?\:|\?\=)/g;n.findSubCapture=function(e){var t=0,i=0,n=e.length,a=e.match(_);if(a)a=a.length;else a=0;for(;n--;){var o=e.charAt(n);if(0===n||"\\"!==e.charAt(n-1)){if("("===o)t++;if(")"===o)i++}}if(t!==i)throw"RegExp: "+e+"'s bracket is not marched";else return t-a};n.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(e){return"\\"+e})};var c=new RegExp("&("+n.keys(a).join("|")+");","gi");n.convertEntity=function(e){return(""+e).replace(c,function(e,t){return String.fromCharCode(a[t])})};n.createObject=function(e,t){function i(){}i.prototype=e;var a=new i;if(t)n.extend(a,t);return a};n.createProto=function(e,t){function i(){this.constructor=e}i.prototype=t;return e.prototype=new i};n.clone=function l(e){var t=n.typeOf(e);if("array"===t){var i=[];for(var a=0,o=e.length;a<o;a++)i[a]=e[a];return i}if("object"===t){var i={};for(var a in e)if(e.hasOwnProperty(a))i[a]=e[a];return i}return e};n.equals=function(e,t){var i=typeof e;if("number"===i&&"number"==typeof t&&isNaN(e)&&isNaN(t))return!0;else return e===t};var d=/-([a-z])/g;n.camelCase=function(e){return e.replace(d,function(e,t){return t.toUpperCase()})};n.throttle=function u(e,t){var t=t||100;var i,n,a;var o=null;var s=0;var r=function(){s=+new Date;o=null;a=e.apply(i,n);i=n=null};return function(){var _=+new Date;var c=t-(_-s);i=this;n=arguments;if(c<=0||c>t){clearTimeout(o);o=null;s=_;a=e.apply(i,n);i=n=null;
}else if(!o)o=setTimeout(r,c);return a}};n.escape=function(){var e=/&/g,t=/</g,i=/>/g,n=/\'/g,a=/\"/g,o=/[&<>\"\']/;return function(s){return o.test(s)?s.replace(e,"&amp;").replace(t,"&lt;").replace(i,"&gt;").replace(n,"&#39;").replace(a,"&quot;"):s}}();n.cache=function(e){e=e||1e3;var t=[],i={};return{set:function(e,n){if(t.length>this.max)i[t.shift()]=void 0;if(void 0===i[e])t.push(e);i[e]=n;return n},get:function(e){if(void 0===e)return i;else return i[e]},max:e,len:function(){return t.length}}};n.handleEvent=function(e,t){var i=this,n;if("expression"===e.type)n=e.get;if(n)return function a(e){i.data.$event=e;var t=n(i);if(t===!1&&e&&e.preventDefault)e.preventDefault();i.data.$event=void 0;i.$update()};else return function s(){var t=o.call(arguments);t.unshift(e);i.$emit.apply(i,t);i.$update()}};n.once=function(e){var t=0;return function(){if(0===t++)e.apply(this,arguments)}};n.fixObjStr=function(e){if(0!==e.trim().indexOf("{"))return"{"+e+"}";else return e};n.log=function(e,t){if("undefined"!=typeof console)console[t||"log"](e)};n.isVoidTag=n.makePredicate("area base br col embed hr img input keygen link menuitem meta param source track wbr r-content");n.isBooleanAttr=n.makePredicate("selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple");n.isFalse-function(){return!1};n.isTrue-function(){return!0};n.isExpr=function(e){return e&&"expression"===e.type};n.isGroup=function(e){return e.inject||e.$inject};n.getCompileFn=function(e,t,i){return t.$compile.bind(t,e,i)}});e.register("regularjs/src/walkers.js",function(e,t,i){function n(e,t,i){var n=[];for(var a=0,o=e.length;a<o;a++){var s=this._walk(e[a],{element:t,fromElement:!0,attrs:e,extra:i});if(s)n.push(s)}return n}var a=t("./helper/arrayDiff.js");var o=t("./helper/combine.js");var s=t("./helper/animate.js");var r=t("./parser/node.js");var _=t("./group.js");var c=t("./dom.js");var d=t("./util");var f=i.exports={};f.list=function(e,t){function i(e,t){for(var i=0;i<t;i++){var n=b.children.splice(e+1,1)[0];if(n)n.destroy(!0)}}function n(i,n,a){for(var r=i;r<n;r++){var _=a[r];var c={};c[$]=r;c[y]=_;c=d.createObject(g,c);var f=v.$compile(e.body,{extra:c,namespace:p,record:!0,outer:t.outer});f.data=c;var l=o.last(b.get(r));if(l.parentNode)s.inject(o.node(f),l,"after");b.children.splice(r+1,0,f)}}function r(e,t,i){for(var n=e;n<t;n++){var a=b.get(n+1);a.data[$]=n;a.data[y]=i[n]}}function c(e,t,o){if(!t)t=[];if(!e)e=[];var s=m;var _=0,c=e.length;if(!o&&(0!==c||0!==t.length))o=a(e,t);if(o&&o.length){for(var d=0;d<o.length;d++){var f=o[d];var l=f.index;var u=f.removed;var h=f.add;var p=u.length;if(C&&p&&h){var g=Math.min(p,h);var v=0;for(;v<g;){if(w(e[l],l)!==w(u[0],l)){i(l,1);n(l,l+1,e)}u.shift();h--;l++;v++}p=u.length}r(_,l,e);i(l,p);n(l,l+h,e);_=l+h-p;_=_<0?0:_}if(_<c)for(var d=_;d<c;d++){var y=b.get(d+1);y.data[$]=d}}}function l(e,t){e=e||[];t=t||[];var a=e.length||0;var o=t.length||0;var s=Math.min(a,o);r(0,s,e);if(a<o)i(a,o-a);else if(a>o)n(o,a,e)}function u(e,i,n){var a=e&&e.length;var r=i&&i.length;if(!r&&a&&b.get(1)){var _=b.children.pop();if(_.destroy)_.destroy(!0)}if(C===!0)l(e,i,n);else c(e,i,n);if(!a&&x&&x.length){var d=v.$compile(x,{extra:g,record:!0,outer:t.outer,namespace:p});b.children.push(d);if(m.parentNode)s.inject(o.node(d),m,"after")}}var h=f.Regular;var m=document.createComment("Regular list"),p=t.namespace,g=t.extra;var v=this;var b=new _([m]);var $=e.variable+"_index";var y=e.variable;var x=e.alternate;var C=e.track,w,E;if(C&&C!==!0){C=this._touchExpr(C);E=d.createObject(g);w=function(e,t){E[y]=e;E[$]=t;return C.get(v,E)}}this.$watch(e.sequence,u,{init:!0,indexTrack:C===!0});return b};f.template=function(e,t){var i=e.content,n;var a=document.createComment("inlcude");var n,o=t.namespace,s=t.extra;var r=new _([a]);if(i){var c=this;this.$watch(i,function(e){var i=r.get(1),_=typeof e;if(i){i.destroy(!0);r.children.pop()}if(e){r.push(n="function"==typeof e?e():c.$compile(e,{record:!0,outer:t.outer,namespace:o,extra:s}));if(a.parentNode)n.$inject(a,"before")}},{init:!0})}return r};var l=0;f["if"]=function(e,t){var i=this,n,a,r=t.extra;if(t&&t.element){var c=function(s){if(s){if(a)o.destroy(a);if(e.consequent)n=i.$compile(e.consequent,{record:!0,element:t.element,extra:r})}else{if(n)o.destroy(n);if(e.alternate)a=i.$compile(e.alternate,{record:!0,element:t.element,extra:r})}};this.$watch(e.test,c,{force:!0});return{destroy:function(){if(n)o.destroy(n);else if(a)o.destroy(a)}}}var d,n,a,f;var u=document.createComment("Regular if"+l++);var h=new _;h.push(u);var m=null,p=t.namespace;var c=function(_,c){var d=!!_;if(d!==m){m=d;if(h.children[1]){h.children[1].destroy(!0);h.children.pop()}if(d){if(e.consequent&&e.consequent.length){n=i.$compile(e.consequent,{record:!0,outer:t.outer,namespace:p,extra:r});h.push(n);if(u.parentNode)s.inject(o.node(n),u,"before")}}else if(e.alternate&&e.alternate.length){a=i.$compile(e.alternate,{record:!0,outer:t.outer,namespace:p,extra:r});h.push(a);if(u.parentNode)s.inject(o.node(a),u,"before")}}};this.$watch(e.test,c,{force:!0,init:!0});return h};f.expression=function(e,t){var i=document.createTextNode("");this.$watch(e,function(e){c.text(i,""+(null==e?"":""+e))});return i};f.text=function(e,t){var i=document.createTextNode(d.convertEntity(e.text));return i};var u=/^on-(.+)$/;f.element=function(e,t){var i=e.attrs,a=this,r=this.constructor,_=e.children,l=t.namespace,u=t.extra,h=e.tag,m=r.component(h),p,g,v;if("r-content"===h){d.log("r-content is deprecated, use {#inc this.$body} instead (`{#include}` as same)","warn");return this.$body&&this.$body()}if(m||"r-component"===h){t.Component=m;return f.component.call(this,e,t)}if("svg"===h)l="svg";if(_&&_.length)g=this.$compile(_,{outer:t.outer,namespace:l,extra:u});v=c.create(h,l,i);if(g&&!d.isVoidTag(h))c.inject(o.node(g),v);if(!e.touched){i.sort(function(e,t){var i=r.directive(e.name),n=r.directive(t.name);if(i&&n)return(n.priority||1)-(i.priority||1);if(i)return 1;if(n)return-1;if("type"===t.name)return 1;else return-1});e.touched=!0}var b=n.call(this,i,v,u);return{type:"element",group:g,node:function(){return v},last:function(){return v},destroy:function(e){if(e)s.remove(v,g?g.destroy.bind(g):d.noop);else if(g)g.destroy();if(b.length)b.forEach(function(e){if(e)if("function"==typeof e.destroy)e.destroy();else e()})}}};f.component=function(e,t){var i=e.attrs,n=t.Component,a=this.constructor,s,r=t.extra,c=t.namespace,f,l=this,h;var m={},p;for(var g=0,v=i.length;g<v;g++){var b=i[g];var $=this._touchExpr(void 0===b.value?!0:b.value);if($.constant)$=b.value=$.get(this);if(b.value&&b.value.constant===!0)$=$.get(this);var y=b.name;if(!b.event){var x=y.match(u);if(x)b.event=x[1]}if("cmpl"===b.mdf)$=d.getCompileFn($,this,{record:!0,namespace:c,extra:r,outer:t.outer});if("is"===y&&!n){h=$;var C=this.$get($,!0);n=a.component(C);if("function"!=typeof n)throw new Error("component "+C+" has not registed!")}var w;if(!(w=b.event)){y=b.name=d.camelCase(y);if("expression"!==$.type)m[y]=$;else m[y]=$.get(l);if("ref"===y&&null!=$)f=$;if("isolate"===y){s="expression"===$.type?$.get(l):parseInt($===!0?3:$,10);m.isolate=s}}else{p=p||{};p[w]=d.handleEvent.call(this,$,w)}}var E={data:m,events:p,$parent:2&s?null:this,$root:this.$root,$outer:t.outer,_body:e.children};var t={namespace:c,extra:t.extra};var S=new n(E,t),I;if(f&&this.$refs){I=n.directive("ref").link;this.$on("$destroy",I.call(this,S,f))}if(f&&l.$refs)l.$refs[f]=S;for(var g=0,v=i.length;g<v;g++){var b=i[g];var $=b.value||!0;var y=b.name;if("expression"===$.type&&!b.event){$=l._touchExpr($);if(!(2&s))this.$watch($,function(e,t){this.data[e]=t}.bind(S,y));if($.set&&!(1&s))S.$watch(y,l.$update.bind(l,$),{sync:!0})}}if(h&&"expression"===h.type){var j=new _;j.push(S);this.$watch(h,function(e){var t=a.component(e);if(!t)throw new Error("component "+e+" has not registed!");var i=new t(E);var n=j.children.pop();j.push(i);i.$inject(o.last(n),"after");n.destroy();if(f)l.$refs[f]=i},{sync:!0});return j}return S};f.attribute=function(e,t){var i=e;var n=i.name;var a=i.value||"";var o=a.constant;var s=this.constructor;var r=s.directive(n);var _=t.element;var f=this;a=this._touchExpr(a);if(o)a=a.get(this);if(r&&r.link){var l=r.link.call(f,_,a,n,t.attrs);if("function"==typeof l)l={destroy:l};return l}else{if("expression"===a.type)this.$watch(a,function(e,t){c.attr(_,n,e)},{init:!0});else if(d.isBooleanAttr(n))c.attr(_,n,!0);else c.attr(_,n,a);if(!t.fromElement)return{destroy:function(){c.attr(_,n,null)}}}}});e.register("regularjs/src/env.js",function(e,t,i){var n=t("./util");e.svg=function(){return"undefined"!=typeof document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();e.browser="undefined"!=typeof document&&document.nodeType;e.exprCache=n.cache(1e3);e.isRunning=!1});e.register("regularjs/src/index.js",function(e,t,i){var n=t("./env.js");var a=t("./config");var o=i.exports=t("./Regular.js");var s=o.Parser;var r=o.Lexer;if(n.browser){t("./directive/base.js");t("./directive/animation.js");t("./module/timeout.js");o.dom=t("./dom.js")}o.env=n;o.util=t("./util.js");o.parse=function(e,t){t=t||{};if(t.BEGIN||t.END){if(t.BEGIN)a.BEGIN=t.BEGIN;if(t.END)a.END=t.END;r.setup()}var i=new s(e).parse();return!t.stringify?i:JSON.stringify(i)}});e.register("regularjs/src/dom.js",function(e,t,i){function n(e){return(""+e).replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()})}function a(e,t){return"change"===t&&s.msie<9&&e&&e.tagName&&"input"===e.tagName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)?"click":t}function o(e){e=e||window.event;if(e._fixed)return e;this.event=e;this.target=e.target||e.srcElement;var t=this.type=e.type;var i=this.button=e.button;if(m.test(t)){this.pageX=null!=e.pageX?e.pageX:e.clientX+p.scrollLeft;this.pageY=null!=e.pageX?e.pageY:e.clientY+p.scrollTop;if("mouseover"===t||"mouseout"===t){var n=e.relatedTarget||e[("mouseover"===t?"from":"to")+"Element"];for(;n&&3===n.nodeType;)n=n.parentNode;this.relatedTarget=n}}if("DOMMouseScroll"===t||"mousewheel"===t)this.wheelDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;
this.which=e.which||e.keyCode;if(!this.which&&void 0!==i)this.which=1&i?1:2&i?3:4&i?2:0;this._fixed=!0}var s=i.exports;var r=t("./env.js");var _=t("./util");var c=document.createElement("div");var d,f;var l=function(){};var u={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};s.body=document.body;s.doc=document;s.tNode=c;if(c.addEventListener){d=function(e,t,i){e.addEventListener(t,i,!1)};f=function(e,t,i){e.removeEventListener(t,i,!1)}}else{d=function(e,t,i){e.attachEvent("on"+t,i)};f=function(e,t,i){e.detachEvent("on"+t,i)}}s.msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]);if(isNaN(s.msie))s.msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]);s.find=function(e){if(document.querySelector)try{return document.querySelector(e)}catch(t){}if(e.indexOf("#")!==-1)return document.getElementById(e.slice(1))};s.inject=function(e,t,i){i=i||"bottom";if(e){if(Array.isArray(e)){var n=e;e=s.fragment();for(var a=0,o=n.length;a<o;a++)e.appendChild(n[a])}var r,_;switch(i){case"bottom":t.appendChild(e);break;case"top":if(r=t.firstChild)t.insertBefore(e,t.firstChild);else t.appendChild(e);break;case"after":if(_=t.nextSibling)_.parentNode.insertBefore(e,_);else t.parentNode.appendChild(e);break;case"before":t.parentNode.insertBefore(e,t)}}};s.id=function(e){return document.getElementById(e)};s.create=function(e,t,i){if("svg"===t){if(!r.svg)throw Error("the env need svg support");t=u.svg}return!t?document.createElement(e):document.createElementNS(t,e)};s.fragment=function(){return document.createDocumentFragment()};var h={"class":function(e,t){"className"in e&&(e.namespaceURI===u.html||!e.namespaceURI)?e.className=t||"":e.setAttribute("class",t)},"for":function(e,t){"htmlFor"in e?e.htmlFor=t:e.setAttribute("for",t)},style:function(e,t){e.style?e.style.cssText=t:e.setAttribute("style",t)},value:function(e,t){e.value=null!=t?t:""}};s.attr=function(e,t,i){if(_.isBooleanAttr(t))if("undefined"!=typeof i)if(i){e[t]=!0;e.setAttribute(t,t);if(s.msie&&s.msie<=7)e.defaultChecked=!0}else{e[t]=!1;e.removeAttribute(t)}else return e[t]||(e.attributes.getNamedItem(t)||l).specified?t:void 0;else if("undefined"!=typeof i)if(h[t])h[t](e,i);else if(null===i)e.removeAttribute(t);else e.setAttribute(t,i);else if(e.getAttribute){var n=e.getAttribute(t,2);return null===n?void 0:n}};s.on=function(e,t,i){var n=t.split(" ");i.real=function(t){var n=new o(t);n.origin=e;i.call(e,n)};n.forEach(function(t){t=a(e,t);d(e,t,i.real)})};s.off=function(e,t,i){var n=t.split(" ");i=i.real||i;n.forEach(function(t){t=a(e,t);f(e,t,i)})};s.text=function(){var e={};if(s.msie&&s.msie<9){e[1]="innerText";e[3]="nodeValue"}else e[1]=e[3]="textContent";return function(t,i){var n=e[t.nodeType];if(null==i)return n?t[n]:"";t[n]=i}}();s.html=function(e,t){if("undefined"==typeof t)return e.innerHTML;else e.innerHTML=t};s.replace=function(e,t){if(t.parentNode)t.parentNode.replaceChild(e,t)};s.remove=function(e){if(e.parentNode)e.parentNode.removeChild(e)};s.css=function(e,t,i){if("object"!==_.typeOf(t))if("undefined"!=typeof i){t=n(t);if(t)e.style[t]=i}else{var a;if(s.msie<=8){a=e.currentStyle&&e.currentStyle[t];if(""===a)a="auto"}a=a||e.style[t];if(s.msie<=8)a=""===a?void 0:a;return a}else for(var o in t)if(t.hasOwnProperty(o))s.css(e,o,t[o])};s.addClass=function(e,t){var i=e.className||"";if((" "+i+" ").indexOf(" "+t+" ")===-1)e.className=i?i+" "+t:t};s.delClass=function(e,t){var i=e.className||"";e.className=(" "+i+" ").replace(" "+t+" "," ").trim()};s.hasClass=function(e,t){var i=e.className||"";return(" "+i+" ").indexOf(" "+t+" ")!==-1};var m=/^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\w+))$/;var p=document;p=!p.compatMode||"CSS1Compat"===p.compatMode?p.documentElement:p.body;_.extend(o.prototype,{immediateStop:_.isFalse,stop:function(){this.preventDefault().stopPropagation()},preventDefault:function(){if(this.event.preventDefault)this.event.preventDefault();else this.event.returnValue=!1;return this},stopPropagation:function(){if(this.event.stopPropagation)this.event.stopPropagation();else this.event.cancelBubble=!0;return this},stopImmediatePropagation:function(){if(this.event.stopImmediatePropagation)this.event.stopImmediatePropagation()}});s.nextFrame=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){setTimeout(e,16)};var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||function(e){clearTimeout(e)};return function(i){var n=e(i);return function(){t(n)}}}();var g;s.nextReflow=s.msie?function(e){return s.nextFrame(function(){g=document.body.offsetWidth;e()})}:s.nextFrame});e.register("regularjs/src/group.js",function(e,t,i){function n(e){this.children=e||[]}var a=t("./util");var o=t("./helper/combine");var s=a.extend(n.prototype,{destroy:function(e){o.destroy(this.children,e);if(this.ondestroy)this.ondestroy();this.children=null},get:function(e){return this.children[e]},push:function(e){this.children.push(e)}});s.inject=s.$inject=o.inject;i.exports=n});e.register("regularjs/src/config.js",function(e,t,i){i.exports={BEGIN:"{",END:"}"}});e.register("regularjs/src/const.js",function(e,t,i){i.exports={COMPONENT_TYPE:1,ELEMENT_TYPE:2}});e.register("regularjs/src/parser/Lexer.js",function(e,t,i){function n(e){return function(t){return{type:e,value:t}}}function a(e,t){if(c[_.END]){this.markStart=c[_.END];this.markEnd=_.END}this.input=(e||"").trim();this.opts=t||{};this.map=2!==this.opts.mode?d:f;this.states=["INIT"];if(t&&t.expression){this.states.push("JST");this.expression=!0}}function o(e){var t,i={},n;for(var a=0,o=e.length;a<o;a++){t=e[a];n=t[2]||"INIT";(i[n]||(i[n]={rules:[],links:[]})).rules.push(t)}return s(i)}function s(e){function t(e,t){return"string"==typeof l[t]?r.escapeRegExp(l[t]):String(l[t]).slice(1,-1)}var i,a,o,s,_,c,d;for(var f in e){i=e[f];i.curIndex=1;a=i.rules;o=[];for(var u=0,h=a.length;u<h;u++){d=a[u];_=d[0];s=d[1];if("string"==typeof s)s=n(s);if("regexp"===r.typeOf(_))_=_.toString().slice(1,-1);_=_.replace(/\{(\w+)\}/g,t);c=r.findSubCapture(_)+1;i.links.push([i.curIndex,c,s]);i.curIndex+=c;o.push(_)}i.TRUNK=new RegExp("^(?:("+o.join(")|(")+"))")}return e}var r=t("../util.js");var _=t("../config.js");var c={"}":"{","]":"["},d,f;var l={NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][_0-9A-Za-z\$]*/,SPACE:/[\r\n\f ]/};var u=/a|(b)/.exec("a");var h=u&&void 0===u[1]?function(e){return void 0!==e}:function(e){return!!e};var m=a.prototype;m.lex=function(e){e=(e||this.input).trim();var t=[],i,n,a,o,s;this.input=e,this.marks=0;this.index=0;var r=0;for(;e;){r++;s=this.state();i=this.map[s];n=i.TRUNK.exec(e);if(!n)this.error("Unrecoginized Token");a=n[0].length;e=e.slice(a);o=this._process.call(this,n,i,e);if(o)t.push(o);this.index+=a}t.push({type:"EOF"});return t};m.error=function(e){throw Error("Parse Error: "+e+":\n"+r.trackErrorPos(this.input,this.index))};m._process=function(e,t,i){var n=t.links,a=!1,o;for(var s=n.length,r=0;r<s;r++){var _=n[r],c=_[2],d=_[0];if(h(e[d])){a=!0;if(c){o=c.apply(this,e.slice(d,d+_[1]));if(o)o.pos=this.index}break}}if(!a)switch(i.charAt(0)){case"<":this.enter("TAG");break;default:this.enter("JST")}return o};m.enter=function(e){this.states.push(e);return this};m.state=function(){var e=this.states;return e[e.length-1]};m.leave=function(e){var t=this.states;if(!e||t[t.length-1]===e)t.pop()};a.setup=function(){l.END=_.END;l.BEGIN=_.BEGIN;d=o([p.ENTER_JST,p.ENTER_TAG,p.TEXT,p.TAG_NAME,p.TAG_OPEN,p.TAG_CLOSE,p.TAG_PUNCHOR,p.TAG_ENTER_JST,p.TAG_UNQ_VALUE,p.TAG_STRING,p.TAG_SPACE,p.TAG_COMMENT,p.JST_OPEN,p.JST_CLOSE,p.JST_COMMENT,p.JST_EXPR_OPEN,p.JST_IDENT,p.JST_SPACE,p.JST_LEAVE,p.JST_NUMBER,p.JST_PUNCHOR,p.JST_STRING,p.JST_COMMENT]);f=o([p.ENTER_JST2,p.TEXT,p.JST_COMMENT,p.JST_OPEN,p.JST_CLOSE,p.JST_EXPR_OPEN,p.JST_IDENT,p.JST_SPACE,p.JST_LEAVE,p.JST_NUMBER,p.JST_PUNCHOR,p.JST_STRING,p.JST_COMMENT])};var p={ENTER_JST:[/[^\x00<]*?(?={BEGIN})/,function(e){this.enter("JST");if(e)return{type:"TEXT",value:e}}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(e){this.enter("JST");if(e)return{type:"TEXT",value:e}}],ENTER_TAG:[/[^\x00]*?(?=<[\w\/\!])/,function(e){this.enter("TAG");if(e)return{type:"TEXT",value:e}}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_UNQ_VALUE:[/[^\{}&"'=><`\r\n\f ]+/,"UNQ","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(e,t){return{type:"TAG_OPEN",value:t}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f ]*>/,function(e,t){this.leave();return{type:"TAG_CLOSE",value:t}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[\>\/=&]/,function(e){if(">"===e)this.leave();return{type:e,value:e}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)\"/,function(e,t,i){var n=t||i||"";return{type:"STRING",value:n}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],TAG_COMMENT:[/<\!--([^\x00]*?)--\>/,function(e){this.leave()},"TAG"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(e,t){return{type:"OPEN",value:t}},"JST"],JST_LEAVE:[/{END}/,function(e){if(this.markEnd===e&&this.expression)return{type:this.markEnd,value:this.markEnd};if(!this.markEnd||!this.marks){this.firstEnterStart=!1;this.leave("JST");return{type:"END"}}else{this.marks--;return{type:this.markEnd,value:this.markEnd}}},"JST"],JST_CLOSE:[/{BEGIN}\s*\/({IDENT})\s*{END}/,function(e,t){this.leave("JST");return{type:"CLOSE",value:t}},"JST"],JST_COMMENT:[/{BEGIN}\!([^\x00]*?)\!{END}/,function(){this.leave()},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(e,t){if(e===this.markStart){if(this.expression)return{type:this.markStart,value:this.markStart};if(this.firstEnterStart||this.marks){this.marks++;this.firstEnterStart=!1;return{type:this.markStart,value:this.markStart}}else this.firstEnterStart=!0}return{type:"EXPR_OPEN",escape:!1}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%\!]?\=|\|\||&&|\@\(|\.\.|[<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!,]/,function(e){
return{type:e,value:e}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(e,t,i){return{type:"STRING",value:t||i||""}},"JST"],JST_NUMBER:[/(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?/,function(e){return{type:"NUMBER",value:parseFloat(e,10)}},"JST"]};a.setup();i.exports=a});e.register("regularjs/src/parser/node.js",function(e,t,i){i.exports={element:function(e,t,i){return{type:"element",tag:e,attrs:t,children:i}},attribute:function(e,t,i){return{type:"attribute",name:e,value:t,mdf:i}},"if":function(e,t,i){return{type:"if",test:e,consequent:t,alternate:i}},list:function(e,t,i,n,a){return{type:"list",sequence:e,alternate:n,variable:t,body:i,track:a}},expression:function(e,t,i){return{type:"expression",body:e,constant:i||!1,setbody:t||!1}},text:function(e){return{type:"text",text:e}},template:function(e){return{type:"template",content:e}}}});e.register("regularjs/src/parser/Parser.js",function(e,t,i){function n(e,t){t=t||{};this.input=e;this.tokens=new r(e,t).lex();this.pos=0;this.length=this.tokens.length}var a=t("../util.js");var o=t("../config.js");var s=t("./node.js");var r=t("./Lexer.js");var _=a.varName;var c=a.ctxName;var d=a.extName;var f=a.makePredicate("STRING IDENT NUMBER");var l=a.makePredicate("true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object");var u=n.prototype;u.parse=function(){this.pos=0;var e=this.program();if("TAG_CLOSE"===this.ll().type)this.error("You may got a unclosed Tag");return e};u.ll=function(e){e=e||1;if(e<0)e+=1;var t=this.pos+e-1;if(t>this.length-1)return this.tokens[this.length-1];else return this.tokens[t]};u.la=function(e){return(this.ll(e)||"").type};u.match=function(e,t){var i;if(!(i=this.eat(e,t))){i=this.ll();this.error("expect ["+e+(null==t?"":":"+t)+']" -> got "['+i.type+(null==t?"":":"+i.value)+"]",i.pos)}else return i};u.error=function(e,t){e="\n【 parse failed 】 "+e+":\n\n"+a.trackErrorPos(this.input,"number"==typeof t?t:this.ll().pos||0);throw new Error(e)};u.next=function(e){e=e||1;this.pos+=e};u.eat=function(e,t){var i=this.ll();if("string"!=typeof e){for(var n=e.length;n--;)if(i.type===e[n]){this.next();return i}}else if(i.type===e&&("undefined"==typeof t||i.value===t)){this.next();return i}return!1};u.program=function(){var e=[],t=this.ll();for(;"EOF"!==t.type&&"TAG_CLOSE"!==t.type;){e.push(this.statement());t=this.ll()}return e};u.statement=function(){var e=this.ll();switch(e.type){case"NAME":case"TEXT":var t=e.value;this.next();for(;e=this.eat(["NAME","TEXT"]);)t+=e.value;return s.text(t);case"TAG_OPEN":return this.xml();case"OPEN":return this.directive();case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}};u.xml=function(){var e,t,i,n;e=this.match("TAG_OPEN").value;t=this.attrs();n=this.eat("/");this.match(">");if(!n&&!a.isVoidTag(e)){i=this.program();if(!this.eat("TAG_CLOSE",e))this.error("expect </"+e+"> gotno matched closeTag")}return s.element(e,t,i)};u.xentity=function(e){var t=e.value,i,n;if("NAME"===e.type){if(~t.indexOf(".")){var a=t.split(".");t=a[0];n=a[1]}if(this.eat("="))i=this.attvalue(n);return s.attribute(t,i,n)}else{if("if"!==t)this.error("current version. ONLY RULE #if #else #elseif is valid in tag, the rule #"+t+" is invalid");return this["if"](!0)}};u.attrs=function(e){var t;if(!e)t=["NAME","OPEN"];else t=["NAME"];var i=[],n;for(;n=this.eat(t);)i.push(this.xentity(n));return i};u.attvalue=function(e){var t=this.ll();switch(t.type){case"NAME":case"UNQ":case"STRING":this.next();var i=t.value;if(~i.indexOf(o.BEGIN)&&~i.indexOf(o.END)&&"cmpl"!==e){var a=!0;var r=new n(i,{mode:2}).parse();if(1===r.length&&"expression"===r[0].type)return r[0];var _=[];r.forEach(function(e){if(!e.constant)a=!1;_.push(e.body||"'"+e.text.replace(/'/g,"\\'")+"'")});_="["+_.join(",")+"].join('')";i=s.expression(_,null,a)}return i;case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}};u.directive=function(){var e=this.ll().value;this.next();if("function"==typeof this[e])return this[e]();else this.error("Undefined directive["+e+"]")};u.interplation=function(){this.match("EXPR_OPEN");var e=this.expression(!0);this.match("END");return e};u.inc=u.include=function(){var e=this.expression();this.match("END");return s.template(e)};u["if"]=function(e){var t=this.expression();var i=[],n=[];var a=i;var o=!e?"statement":"attrs";this.match("END");var r,_;for(;!(_=this.eat("CLOSE"));){r=this.ll();if("OPEN"===r.type)switch(r.value){case"else":a=n;this.next();this.match("END");break;case"elseif":this.next();n.push(this["if"](e));return s["if"](t,i,n);default:a.push(this[o](!0))}else a.push(this[o](!0))}if("if"!==_.value)this.error("Unmatched if directive");return s["if"](t,i,n)};u.list=function(){var e=this.expression(),t,i,n;var a=[],o=[];var r=a;this.match("IDENT","as");t=this.match("IDENT").value;if(this.eat("IDENT","by"))if(this.eat("IDENT",t+"_index"))n=!0;else{n=this.expression();if(n.constant)n=!0}this.match("END");for(;!(i=this.eat("CLOSE"));)if(this.eat("OPEN","else")){r=o;this.match("END")}else r.push(this.statement());if("list"!==i.value)this.error("expect list got /"+i.value+" ",i.pos);return s.list(e,t,a,o,n)};u.expression=function(){var e;if(this.eat("@(")){e=this.expr();e.once=!0;this.match(")")}else e=this.expr();return e};u.expr=function(){this.depend=[];var e=this.filter();var t=e.get||e;var i=e.set;return s.expression(t,i,!this.depend.length)};u.filter=function(){var e=this.assign();var t=this.eat("|");var i=[],n,o,s="t",r=e.set,_,d="";if(t){if(r)n=[];o="(function("+s+"){";do{d=s+" = "+c+"._f_('"+this.match("IDENT").value+"' ).get.call( "+a.ctxName+","+s;if(this.eat(":"))d+=", "+this.arguments("|").join(",")+");";else d+=");";i.push(d);n&&n.unshift(d.replace(" ).get.call"," ).set.call"))}while(t=this.eat("|"));i.push("return "+s);n&&n.push("return "+s);_=o+i.join("")+"})("+e.get+")";if(n)r=r.replace(a.setName,o+n.join("")+"})("+a.setName+")");return this.getset(_,r)}return e};u.assign=function(){var e=this.condition(),t;if(t=this.eat(["=","+=","-=","*=","/=","%="])){if(!e.set)this.error("invalid lefthand expression in assignment expression");return this.getset(e.set.replace(","+a.setName,","+this.condition().get).replace("'='","'"+t.type+"'"),e.set)}return e};u.condition=function(){var e=this.or();if(this.eat("?"))return this.getset([e.get+"?",this.assign().get,this.match(":").type,this.assign().get].join(""));else return e};u.or=function(){var e=this.and();if(this.eat("||"))return this.getset(e.get+"||"+this.or().get);else return e};u.and=function(){var e=this.equal();if(this.eat("&&"))return this.getset(e.get+"&&"+this.and().get);else return e};u.equal=function(){var e=this.relation(),t;if(t=this.eat(["==","!=","===","!=="]))return this.getset(e.get+t.type+this.equal().get);else return e};u.relation=function(){var e=this.additive(),t;if(t=this.eat(["<",">",">=","<="])||this.eat("IDENT","in"))return this.getset(e.get+t.value+this.relation().get);else return e};u.additive=function(){var e=this.multive(),t;if(t=this.eat(["+","-"]))return this.getset(e.get+t.value+this.additive().get);else return e};u.multive=function(){var e=this.range(),t;if(t=this.eat(["*","/","%"]))return this.getset(e.get+t.type+this.multive().get);else return e};u.range=function(){var e=this.unary(),t,i;if(t=this.eat("..")){i=this.unary();var n="(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })("+e.get+","+i.get+")";return this.getset(n)}return e};u.unary=function(){var e;if(e=this.eat(["+","-","~","!"]))return this.getset("("+e.type+this.unary().get+")");else return this.member()};u.member=function(e,t,i,n){var o,s,r;var l=!1;if(!e){s=this.primary();var u=typeof s;if("string"===u){i=[];i.push(s);t=s;r=d+"."+s;e=c+"._sg_('"+s+"', "+_+", "+d+")";l=!0}else if("this"===s.get){e=c;i=["this"]}else{i=null;e=s.get}}else if("string"==typeof t&&f(t))i.push(t);else{if(i&&i.length)this.depend.push(i);i=null}if(o=this.eat(["[",".","("]))switch(o.type){case".":var h=this.match("IDENT").value;n=e;if("("!==this.la())e=c+"._sg_('"+h+"', "+e+")";else e+="['"+h+"']";return this.member(e,h,i,n);case"[":s=this.assign();n=e;if("("!==this.la())e=c+"._sg_("+s.get+", "+e+")";else e+="["+s.get+"]";this.match("]");return this.member(e,s,i,n);case"(":var m=this.arguments().join(",");e=e+"("+m+")";this.match(")");return this.member(e,null,i)}if(i&&i.length)this.depend.push(i);var p={get:e};if(t)p.set=c+"._ss_("+(t.get?t.get:"'"+t+"'")+","+a.setName+","+(n?n:a.varName)+", '=', "+(l?1:0)+")";return p};u.arguments=function(e){e=e||")";var t=[];do if(this.la()!==e)t.push(this.assign().get);while(this.eat(","));return t};u.primary=function(){var e=this.ll();switch(e.type){case"{":return this.object();case"[":return this.array();case"(":return this.paren();case"STRING":this.next();return this.getset("'"+e.value+"'");case"NUMBER":this.next();return this.getset(""+e.value);case"IDENT":this.next();if(l(e.value))return this.getset(e.value);else return e.value;default:this.error("Unexpected Token: "+e.type)}};u.object=function(){var e=[this.match("{").type];var t=this.eat(["STRING","IDENT","NUMBER"]);for(;t;){e.push("'"+t.value+"'"+this.match(":").type);var i=this.assign().get;e.push(i);t=null;if(this.eat(",")&&(t=this.eat(["STRING","IDENT","NUMBER"])))e.push(",")}e.push(this.match("}").type);return{get:e.join("")}};u.array=function(){var e=[this.match("[").type],t;if(this.eat("]"))e.push("]");else{for(;t=this.assign();){e.push(t.get);if(this.eat(","))e.push(",");else break}e.push(this.match("]").type)}return{get:e.join("")}};u.paren=function(){this.match("(");var e=this.filter();e.get="("+e.get+")";this.match(")");return e};u.getset=function(e,t){return{get:e,set:t}};i.exports=n});e.register("regularjs/src/helper/extend.js",function(e,t,i){function n(e,t,i){return function(){var n=this.supr;this.supr=i[e];var a=t.apply(this,arguments);this.supr=n;return a}}function a(e,t,i){for(var a in t)if(t.hasOwnProperty(a))e[a]=r(t[a])&&r(i[a])&&s.test(t[a])?n(a,t[a],i):t[a];
}var o=t("../util.js"),s=/xy/.test(function(){"xy"})?/\bsupr\b/:/.*/,r=function(e){return"function"==typeof e};var _=["events","data","computed"],c=_.length;i.exports=function d(e){function t(){n.apply(this,arguments)}function i(e){var t=c;for(;t--;){var i=_[t];if(e.hasOwnProperty(i)&&s.hasOwnProperty(i)){o.extend(s[i],e[i],!0);delete e[i]}}a(s,e,r);return this}e=e||{};var n=this,s,r=n&&n.prototype||{};if("function"==typeof e){s=e.prototype;e.implement=i;e.extend=d;return e}s=o.createProto(t,r);t.implement=i;t.implement(e);if(n.__after__)n.__after__.call(t,n,e);t.extend=d;return t}});e.register("regularjs/src/helper/shim.js",function(e,t,i){function n(e,t){for(var i in t)if(void 0===e[i])e[i]=t[i];return t}var a=[].slice;var o={}.toString;i.exports=function(){n(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")}});n(Array.prototype,{indexOf:function(e,t){t=t||0;for(var i=t,n=this.length;i<n;i++)if(this[i]===e)return i;return-1},forEach:function(e,t){for(var i=0,n=this.length;i<n;i++)e.call(t,this[i],i,this)},filter:function(e,t){var i=[];for(var n=0,a=this.length;n<a;n++){var o=e.call(t,this[n],n,this);if(o)i.push(this[n])}return i},map:function(e,t){var i=[];for(var n=0,a=this.length;n<a;n++)i.push(e.call(t,this[n],n,this));return i}});n(Function.prototype,{bind:function(e){var t=this;var i=a.call(arguments,1);return function(){var n=i.concat(a.call(arguments));return t.apply(e,n)}}});n(Array,{isArray:function(e){return"[object Array]"===o.call(e)}})}});e.register("regularjs/src/helper/parse.js",function(e,t,i){var n=t("../env").exprCache;var a=t("../util");var o=t("../parser/Parser.js");i.exports={expression:function(e,t){if("string"==typeof e&&(e=e.trim()))e=n.get(e)||n.set(e,new o(e,{mode:2,expression:!0}).expression());if(e)return e},parse:function(e){return new o(e).parse()}}});e.register("regularjs/src/helper/watcher.js",function(e,t,i){function n(){}var a=t("../util.js");var o=t("./parse.js").expression;var s=t("./arrayDiff.js");var r={$watch:function(e,t,i){var n,s,r,_,c=this.__ext__;if(!this._watchers)this._watchers=[];i=i||{};if(i===!0)i={deep:!0};var d=a.uid("w_");if(Array.isArray(e)){var f=[];for(var l=0,u=e.length;l<u;l++)f.push(this.$expression(e[l]).get);var h=[];r=function(e){var t=!0;for(var i=0,n=f.length;i<n;i++){var o=f[i](e,c);if(!a.equals(o,h[i])){t=!1;h[i]=a.clone(o)}}return t?!1:h}}else if("function"==typeof e)n=e.bind(this);else{e=this._touchExpr(o(e));n=e.get;s=e.once}var m={id:d,get:n,fn:t,once:s,force:i.force,notld:i.indexTrack,test:r,deep:i.deep,last:i.sync?n(this):i.last};this._watchers.push(m);_=this._records&&this._records.length;if(_)this._records[_-1].push(d);if(i.init===!0){var p=this.$phase;this.$phase="digest";this._checkSingleWatch(m,this._watchers.length-1);this.$phase=p}return m},$unwatch:function(e){e=e.uid||e;if(!this._watchers)this._watchers=[];if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.$unwatch(e[t]);else{var n=this._watchers,a,o;if(!e||!n||!(o=n.length))return;for(;o--;){a=n[o];if(a&&a.id===e)n.splice(o,1)}}},$expression:function(e){return this._touchExpr(o(e))},$digest:function(){if("digest"!==this.$phase&&!this._mute){this.$phase="digest";var e=!1,t=0;for(;e=this._digest();)if(++t>20)throw Error("there may a circular dependencies reaches");if(t>0&&this.$emit)this.$emit("$update");this.$phase=null}},_digest:function(){var e=this._watchers;var t=!1,i,n,a;if(e&&e.length)for(var o=0,s=e.length;o<s;o++){n=e[o];a=this._checkSingleWatch(n,o);if(a)t=!0}i=this._children;if(i&&i.length)for(var r=0,_=i.length;r<_;r++){var c=i[r];if(c&&c._digest())t=!0}return t},_checkSingleWatch:function(e,t){var i=!1;if(e){var n,o,r,_,c,d;if(!e.test){n=e.get(this);o=e.last;r=a.typeOf(o);_=a.typeOf(n);c=!0,d;if("object"!==_||"object"!==r||!e.deep)if("array"===_&&("undefined"==r||"array"===r)){d=s(n,e.last||[],e.notld);if("array"!==r||d===!0||d.length)i=!0}else{c=a.equals(n,o);if(!c||e.force){e.force=null;i=!0}}else{for(var f in n)if(o[f]!==n[f]){i=!0;break}if(i!==!0)for(var l in o)if(o[l]!==n[l]){i=!0;break}}}else{var u=e.test(this);if(u){i=!0;e.fn.apply(this,u)}}if(i&&!e.test){if("object"===_&&e.deep||"array"===_)e.last=a.clone(n);else e.last=n;e.fn.call(this,n,o,d);if(e.once)this._watchers.splice(t,1)}return i}},$set:function(e,t){if(null!=e){var i=a.typeOf(e);if("string"===i||"expression"===e.type){e=this.$expression(e);e.set(this,t)}else if("function"===i)e.call(this,this.data);else for(var n in e)this.$set(n,e[n])}},$get:function(e,t){if(t&&"string"==typeof e)return e;else return this.$expression(e).get(this)},$update:function(){this.$set.apply(this,arguments);var e=this;do{if(e.data.isolate||!e.$parent)break;e=e.$parent}while(e);e.$digest()},_record:function(){if(!this._records)this._records=[];this._records.push([])},_release:function(){return this._records.pop()}};a.extend(n.prototype,r);n.mixTo=function(e){e="function"==typeof e?e.prototype:e;return a.extend(e,r)};i.exports=n});e.register("regularjs/src/helper/event.js",function(e,t,i){function n(){}var a=[].slice,o=t("../util.js");var s={$on:function(e,t){if("object"==typeof e)for(var i in e)this.$on(i,e[i]);else{var n=this;var a=n._handles||(n._handles={}),o=a[e]||(a[e]=[]);o.push(t)}return this},$off:function(e,t){var i=this;if(i._handles){if(!e)this._handles={};var n=i._handles,a;if(a=n[e]){if(!t){n[e]=[];return i}for(var o=0,s=a.length;o<s;o++)if(t===a[o]){a.splice(o,1);return i}}return i}},$emit:function(e){var t=this;var i=t._handles,n,o,s;if(e){var o=a.call(arguments,1);var s=e;if(!i)return t;if(n=i[s.slice(1)])for(var r=0,_=n.length;r<_;r++)n[r].apply(t,o);if(!(n=i[s]))return t;for(var c=0,_=n.length;c<_;c++)n[c].apply(t,o);return t}},$one:function(){}};o.extend(n.prototype,s);n.mixTo=function(e){e="function"==typeof e?e.prototype:e;o.extend(e,s)};i.exports=n});e.register("regularjs/src/helper/animate.js",function(e,t,i){function n(e){var t=0,i=0,n=0,o=0,s=0,r=5/3,_;if(window.getComputedStyle){_=window.getComputedStyle(e),i=a(_[f+"Duration"])||i;n=a(_[f+"Delay"])||n;o=a(_[l+"Duration"])||o;s=a(_[l+"Delay"])||s;t=Math.max(i+n,o+s)}return 1e3*t*r}function a(e){var t=0,i;if(!e)return 0;e.split(",").forEach(function(e){i=parseFloat(e);if(i>t)t=i});return t}var o=t("../util");var s=t("../dom.js");var r={};var _=t("../env.js");var c="transitionend",d="animationend",f="transition",l="animation";if(!("ontransitionend"in window))if("onwebkittransitionend"in window){c+=" webkitTransitionEnd";f="webkitTransition"}else if("onotransitionend"in s.tNode||"Opera"===navigator.appName){c+=" oTransitionEnd";f="oTransition"}if(!("onanimationend"in window))if("onwebkitanimationend"in window){d+=" webkitAnimationEnd";l="webkitAnimation"}else if("onoanimationend"in s.tNode){d+=" oAnimationEnd";l="oAnimation"}r.inject=function(e,t,i,n){n=n||o.noop;if(Array.isArray(e)){var a=s.fragment();var r=0;for(var _=0,c=e.length;_<c;_++)a.appendChild(e[_]);s.inject(a,t,i);var d=function(){r++;if(r===c)n()};if(c===r)n();for(_=0;_<c;_++)if(e[_].onenter)e[_].onenter(d);else d()}else{s.inject(e,t,i);if(e.onenter)e.onenter(n);else n()}};r.remove=function(e,t){function i(){n++;if(n===o)t&&t()}if(e){var n=0;if(Array.isArray(e)){for(var a=0,o=e.length;a<o;a++)r.remove(e[a],i);return e}if(e.onleave)e.onleave(function(){u(e,t)});else u(e,t)}};var u=function(e,t){s.remove(e);t&&t()};r.startClassAnimate=function(e,t,i,a){var r,f,l,u;if(!d&&!c||_.isRunning)return i();if(4!==a)u=o.once(function h(){if(l)clearTimeout(l);if(2===a)s.delClass(e,r);if(3!==a)s.delClass(e,t);s.off(e,d,u);s.off(e,c,u);i()});else u=o.once(function m(){if(l)clearTimeout(l);i()});if(2===a){s.addClass(e,t);r=t.split(/\s+/).map(function(e){return e+"-active"}).join(" ");s.nextReflow(function(){s.addClass(e,r);f=n(e);l=setTimeout(u,f)})}else if(4===a)s.nextReflow(function(){s.delClass(e,t);f=n(e);l=setTimeout(u,f)});else s.nextReflow(function(){s.addClass(e,t);f=n(e);l=setTimeout(u,f)});s.on(e,d,u);s.on(e,c,u);return u};r.startStyleAnimate=function(e,t,i){var a,r,_;s.nextReflow(function(){s.css(e,t);a=n(e);_=setTimeout(r,a)});r=o.once(function f(){if(_)clearTimeout(_);s.off(e,d,r);s.off(e,c,r);i()});s.on(e,d,r);s.on(e,c,r);return r};i.exports=r});e.register("regularjs/src/helper/combine.js",function(e,t,i){var n=t("../dom.js");var a=t("./animate.js");var o=i.exports={node:function(e){var t,i,n;if(e){if(e.element)return e.element;if("function"==typeof e.node)return e.node();if("number"==typeof e.nodeType)return e;if(e.group)return o.node(e.group);if(t=e.children){if(1===t.length)return o.node(t[0]);n=[];for(var a=0,s=t.length;a<s;a++){i=o.node(t[a]);if(Array.isArray(i))n.push.apply(n,i);else if(i)n.push(i)}return n}}},inject:function(e,t){var i=this;var s=o.node(i.group||i);if(e===!1){a.remove(s);return i}else{if(!s)return i;if("string"==typeof e)e=n.find(e);if(!e)throw Error("injected node is not found");a.inject(s,e,t)}if(i.$emit){i.$emit("$inject",e,t);i.parentNode="after"===t||"before"===t?e.parentNode:e}return i},last:function(e){var t=e.children;if("function"==typeof e.last)return e.last();if("number"==typeof e.nodeType)return e;if(t&&t.length)return o.last(t[t.length-1]);if(e.group)return o.last(e.group);else;},destroy:function(e,t){if(e){if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++)o.destroy(e[i],t);var s=e.children;if("function"==typeof e.destroy)return e.destroy(t);if("number"==typeof e.nodeType&&t)n.remove(e);if(s&&s.length){o.destroy(s,!0);e.children=null}}}};n.element=function(e,t){if(!e)return!t?null:[];var i=o.node(e);if(1===i.nodeType)return t?[i]:i;var n=[];for(var a=0;a<i.length;a++){var s=i[a];if(s&&1===s.nodeType){if(!t)return s;n.push(s)}}return n}});e.register("regularjs/src/helper/arrayDiff.js",function(e,t,i){function n(e,t){var i=e.length;var n=t.length;if(i!==n)return!0;for(var a=0;a<i;a++)if(e[a]!==t[a])return!0;return!1}function a(e,t){return e===t}function o(e,t){var i=e.length;var n=t.length;var o=[];for(var s=0;s<=i;s++)o.push([s]);for(var r=1;r<=n;r++)o[0][r]=r;for(var s=1;s<=i;s++)for(var r=1;r<=n;r++)if(a(e[s-1],t[r-1]))o[s][r]=o[s-1][r-1];else o[s][r]=Math.min(o[s-1][r]+1,o[s][r-1]+1);
return o}function s(e,t,i){if(i)return n(e,t);var a=o(t,e);var s=t.length;var r=s;var _=e.length;var c=_;var d=[];var f=a[r][c];for(;r>0||c>0;)if(0!==r)if(0!==c){var l=a[r-1][c-1];var u=a[r-1][c];var h=a[r][c-1];var m=Math.min(h,u,l);if(m===u){d.unshift(2);r--;f=u}else if(m===l){if(l===f)d.unshift(0);else{d.unshift(1);f=l}r--;c--}else{d.unshift(3);c--;f=h}}else{d.unshift(2);r--}else{d.unshift(3);c--}var p=0;var g=3;var v=2;var b=1;var s=0;_=0;var $=[];var y={index:null,add:0,removed:[]};for(var r=0;r<d.length;r++){if(d[r]>0){if(null===y.index)y.index=_}else if(null!=y.index){$.push(y);y={index:null,add:0,removed:[]}}switch(d[r]){case p:s++;_++;break;case g:y.add++;_++;break;case v:y.removed.push(t[s]);s++;break;case b:y.add++;y.removed.push(t[s]);s++;_++}}if(null!=y.index)$.push(y);return $}i.exports=s});e.register("regularjs/src/helper/entities.js",function(e,t,i){var n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364};i.exports=n});e.register("regularjs/src/helper/filter.js",function(e,t,i){var n=i.exports={};n.json={get:function(e){return"undefined"!=typeof JSON?JSON.stringify(e):e},set:function(e){return"undefined"!=typeof JSON?JSON.parse(e):e}};n.last=function(e){return e&&e[e.length-1]};n.average=function(e,t){e=e||[];return e.length?n.total(e,t)/e.length:0};n.total=function(e,t){var i=0;if(e){e.forEach(function(e){i+=t?e[t]:e});return i}}});e.register("regularjs/src/directive/base.js",function(e,t,i){var n=t("../util.js");var a=t("../dom.js");var o=t("../helper/animate.js");var s=t("../Regular.js");var r=t("../const");t("./event.js");t("./form.js");i.exports={"r-class":function(e,t){if("string"==typeof t)t=n.fixObjStr(t);this.$watch(t,function(t){var i=" "+e.className.replace(/\s+/g," ")+" ";for(var n in t)if(t.hasOwnProperty(n)){i=i.replace(" "+n+" "," ");if(t[n]===!0)i+=n+" "}e.className=i.trim()},!0)},"r-style":function(e,t){if("string"==typeof t)t=n.fixObjStr(t);this.$watch(t,function(t){for(var i in t)if(t.hasOwnProperty(i))a.css(e,i,t[i])},!0)},"r-hide":function(e,t){var i=null,n;this.$watch(t,function(t){var a=!!t;if(a!==i){i=a;if(a)if(e.onleave)n=e.onleave(function(){e.style.display="none";n=null});else e.style.display="none";else{if(n)n();e.style.display="";if(e.onenter)e.onenter()}}})},"r-html":function(e,t){this.$watch(t,function(t){t=t||"";a.html(e,t)},{force:!0})},ref:{accept:r.COMPONENT_TYPE+r.ELEMENT_TYPE,link:function(e,t){var i=this.$refs||(this.$refs={});var a;if(n.isExpr(t))this.$watch(t,function(t,n){a=t;if(i[n]===e)i[n]=null;if(a)i[a]=e});else i[a=t]=e;return function(){i[a]=null}}}};s.directive(i.exports)});e.register("regularjs/src/directive/form.js",function(e,t,i){function n(e,t){function i(){t.set(n,this.value);a.last=this.value;n.$update()}var n=this;var a=this.$watch(t,function(t){var i=r.slice(e.getElementsByTagName("option"));i.forEach(function(i,n){if(i.value==t)e.selectedIndex=n})});_.on(e,"change",i);if(void 0===t.get(n)&&e.value)t.set(n,e.value);return function o(){_.off(e,"change",i)}}function a(e,t){var i=this;var n=this.$watch(t,function(t){if(e.value!==t)e.value=null==t?"":""+t});var a=function(e){var a=this;if("cut"===e.type||"paste"===e.type)r.nextTick(function(){var e=a.value;t.set(i,e);n.last=e;i.$update()});else{var o=a.value;t.set(i,o);n.last=o;i.$update()}};if(9!==_.msie&&"oninput"in _.tNode)e.addEventListener("input",a);else{_.on(e,"paste",a);_.on(e,"keyup",a);_.on(e,"cut",a);_.on(e,"change",a)}if(void 0===t.get(i)&&e.value)t.set(i,e.value);return function(){if(9!==_.msie&&"oninput"in _.tNode)e.removeEventListener("input",a);else{_.off(e,"paste",a);_.off(e,"keyup",a);_.off(e,"cut",a);_.off(e,"change",a)}}}function o(e,t){var i=this;var n=this.$watch(t,function(t){_.attr(e,"checked",!!t)});var a=function o(){var e=this.checked;t.set(i,e);n.last=e;i.$update()};if(t.set)_.on(e,"change",a);if(void 0===t.get(i))t.set(i,!!e.checked);return function s(){if(t.set)_.off(e,"change",a)}}function s(e,t){var i=this;var n=this.$watch(t,function(t){if(t==e.value)e.checked=!0;else e.checked=!1});var a=function o(){var e=this.value;t.set(i,e);i.$update()};if(t.set)_.on(e,"change",a);if(void 0===t.get(i))if(e.checked)t.set(i,e.value);return function s(){if(t.set)_.off(e,"change",a)}}var r=t("../util.js");var _=t("../dom.js");var c=t("../Regular.js");var d={text:a,select:n,checkbox:o,radio:s};c.directive("r-model",function(e,t){var i=e.tagName.toLowerCase();var n=i;if("input"===n)n=e.type||"text";else if("textarea"===n)n="text";if("string"==typeof t)t=this.$expression(t);if(d[n])return d[n].call(this,e,t);else if("input"===i)return d.text.call(this,e,t)})});e.register("regularjs/src/directive/animation.js",function(e,t,i){function n(e){var t=[],i=0,n=o.noop;var a;var s={type:e,start:function(e){a=o.uid();if("function"==typeof e)n=e;if(i>0)i=0;else s.step();return s.compelete},compelete:function(){a=null;n&&n();n=o.noop;i=0},step:function(){if(t[i])t[i](s.done.bind(s,a))},done:function(e){if(e===a)if(i<t.length-1){i++;s.step()}else s.compelete()},push:function(e){t.push(e)}};return s}function a(e,t){function i(e){f&&d.push(f);f=n(e)}function a(e,t){if(t)e()}function o(e){return function(){delete e.onenter;delete e.onleave}}var s=this.constructor;t=t.trim();var r=t.split(";"),_,c=this,d=[],f,l=[],m,p,g,v=0,b,$,y=this;for(var x=0,C=r.length;x<C;x++){_=r[x];b=_.split(":");p=b[0]&&b[0].trim();g=b[1]&&b[1].trim();if(p)if(p!==u)if(p!==h){var $=s.animation(p);if($&&f)f.push($.call(this,{element:e,done:f.done,param:g}));else throw Error($?"you should start with `on` or `event` in animation":"undefined animator 【"+p+"】")}else{i(g);if("leave"===g){e.onleave=f.start;l.push(o(e))}else if("enter"===g){e.onenter=f.start;l.push(o(e))}else if("on"+g in e)l.push(this._handleEvent(e,g,f.start));else{this.$on(g,f.start);l.push(this.$off.bind(this,g,f.start))}}else{i("when");this.$watch(g,a.bind(this,f.start))}else;}if(l.length)return function(){l.forEach(function(e){e()})}}var o=t("../util.js"),s=t("../helper/animate.js"),r=t("../dom.js"),_=t("../Regular.js");var c=/^[-\w]+(\s[-\w]+)*$/,d=/[\r\n\f ]*,[\r\n\f ]*(?=\w+\:)/,f=/^\{.*\}$/,l=/\s+/,u="when",h="on",m="then";_._addProtoInheritCache("animation");_.animation({wait:function(e){var t=parseInt(e.param)||0;return function(e){setTimeout(e,t)}},"class":function(e){var t=e.param.split(","),i=t[0]||"",n=parseInt(t[1])||1;return function(t){s.startClassAnimate(e.element,i,t,n)}},call:function(e){var t=this.$expression(e.param).get,i=this;return function(e){t(i);i.$update();e()}},emit:function(e){var t=e.param;var i=t.split(","),n=i[0]||"",a=i[1]?this.$expression(i[1]).get:null;if(!n)throw Error("you shoud specified a eventname in emit command");var o=this;return function(e){o.$emit(n,a?a(o):void 0);e()}},style:function(e){var t={},i=e.param,n=i.split(","),a;n.forEach(function(e){e=e.trim();if(e){var i=e.split(l),n=i.shift(),o=i.join(" ");if(!n||!o)throw Error("invalid style in command: style");t[n]=o;a=!0}});return function(i){if(a)s.startStyleAnimate(e.element,t,i);else i()}}});_.directive("r-animation",a);_.directive("r-anim",a)});e.register("regularjs/src/directive/event.js",function(e,t,i){function n(e,t,i){if(i){var n=e.target,a;for(;n&&n!==i;){for(var o=0,s=t.length;o<s;o++){a=t[o];if(a&&a.element===n)a.fire(e)}n=n.parentNode}}}var a=t("../util.js");var o=t("../dom.js");var s=t("../Regular.js");s._addProtoInheritCache("event");s.directive(/^on-\w+$/,function(e,t,i,n){if(i&&t){var a=i.split("-")[1];return this._handleEvent(e,a,t,n)}});s.directive(/^(delegate|de)-\w+$/,function(e,t,i){function s(e){n(e,_[c],r.parentNode);
}var r=this.$root;var _=r._delegates||(r._delegates={});if(i&&t){var c=i.split("-")[1];var d=a.handleEvent.call(this,t,c);if(!_[c]){_[c]=[];if(r.parentNode)o.on(r.parentNode,c,s);else r.$on("$inject",function(e){var t=this.parentNode;if(t)o.off(t,c,s);o.on(e,c,s)});r.$on("$destroy",function(){if(r.parentNode)o.off(r.parentNode,c,s);_[c]=null})}var f={element:e,fire:d};_[c].push(f);return function(){var e=_[c];if(e&&e.length)for(var t=0,i=e.length;t<i;t++)if(e[t]===f)e.splice(t,1)}}})});e.register("regularjs/src/module/timeout.js",function(e,t,i){function n(e){e.implement({$timeout:function(e,t){t=t||0;return setTimeout(function(){e.call(this);this.$update()}.bind(this),t)},$interval:function(e,t){t=t||1e3/60;return setInterval(function(){e.call(this);this.$update()}.bind(this),t)}})}var a=t("../Regular.js");a.plugin("timeout",n);a.plugin("$timeout",n)});e.alias("regularjs/src/index.js","regularjs/index.js");if("object"==typeof exports)module.exports=e("regularjs");else if("function"==typeof define&&define.amd)define(function(){return e("regularjs")});else window["Regular"]=e("regularjs")}();I$("5180df6ca22c35635ee255e9112d27ab",function(e,t){t.format=function(){function e(e){e=""+(String(e)||"");return e.length<=1?"0"+e:e}var t={yyyy:function(e){return e.getFullYear()},MM:function(t){return e(t.getMonth()+1)},dd:function(t){return e(t.getDate())},HH:function(t){return e(t.getHours())},mm:function(t){return e(t.getMinutes())},ss:function(t){return e(t.getSeconds())}};var i=[];for(var n in t)i.push(n);var a=new RegExp(i.join("|"),"g");return function(e,i){if(!e)return"--";i=i||"yyyy-MM-dd HH:mm";e=Number(e);e=new Date(e);return i.replace(a,function(i){return t[i]?t[i](e):""})}}();t.average=function(e,i){e=e||[];return e.length?t.total(e,i)/e.length:0};t.total=function(e,t){var i=0;if(e){e.forEach(function(e){i+=t?e[t]:e});return i}};t.escape=function(e){return(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;")};t.average=function(e,i){e=e||[];return e.length?t.total(e,i)/e.length:0};t.duration=function(e,t){if(!e)return"--";t=t||"HH小时mm分ss秒";var i=Math.floor(e/36e5);e-=36e5*i;var n=Math.floor(e/6e4);e-=6e4*n;var a=Math.floor(e/1e3);var o={HH:i,mm:n,ss:a};if(t=t.replace(/(HH)|(mm)|(ss)/g,function(e){return o[e]}).match(/[1-9].*/))if(i>0)return t[0].match(/(.*分)/)&&t[0].match(/(.*分)/)[0];else return t&&t[0];return"0秒"};t.sliceWord=function(e,t){t=parseInt(t);return e.slice(0,t)};t.spliceSuffix=function(e){var t=e.split("."),i={bmp:"imgflag",png:"imgflag",jpg:"imgflag",jpeg:"imgflag",gif:"imgflag",exif:"imgflag",pdf:"pdf",txt:"txt",doc:"doc",docx:"doc",xls:"excel",xlsx:"excel",csv:"excel",zip:"zip",rar:"zip","7z":"zip",ppt:"ppt",pptx:"ppt",key:"key",mp3:"audio",wma:"audio",ape:"audio",flac:"audio",wav:"audio",aac:"audio",ogg:"audio",avi:"video",mov:"video",mkv:"video",rmvb:"video",wmv:"video","3gp":"video",flv:"video",mp4:"video",mpg:"video"},n=i[t[t.length-1].toLowerCase()];if(!n)return"unknown";else return n};t.durationSecond=function(e){if(void 0===e)return"-";var t=Math.floor(e/1e3);return t};t.durationMinute=function(e){if(void 0===e)return"-";var t=36e5,i=6e4;e-=Math.floor(e/t)*t;return Math.floor(e/i)};t.durationMSecond=function(e){if(void 0===e)return"-";var t=6e4;e-=Math.floor(e/t)*t;return Math.floor(e/1e3)};t.durationMHour=function(e){if(void 0===e)return"-";var t=864e5,i=36e5;e-=Math.floor(e/t)*t;return Math.floor(e/i)};t.formatDate=function(e){if(void 0===e)return"-";var i=new Date(e),n=new Date,a=new Date(e).setHours(0,0,0,0),o=(new Date).setHours(0,0,0,0),s=864e5;if(o-a==0)return"今天";else if(o-a==s)return"昨天";else if(o-a>s&&i.getYear()==n.getYear())return t.format(i,"MM-dd");else return t.format(i,"yyyy-MM-dd")};t.formatTime=function(e){if(void 0===e)return"-";var i=new Date(e),n=new Date,a=new Date(e).setHours(0,0,0,0),o=(new Date).setHours(0,0,0,0),s=864e5;if(o-a==0)return"今天 "+t.format(i,"HH:mm");else if(o-a==s)return"昨天 "+t.format(i,"HH:mm");else if(Math.abs(o-a)>=s&&i.getYear()==n.getYear())return t.format(i,"MM-dd HH:mm");else return t.format(i,"yyyy-MM-dd HH:mm")};t.ratio=function(e,t){t=t||"-";if(void 0===e||e==-1)return t;else if(100*e>999)return">999";else return(100*e).toFixed(0)};t.ratioPoint=function(e,t){t=t||"--";if(void 0===e||e==-1)return t;else if(100*e>999)return">999%";else return(100*e).toFixed(1)+"%"};t.ratioPoint2=function(e,t){t=t||"--";if(void 0===e||e==-1)return t;else if(100*e>999)return">999%";else return(100*e).toFixed(2)+"%"};t.ratioPect=function(e,t){t=t||"--";if(void 0===e||e==-1)return t;else if(100*e>999)return">999%";else return(100*e).toFixed(0)+"%"};t.toFixed=function(e,t){if(e==-1)return t||"--";var i=e/1e4,n=e%1e4,a=e/1e4/1e3;if(i>=1&&a<1)if(0==n)return i+"万";else return i.toFixed(2)+"万";else if(a>=1)return Math.round(e/1e4)+"万";else return e};t.toFixed1=function(t,i){var n=parseFloat(t,10),a;if(null==i)i=2;if(0==i)return e._$fixed(n,0);if(e._$isNumber(n)){a=e._$fixed(n,2);var o=a.toString();var s=o.indexOf(".");if(s<0){s=o.length;o+="."}for(;o.length<=s+i;)o+="0";return o}else return""};t.kbSize=function(e){e=Number(e);var t=1048576;if(e<1024)return e+"B";else if(e<t)return Math.floor(e/1024)+"KB";var i=Math.floor(e/t),n=/0\.(\d)/.exec((e-i*t)/t)[1];return i+"."+n+"M"};t.filterTag=function(e,t){e=e||"";var i=new RegExp("<"+t+"[^>]*>([\\s\\S]*?)<\\/"+t+">","ig");return e.replace(i,function(e,t){return t})};t.number2string={get:function(e){return void 0==e?"":String(e)},set:function(e){return Number(e)}};t.noEmoji={get:function(e){if(void 0==e)return e;else return e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")},set:function(e){return e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")}};t.digitOnly={get:function(e){if(e)e=e.replace(/\D/g,"");return e},set:function(e){if(e)e=e.replace(/\D/g,"");return e}};t.ellipsis=function(e,t){var i=e.length,n="",a="",o="";if(e.length<=2*t){n=e;return n}else{a=e.slice(0,t);o=e.slice(i-t,i);return a+"..."+o}};t.averageFix=function(e,t){if(e==-1)return"--";else return e.toFixed(t)};return t},"2ad7178887dc8cdca6f726aa3bb0d129");!function(e,t,i){function n(e){e=e||{};if(e.macros)this._macros=e.macros;this._links={};this._rules={};this.TRUNK=null;this.cache=q(e.maxCache||200);this.cache.set("",[[]])}function a(e){return re.parse(e)}function o(e,t){return t?e.nodeName===t:1===e.nodeType}function s(e,t){var e=e.firstChild;return!e||o(e,t)?e:c(e,t)}function r(e,t){var e=e.lastChild;return!e||o(e,t)?e:_(e,t)}function _(e,t){for(;e=e.previousSibling;)if(o(e,t))return e;return e}function c(e,t){for(;e=e.nextSibling;)if(o(e,t))return e;return e}function d(e,t){var i=ce[t];if(i)return"function"==typeof i?i(e):e[i];if(fe)return e.getAttribute(t);var n=e.getAttributeNode(t);return"boolean"==typeof e[t]?e[t]?t:null:n&&n.specified?n.value:null}function f(e){for(var t=e.length;t--;){var i=e[t];e.splice(t,1,null);if(~e.indexOf(i))e.splice(t,1);else e.splice(t,1,i)}return e}function l(e,t){if(e&&t){var i=e.nextSibling;for(;i;){if(i===t)return-1;i=i.nextSibling}}return e?1:-1}function u(e){return f(e.sort(le))}function h(e,t){var i,n,a,o;if(e){a=t?"type":"child";i=c;n=_;o=s}else{a="last"+(t?"type":"child");n=c;i=_;o=r}return function(e,s){var r=he[a];if(e===_e)return!1;var _=ue(e),c=e.parentNode,d=s.step>0?i:n,f=s.step,l=s.start,u=t&&e.nodeName;if(null===f)return!1;if(!r[_]){var h=o(c,u),m=0;do{r[ue(h)]=++m;he.length++}while(h=i(h,u))}var p=r[_];if(0===f)return p===l;else return(p-l)/f>=0&&(p-l)%f===0}}function m(){if(he.length)he={child:{},lastchild:{},type:{},lasttype:{},length:0}}function p(e,t,i){var n;for(var a in t)if(i!==a&&(n=pe[a])&&!n(e,t[a]))return!1;return!0}function g(e,t,i){var n=t.length,a=t[n-1];if(!p(e,a,i))return!1;else{if(1==n)return!0;var o=t[n-2],s=ge.combos[o.combo],r=ve[n-2],_=s(e,r);if(_)return!0;else return!1}}function v(e){return function(i){if(i==_e||null==i||i==t)return null;else return g(i,e)}}function b(e){var t=[];for(var i=0,n=e.length;i<n;i++)t.push(v(e.slice(0,i+1)));return t}function $(e,t,i){if(!t.length)return e;var n=ve;ve=b(t);for(var a=e.length;a--;)if(!g(e[a],t,i))e.splice(a,1);ve=n;return e}function y(e,t){var i,n,a=e[e.length-1];if(a.id){i=me.byId(a.id);n="id"}else if(a.classList&&a.classList.length&&me.byClassName){i=me.byClassName(a.classList,t);n="classList"}else{i=me.byTagName(a.tag||"*",t);n="tag"}if(!i.length)return i;else return $(i,e,n)}function x(e,t){if(!e[0][0])return[];var i=[],n=0;for(var a=0,o=e.length;a<o;a++){var s=e[a],r=s.length,_=s[r-1],c=y(s,t);if(c&&c.length)n++;if(!i)i=c;else i=i.concat(c)}m();if(n>1)u(i);return i}function C(e,i){var n=a(e);var o=x(n,i||t);return o}function w(e,i){var n;if(be&&!k.debug)try{n=(i||t).querySelector(e)}catch(a){n=C(e,i)[0]}else n=C(e,i)[0];return n}function E(e,i){var n;if(be&&!k.debug)try{n=R((i||t).querySelectorAll(e))}catch(a){n=C(e,i)}else n=C(e,i);return n}function S(e,t){if(!e||1!==e.nodeType)return!1;var i=a(t),n=i.length;if(!i[n-1][0])return!1;for(;n--;)if(I(e,i[n]))return!0;return!1}function I(e,t){var i=t.length;if(!p(e,t[i-1]))return!1;else return 1===$([e],t.slice(0)).length}function j(e){return function(t,i){var n=i.split(/\s+of\s+/);if(n.length<2)throw Error("no 'of' keyword in nth-match\"s selector");var a=ne(n[0]),o=n[1],s=t.parentNode[e?"firstChild":"lastChild"],r=e?"nextSibling":"previousSibling",_=a.step,c=a.start,d=0;if(!S(t,o))return!1;if(null===_)return!1;do{if(1===s.nodeType&&k.matches(s,o))d++;if(s===t)break}while(s=s[r]);if(0===_)return d===c;else return(d-c)/_>=0&&(d-c)%_===0}}var k=function(e,t){return E(e,t)},T={};var N=Array.prototype,M=Object.prototype,L=String.prototype,D=Function.prototype,A=N.slice,B=t.body,O=t.createElement("div"),R=function(e){return A.call(e)},P=function(e){return null==e?String(e):M.toString.call(e).slice(8,-1).toLowerCase()},F=function(e,t,i){for(var n in t)if(null==e[n]||i)e[n]=t[n]},q=function(e){var t=[],n={};return{set:function(e,i){if(t.length>this.length)delete n[t.shift()];n[e]=i;t.push(e);return i},get:function(e){if(e===i)return n;else return n[e]},length:e,len:function(){
return t.length}}},H=function(e){return function(t,i){if("object"==P(t))for(var n in t)e.call(this,n,t[n]);else e.call(this,t,i);return this}},U=function(e){try{return e()}catch(t){return!1}finally{O=document.createElement("div")}};try{A.call(t.getElementsByTagName("body"))}catch(z){R=function(e){var t=[],i=e.length;for(var n=0;n<i;n++)t.push(e[n]);return t}}var K=/^\s+|\s+$/g;L.trim=L.trim||function(){return this.replace(K,"")};D.bind=D.bind||function(e,t){t=A.call(arguments,1);var i=this;return function(){return i.apply(e,t.concat(A.call(arguments)))}};N.indexOf=N.indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(e===this[t])return t;return-1};var J=/\(\?\!|\(\?\:/,G=function(e){var t=0,i=0,n=e.length,a=e.split(J).length-1;for(;n--;){var o=e.charAt(n);if(0===n||"\\"!==e.charAt(n-1)){if("("===o)t++;if(")"===o)i++}}if(t!==i)throw e+"中的括号不匹配";else return t-a},X=/\\(\d+)/g,V=function(e,t){return e},Y=Object.keys||function(e){var t=[];for(var i in e)if(e.hasOwnProperty(i))t.push(i);return t},W=function(e){var t=e.reg;if("regexp"===P(t))t=t.toString().slice(1,-1);e.regexp=t.replace(Z,function(e,t){if(t in ae)return ae[t];else throw new Error('can"t replace undefined macros:'+t)});return e},Q=function(e){for(var t in e)if(e.hasOwnProperty(t))W(e[t]);return e};F(n.prototype,{parse:function(e){e=clean(e);if(t=this.cache.get(e))return t;var t=this.parsed=[[null]];var i=this.input=e;var n=this.TRUNK;var a;for(;a!=(i=i.replace(n,this._process.bind(this)));)a=i;if(""!==i)this.error(i);return this.cache.set(e,t)},on:function(e){if("string"===P(e)){var t={};t[e]=arguments[1];e=t}for(var n in e){var a=e[n];if("object"!==P(a))a={regexp:a};var o=a.regexp;if("regexp"===P(o))a.regexp=o.toString().slice(1,-1);if(a.order===i)a.order=1;this._rules[n]=a}this.setup();return this},off:function(e){if("array"===P(e))for(var t=e.length;t--;)this.off(e[t]);else if(this._rules[e])delete this._rules[e];return this},current:function(){var e=this.parsed;var t=e[e.length-1],i=t.length;return t[i-1]||(t[i-1]={tag:"*"})},error:function(e){throw Error("输入  "+this.input+"  含有未识别语句:"+e||"")},clone:function(e){return(new n).on(this._rules)},_process:function(){var e=this._links,t=this._rules,i=A.call(arguments);for(var n in e){var a=e[n],o=a[1],s=parseInt(a[0]);if(i[s]&&(rule=t[n])){rule.action.apply(this,i.slice(s,s+o));return""}}return""},setup:function(){Q(this._rules);var e=1,t=[],i=this._rules,n=this._links,a=Y(i).sort(function(e,t){return i[e].order>=i[t].order}),o=a.length;for(;o--;){var s=a[o],r=i[s],_=G(r.regexp)+1;if(r.filter&&!pe[s])pe[s]=r.filter;n[s]=[e,_];var c=V(r.regexp,e-1);e+=_;t.push(c)}this.TRUNK=new RegExp("^(?:("+t.join(")|(")+"))");return this}});var Z=/\{\{([^\}]*)\}\}/g,ee=/^(?:(\d+)|([+-]?\d*)?n([+-]\d+)?)$/,te=/^(nth)[\w-]*(-of-type|-child)/,ie=q(100),ne=function(e){var t,i,n;if(!e||!(e=e.replace(/\s+/g,"")))return{start:1,step:0};if(n=ie.get(e))return n;if("even"==e){i=2;t=2}else if("odd"==e){t=2;i=1}else{n=e.match(ee);if(!n)t=null;else if(n[1]){t=0;i=parseInt(n[1])}else{if("-"==n[2])n[2]="-1";t=n[2]?parseInt(n[2]):1;i=n[3]?parseInt(n[3]):0}}if(i<1)if(t<1)t=null;else i=- -i%t+t;return ie.set(e,{start:i,step:t})};var ae={split:"\\s*,\\s*",operator:"[*^$|~!]?=",combo:"[>\\s+~](?!=)",word:"[\\\\\\w\\u00A1-\\uFFFF-]"},oe={split:{reg:"{{split}}",action:function(e){this.parsed.push([null])},order:0},id:{reg:"#({{word}}+)",action:function(e,t){this.current().id=t}},tag:{reg:"\\*|[a-zA-Z-]\\w*",action:function(e){this.current().tag=e.toLowerCase()}},classList:{reg:"\\.({{word}}+)",action:function(e,t){var i=this.current(),n=i.classList||(i.classList=[]);n.push(t)}},pesudos:{reg:":({{word}}+)(?:\\(([^\\(\\)]*|(?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\))?",action:function(e,t,i){var n=this.current(),a=n.pesudos||(n.pesudos=[]),t=t.toLowerCase(),o={name:t};if(i)i=i.trim();if(te.test(t))i=ne(i);if(i)o.param=i;a.push(o)}},attributes:{reg:"\\[\\s*({{word}}+)(?:({{operator}})['\"]?([^'\"\\[]+)['\"]?)?\\s*\\]",action:function(e,t,i,n){var a=this.current(),o=a.attributes||(a.attributes=[]);var s={};o.push({key:t,operator:i,value:n})}},combo:{reg:"\\s*({{combo}})\\s*",action:function(e,t){var i=this.parsed,n=i[i.length-1];this.current().combo=t;n.push(null)},order:0}};var se=new RegExp("\\s*(,|"+ae.combo+"|"+ae.operator+")\\s*","g");clean=function(e){return e.trim().replace(/\s+/g," ").replace(se,"$1")};var re=new n;re.on(oe);var _e=t.documentElement||t;var ce={"for":"htmlFor",href:function(e){return"href"in e?e.getAttribute("href",2):e.getAttribute("href")},type:function(e){return"type"in e?e.getAttribute("type"):e.type}};var de=U(function(){O.appendChild(t.createComment(""));return!O.getElementsByTagName("*").length||"number"!=typeof t.getElementsByTagName("input").length});var fe=U(function(){O.innerHTML="<select></select>";var e=P(O.lastChild.getAttribute("multiple"));return"boolean"!==e&&"string"!==e});var le=t.compareDocumentPosition?function(e,t){if(!e.compareDocumentPosition||!t.compareDocumentPosition)return 0;else return 4&e.compareDocumentPosition(t)?-1:e===t?0:1}:"sourceIndex"in t?function(e,t){if(!e.sourceIndex||!t.sourceIndex)return 0;else return e.sourceIndex-t.sourceIndex}:function(e,i){var n=0,a=[e],o=[i],s=e.parentNode,r=i.parentNode,_=s;if(e===t)return-1;else if(i===t)return 1;else if(!s&&!r)return 0;else if(!r)return-1;else if(!s)return 1;else if(s===r)return l(e,i);for(;_;){a.unshift(_);_=_.parentNode}_=r;for(;_;){o.unshift(_);_=_.parentNode}for(;a[n]===o[n];)n++;return l(a[n],o[n])};var ue=function(e){var t=0;return function(i){return i._uid||(i._uid=e+t++)}}("nes_"+(+new Date).toString(36));var he={length:1};m();var me={byId:function(e){var i=t.getElementById(e);return i?[i]:[]},byClassName:t.getElementsByClassName?function(e,i){e=e.join(" ");return R((i||t).getElementsByClassName(e))}:null,byTagName:de?function(e,i){var n=(i||t).getElementsByTagName(e);return R(n)}:function(e,i){var n=(i||t).getElementsByTagName(e);var a,o=[],s=0;for(;a=n[s];s++)if(1===a.nodeType)o.push(a);return o}};var pe={id:function(e,t){return e.id===t},classList:function(e,t){var i=t.length,n=" "+e.className+" ";for(;i--;)if(n.indexOf(" "+t[i]+" ")===-1)return!1;return!0},tag:function(e,t){if("*"==t)return!0;else return e.tagName.toLowerCase()===t},pesudos:function(e,t){var i=t.length,n=ge["pesudos"];for(;i--;){var a=t[i],o=a.name,s=n[o];if(!s)throw Error("不支持的伪类:"+o);if(!s(e,a.param))return!1}return!0},attributes:function(e,t){var i=t.length,n=ge["operators"];for(;i--;){var a=t[i],o=a["operator"],s=n[o],r=d(e,a.key);if(null!==r)if(o){if(!s)throw Error("不支持的操作符:"+o);if(!s(a.value,r+""))return!1}else;else if("!="!==o)return!1}return!0}};var ge={combos:{">":function(e,t){var i=e.parentNode;if(t(i))return i},"~":function(e,t){var i=_(e);for(;i;){if(t(i))return i;i=_(i)}}," ":function(e,t){var i=e.parentNode;for(;i;){var n=t(i);if(n)return i;if(null===n)return null;i=i.parentNode}return null},"+":function(e,t){var i=_(e);if(i&&t(i))return i}},operators:{"^=":function(e,t){if(null==t)return!1;else return 0===t.indexOf(e)},"=":function(e,t){return t===e},"~=":function(e,t){if(null==t)return!1;else return~(" "+t+" ").indexOf(e)},"$=":function(e,t){return t.substr(t.length-e.length)===e},"|=":function(e,t){return~("-"+t+"-").indexOf("-"+e+"-")},"*=":function(e,t){return~t.indexOf(e)},"!=":function(e,t){return t!==e}},pesudos:{not:function(e,t){return!S(e,t)},matches:function(e,t){return S(e,t)},"nth-child":h(!0,!1),"nth-last-child":h(!1,!1),"nth-of-type":h(!0,!0),"nth-last-of-type":h(!1,!0),"first-child":function(e){return!_(e)},"last-child":function(e){return!c(e)},"last-of-type":function(e){return!c(e,e.nodeName)},"first-of-type":function(e){return!_(e,e.nodeName)},"only-child":function(e){return!_(e)&&!c(e)},"only-of-type":function(e){return!_(e,e.nodeName)&&!c(e,e.nodeName)},contains:function(e,t){return~(e.innerText||e.textContent||"").indexOf(t)},checked:function(e){return!!e.checked||!!e.selected},selected:function(e){return e.selected},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},empty:function(e){var t;e=e.firstChild;for(;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},focus:function(e){return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},target:function(e,t){var i=e.id||e.name;if(!i)return!1;else return"#"+i===location.hash}}};var ve=null;var be=!!t.querySelector;!function $e(e,t){for(var i in e)k[i]=function(i){var n=e[i];return H(function(e,a){n[e]=a;if(i in t)t[i](e,a)})}(i)}(ge,{operators:function(e){var t=ae.operator.split("]");t.splice(1,0,e.charAt(0)+"]");ae.operator=t.join("");re.setup()},combos:function(e){var t=ae.combo.split("]");t.splice(1,0,e+"]");ae.combo=t.join("");re.setup()}});k.debug=!1;k._nthCache=ie;k.parser=re;k.parse=a;k._find=x;k._get=C;k.one=w;k.all=E;k.matches=S;k._uniqueSort=u;k._cleanSelector=clean;k._getUid=ue;if("object"==typeof exports)module.exports=k;else if("function"==typeof define&&define.amd)define(function(){return k});else e.nes=k;k.pesudos({"nth-match":j(!0),"nth-last-match":j(!1),"local-link":function(e,t){if(t)t=parseInt(t)}})}(window,document,void 0);I$("340f3ac673161bf775fe41458cc223e8",function(e,t,i,n,a,o){i._$all=function(){try{return nes.all.apply(nes,arguments)}catch(e){return null}};i._$one=function(){try{return nes.one.apply(nes,arguments)}catch(e){return null}};i._$g=nes._get;if(!0)e.copy(e.P("nej.e"),i);return i},"c27e07105db4b2613e9811a6e5ceab90","bc3bea289f65e2fa3e75cea4ba0e1e35");I$("94d9d8160f6796571e634a2c97783051",function(e,t,i,n,a,o,s,r){Array.prototype.repeat=function(e,t){for(;t;)this[--t]=e;return this};o._$empty=function(e){e=t._$get(e);if(e)for(;e.firstChild;)t._$remove(e.firstChild)};o._$format=function(e,t){function i(e){e=""+(String(e)||"");return e.length<=1?"0"+e:e}var n={yyyy:function(e){return e.getFullYear()},MM:function(e){return i(e.getMonth()+1)},dd:function(e){return i(e.getDate())},HH:function(e){return i(e.getHours())},mm:function(e){return i(e.getMinutes());
},ss:function(e){return i(e.getSeconds())}};var a=new RegExp(Object.keys(n).join("|"),"g");e=e||"yyyy-MM-dd HH:mm";t=new Date(t||+new Date);return e.replace(a,function(e){return n[e]?n[e](t):""})};o._$highlight=function(e,t){try{if(t&&e)e=e.replace(new RegExp(t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$&"),"ig"),function(e){return"<mark>"+e+"</mark>"})}catch(i){}return e};o._$array2map=function(t,i){if(e._$isArray(t)){var n={};i=i||"id";for(var a=0,o,s=t.length;a<s;a++){o=t[a];n[o[i]]=o}return n}};o._$arrayMax=function(e){var t=0;e.forEach(function(e){if(e>t)t=e});return t};o._$array2unique=function(t){var i={};var n=[];e._$forEach(t,function(e){if(!i[e])i[e]=e});e._$forIn(i,function(e){n.push(e)});return n};o._$extend=function(e,t,i){for(var n in t)if(i||void 0===e[n]||null===e[n])e[n]=t[n];return e};var _=function(e){e=e||new Date;e.setHours(0,0,0,0);return{time:+e,unit:864e5}};var c=function(e){e=e||new Date;e.setHours(23,59,59,999);return{time:+e,unit:864e5}};o._$today=function(e){var t=c(e);return{startTime:t.time-t.unit+1,endTime:t.time}};o._$tomorrow=function(e){var t=c(e);return{startTime:t.time+1,endTime:t.time+t.unit}};o._$futureWeek=function(e){var t=_(e);return{startTime:t.time,endTime:t.time+7*t.unit-1}};o._$currentWeek=function(e){var t=c(e);return{startTime:t.time-7*t.unit+1,endTime:t.time}};o._$currentMonth=function(e){var t=c(e);return{startTime:t.time-30*t.unit+1,endTime:t.time}};o._$latestDay=function(e){var t=_(e);return{startTime:t.time-t.unit,endTime:t.time-1}};o._$latestWeek=function(e){var t=_(e);return{startTime:t.time-7*t.unit,endTime:t.time-1}};o._$latestMonth=function(e){var t=_(e);return{startTime:t.time-30*t.unit,endTime:t.time-1}};o._$typeOf=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()};o._$walkDiff=function(t,i,n){var a=!1;var s=function(t,i){if("string"!=o._$typeOf(t)&&"number"!=o._$typeOf(t)&&void 0!=o._$typeOf(t))e._$forIn(t,function(e,n,a){s(t[n],i[n])});else{if(void 0===i)i="";if(t!==i)a=!0}};s(t,i);return a||n};o._$walkDiff2=function(t,i,n){var a=!1;var s=function(t,i){if("string"!=o._$typeOf(t)&&"number"!=o._$typeOf(t)&&void 0!=o._$typeOf(t))e._$forIn(t,function(e,n,a){s(t[n],i[n])});else{if(void 0===i)i="";if(t.toString()!==i.toString())a=!0}};s(t,i);return a||n};o._$isDiff=function(t,i){var n=!1;var a=function(t,i){if("function"!=o._$typeOf(t))if("string"!=o._$typeOf(t)&&"number"!=o._$typeOf(t)&&void 0!=o._$typeOf(t)){var s=e._$isArray(t),r=e._$isArray(i),_;if(s){if(s!=r||t.length!=i.length){n=!0;return}for(_=0;_<t.length;_++)a(t[_],i[_])}else{var c=0,d=0;e._$forIn(t,function(e,o,s){c++;if(!n)a(t[o],i[o])});e._$forIn(i,function(e,t,i){d++});if(c!=d){n=!0;return}}}else{if(void 0===i)i="";if(t.toString()!==i.toString())n=!0}else if("function"==o._$typeOf(i))n=t!=i;else n=!0};try{a(t,i)}catch(s){n=!0;console.log("_p._$isDiff 执行出错："+s.message)}return n};o._$doFormatCategory=function(t){if(t&&t.length){var i={};var n={};e._$forEach(t,function(e){e.name=e.realname||e.name;n[e.id]=e;var t=(e.pinyin||"").trim().toUpperCase()[0];t=t&&t>="A"&&t<="Z"?t:"#";i[t]=i[t]||[];i[t].push(e)},this);var a=[];e._$loop(i,function(e,t){a.push({letter:t,child:e})});a.sort(function(e,t){return e.letter>t.letter?1:-1});return a}};o._$groupKefu=function(t){if(!t||!t.length)return[];var i={};e._$forEach(t,function(e){var t={};t.label=e.realname||e.name;t.value=e.id;var n=(e.pinyin||"").toUpperCase()[0];n=n&&n>="A"&&n<="Z"?n:"#";i[n]=i[n]||[];i[n].push(t)},this);var n=[];e._$loop(i,function(e,t){n.push({group:t,list:e})});n.sort(function(e,t){return e.group>t.group?1:-1});return n};o._$groupSatisfaction=function(t){if(!t||!t.length)return[];var i={};e._$forEach(t,function(t){var n=t.title;var a=t.type;var o=[];e._$forEach(t.list,function(t){var i={};i.label=t.name||"";i.value=t.value;i.type=a;i.tagList=[{isEmpty:!0,name:"无标签"}];e._$forEach(t.tagList,function(e){i.tagList.push({name:e})});o.push(i)},this);i[n]=o||[]},this);var n=[];e._$loop(i,function(e,t){n.push({group:t,list:e})});return n};o._$groupCustomField=function(t){if(!t||!t.length)return[];var i={};e._$forEach(t,function(e){e.label=e.realname||e.name;e.value=e.id;var t=(e.pinyin||"").trim().toUpperCase()[0];t=t&&t>="A"&&t<="Z"?t:"#";i[t]=i[t]||[];i[t].push(e)},this);var n=[];e._$loop(i,function(e,t){n.push({group:t,list:e})});n.sort(function(e,t){return e.group>t.group?1:-1});return n};o._$groupRole=function(e){var t={2:"超级管理员",1:"管理者",0:"普通客服","-1":"工单客服","-2":"呼叫客服"};var i={};var n=[];e.forEach(function(e){var a=i[e.role];if(null==a||void 0==a){a=i[e.role]=n.length;n.push({id:e.role,group:t[e.role],list:[]})}var o=n[a];o.list.push({groupId:o.id,groupName:o.group,label:e.name,value:e.id})});return n};o._$doBuildRankCategory=function(e){var t=function(e){e.sort(function(e,t){return t.rank-e.rank});e.forEach(function(e){e.child&&t(e.child)})};t(e);return e};o._$doFormatCategory2=function(t){var i=[],n={};var a=function(t){var i=n[t.id];if(i)i=e._$merge(i,t);else{i=t;n[t.id]=i}return i};e._$forEach(t,function(e){a(e);if(!e.parent)i.push(a(e));else{var t=n[e.parent]||{id:e.parent};t.child=t.child||[];t.child.push(e);n[e.parent]=t}});return i};o._$formatWorksheetCategory=function(e){var t=this._$doFormatCategory2(e);t=t.map(function(e){var t={label:e.name,value:e.id};if(e.child)t.child=e.child.map(function(e){return{label:e.name,value:e.id}});return t});return t};o._$isShiftKey=function(e){var e=e||window.event,t=e.keyCode||e.which||e.charCode,i=e.shiftKey||16==t||!1;if(t>=65&&t<=90&&i)return!0;else return!1};o._$isCharKeydown=function(e){var t=e||window.event,i=t.keyCode||t.which||t.charCode,n=t.shiftKey||16==i||!1,a=t.ctrlKey||17==i||!1;if(i>=65&&i<=90&&!n&&!a)return 1;else if(i>=65&&i<=90&&n&&!a)return 2;else return 0};o._$mix=function(e,t,i){var n=i/100,a=0,o=2*n-1,s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,r=1-s,_=[parseInt(e[0]*s+t[0]*r),parseInt(e[1]*s+t[1]*r),parseInt(e[2]*s+t[2]*r)];return _};o._$rgb=function(e){e="#"===e.charAt(0)?e.slice(1):e;var t;if(6===e.length)t=[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)];else{var i=e.substr(0,1);var n=e.substr(1,1);var a=e.substr(2,1);t=[parseInt(i+i,16),parseInt(n+n,16),parseInt(a+a,16)]}return t};o._$formSubmit=function(e,t,n,a){var o="js-formSubmit",s=i._$one(o);if(!s){s=document.createElement("form");s.id=o;s.method=n||"POST";s.target=a||"_self";s.style.display="none";document.body.appendChild(s)}s.innerHTML="";if("object"==typeof t){var r;for(key in t){r=document.createElement("input");r.type="hidden";r.name=key;r.value=t[key];s.appendChild(r)}}s.action=e;s.submit()};o._$copy=function(e){return JSON.parse(JSON.stringify(e))};o._$trans2map=function(e,t){if("array"==o._$typeOf(e))e.forEach(function(e){o._$trans2map(e,t)});else if("object"==o._$typeOf(e))for(var i in t){var n=e[i];e[t[i]]=n;delete e[i]}return e};o._$doBuildCategory=function(t){var i=[],n={};var a=function(t){var i=n[t.id];if(i)i=e._$merge(i,t);else{i=t;i.child=i.child||[];n[t.id]=i}return i};e._$forEach(t,function(e){a(e);if(!e.parent)i.push(a(e));else{var t=n[e.parent]||{id:e.parent};t.child=t.child||[];t.child.push(e);n[e.parent]=t}});return i};o._$startsWith=function(e,t){return e.slice(0,t.length)==t};o._$throttle=function(e,t,i,n){var a=+new Date,o=0,s=0,r=null,_,c,d,f=function(){s=a;e.apply(c,d)};return function(){a=+new Date;c=this,d=arguments,_=a-(n?o:s)-t;clearTimeout(r);if(n){if(i)r=setTimeout(f,t);else if(_>=0)f()}else if(_>=0)f();else if(i)r=setTimeout(f,-_);o=a}};o._$offsetLeft=function(e){var t=e.offsetLeft;for(;e.offsetParent;){t+=e.offsetParent.offsetLeft;e=e.offsetParent}return t};o._$delegate=function(i,a,o,s){n._$addEvent(a,s||"click",function(s){var r;var _=n._$getElement(s,"d:action");if(_)for(;_&&_!==a;){var c=t._$dataset(_,"action");r=(o||{})[c];if(e._$isFunction(r)){n._$stopDefault(s);r.call(i||this,_,s);break}_=_.parentNode}})};o._$closest=function(e,t){return e&&(t(e)?e:o._$closest(e.parentNode,t))};o._$deltaFormat=function(e){var t="",e=parseInt(e),i=864e5,n=36e5,a=6e4,o=1e3;if(e>a){t+=Math.floor(e/a)+"分";e-=a*Math.floor(e/a)}if(e>o){t+=Math.floor(e/o)+"秒";e-=o*Math.floor(e/o)}return t};o._$isEmpty=function(e){return null==e||void 0==e||""==e};o._$objIsEmpty=function(e){for(var t in e)return!1;return!0};o._$parseQueryString=function(e){var t=/(([^?&=]+)(?:=([^?&=]*))*)/g;var i={};var n;var a;var o;for(;n=t.exec(e);){a=n[2];o=n[3]||"";i[a]=decodeURIComponent(o)}return i};o._$isBelongArray=function(t,i){var n=!1;e._$forEach(t,function(e){if(e===i)n=!0},this);return n};o._$removeByItem=function(e,t){e.forEach(function(i,n){if(i.id==t.id){e.splice(n,1);return e}else return e})};o._$debounce=function(e,t,i){var n;return function(){var a=this,o=arguments;var s=function(){n=null;if(!i)e.apply(a,o)};var r=i&&!n;clearTimeout(n);n=setTimeout(s,t);if(r)e.apply(a,o)}};o._$parseTree=function(t,i){var n=i.id||"id",a=i.pid||"pid",o=i.children||"children";var s=[],r=[];e._$forEach(t,function(e){s[e[n]]=e},this);e._$forEach(t,function(e){var t=s[e[a]];if(t){!t[o]&&(t[o]=[]);t[o].push(e)}else r.push(e)},this);return r};o._$isRepeat=function(e){var t={};for(var i in e){if(t[e[i]])return!0;t[e[i]]=!0}return!1};o._$isIEX=function(e){var t=document.createElement("b");t.innerHTML="<!--[if IE "+e+"]><i></i><![endif]-->";return 1===t.getElementsByTagName("i").length};return o},"2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","340f3ac673161bf775fe41458cc223e8","7b946b5cd842c1aceab62d37f3506966","3da49e23d83c707316e52d7e8e62291a");I$("74b55b4f77cce3785daad18a3ec9119f",function(e,t,i,n){var a=Regular.dom;return{enter:function(e,t){function i(e){if(13==e.which){e.preventDefault();e.stopPropagation();t(e)}}a.on(e,"keypress",i);return function n(){a.off(e,"keypress",i)}}}},"94d9d8160f6796571e634a2c97783051","b7aac098ae4b6dc4338e9db07c9a613d","ba59bcf74b0f62bae6020b0801aef10c","b9552a16f0796193654b4455cf06bc01");I$("7427c4060500f7db797e25036e0e475f",function(e,t,i,n,a,o,s){var r=Regular.dom;return{"z-crt":function(e,t){this.$watch(t,function(t){r[t?"addClass":"delClass"](e,"z-selected");
})},"q-render":function(e,t){this.$watch(t,function(t){if(t)e.innerHTML=qs.render(t)})},"r-autofocus":function(e,t){setTimeout(function(){e.focus()},0)},"r-scroll":function(e,t){this.$watch(t,function(t){if(t&&e){var i=e.parentElement.parentElement.parentElement;i.scrollTop=e.offsetTop}})},"r-href":function(e,t){this.$watch(t,function(t){var i=location.href.split("#");i=i[1]||"";r.attr(e,"href","#"+path.join(i,t+""))})},"r-loading":function(t,i){var n=t.getAttribute("rule"),a=window.appConfig,o;this.$watch(i,function(i,s){t.src="https://ysf.nosdn.127.net/0D9A866D6BBCB9665CD53E5201A34324";if(""!==i)if(a){o=a.protocol.boss+"://"+a.domain.boss+a.online.boss;t.src=o+"res/img/loading.gif";e._$addClassName(t,"f-loding");var r=new Image;var _=function(){e._$delClassName(t,"f-loding");t.src=i+n};r.onload=_;r.onerror=_;r.src=i+n}else t.src=i+n})},"r-quickdelete":function(t,n){var a=e._$getByClassName(t,"j-quickdelete"),o=a[0],s=a[1];var _=function(){var e=(""+this.$get(n)).trim()||"";e.length?c.call(this):d.call(this)};var c=function(){e._$delClassName(s,"f-dn")};var d=function(){e._$addClassName(s,"f-dn")};var f=function(e){i._$stop(e);this.$update(n,"");d();o.focus()};d();r.on(o,"focus",_._$bind(this));r.on(o,"keyup",_._$bind(this));r.on(o,"blur",d._$bind(this));r.on(s,"mousedown",f._$bind(this))},"r-number":function(e,t,i,n){var a=this;r.on(e,"keydown",function(e){var t=e.event;var i=t.keyCode;if(!([46,8,9,27,13,110,190].indexOf(i)!==-1||65==i&&t.ctrlKey===!0||67==i&&t.ctrlKey===!0||88==i&&t.ctrlKey===!0||i>=35&&i<=39))if((t.shiftKey||i<48||i>57)&&(i<96||i>105)){e.preventDefault();return!1}})},"r-numberinput":function(e,t,i,n){var a=this;r.on(e,"input",function(e){var t=e.event;var i=new RegExp("^\\d+$");if(!i.test(t.target.value)){e.target.value=isNaN(parseInt(e.target.value))||0==e.target.value?"":parseInt(e.target.value);return!1}})}}},"5bd21216eb7851bb48d84acf022ca85f","2ad7178887dc8cdca6f726aa3bb0d129","7b946b5cd842c1aceab62d37f3506966","b9552a16f0796193654b4455cf06bc01","94d9d8160f6796571e634a2c97783051");I$("d9b3ef3a46640568bbd7f9d933eac87b",function(){return{"fk-sp":["访客端","发图"],"fk-cm":["访客端","web主动评价入口"],"fk-cs":["访客端","web满意度评价",["满意","不满意"]],"fk-lt":["访客端","网易七鱼小尾巴"]}});I$("1ff28646724649db10b683c38c0b2158",function(e,t,i,n){n._$log=function(e,t){var n=i[e];if(n){var a=n[2]||[];_gaq.push(["_trackEvent",n[0],n[1],a[t]||""])}};n._$delegate=function(i){e._$addEvent(i,"click",function(i){var a=e._$getElement(i,"d:log");if(a)n._$log(t._$dataset(a,"log"),t._$dataset(a,"logLabel"))},!0)};var a=!1;if(!a){a=!0;n._$delegate(document)}},"7b946b5cd842c1aceab62d37f3506966","5bd21216eb7851bb48d84acf022ca85f","d9b3ef3a46640568bbd7f9d933eac87b");I$("9b9850ee999a4712f1c1f999792a35ed",function(e,t,i,n,a,o,s,r,_){var c=Regular.dom;r.Component=Regular.extend({emmiter:new Regular,diff:o._$walkDiff,origin:{},config:function(e){this.supr(e)},cloneOrigin:function(e){for(var t in e)this.origin[t]=JSON.parse(JSON.stringify(e[t]))},copy:function(e){return JSON.parse(JSON.stringify(e))},clearError:function(e){if("object"===o._$typeOf(e))for(var t in e)for(var i=0,n=e[t].length;i<n;i++)e[t][i].error.error=!1;if("array"===o._$typeOf(e))for(var i=0,n=e.length;i<n;i++)e[i].error.error=!1},uiState:{},uiModel:{},services:{},param:{}}).filter(i).event(n).directive(a);return r},"5bd21216eb7851bb48d84acf022ca85f","b9552a16f0796193654b4455cf06bc01","5180df6ca22c35635ee255e9112d27ab","74b55b4f77cce3785daad18a3ec9119f","7427c4060500f7db797e25036e0e475f","94d9d8160f6796571e634a2c97783051","1ff28646724649db10b683c38c0b2158");I$("1881be8712b8041a97ba2180f1b66981",function(e,t,i,n,a,o,s,r,_,c){s._$request=function(){var e={},o=/\{(.*?)\}/gi,s=/^get|delete|head$/i,d=/json/i,f=/xml/i;var l=function(t){var i=e[t];if(i){delete i.s;delete i.f;delete e[t]}};var u=function(t,i){var n=e[t];if(n){var a=n[i],o=c.slice.call(arguments,2);try{(a||_).apply(null,o)}catch(s){if(!1)throw s;console.error(s.message);console.error(s)}l(t)}};var h=function(e,t){u(e,"s",t)};var m=function(e,i){i=i||{};if(i.code!=n._$CODE_ERRSERV||204!=i.data){t._$dispatchEvent(window,"resterror",i);if(!i.stopped)u(e,"f",i);else l(e)}else h(e,null)};var p=function(e,t,i){var n=e[t]||e[t.toLowerCase()];if(!n){n=i;e[t]=n}return n};var g=function(e,t,n){if(i._$isArray(e))n[t]=JSON.stringify(e)};return function(t,n){n=i._$merge({},n);var c={},l=n.param||r;t=t.replace(o,function(e,t){var i=l[t];if(null!=i)c[t]=!0;return encodeURIComponent(i||"")||e});var u=n.data||{};i._$loop(l,function(e,t){if(!c[t])u[t]=e});var v="text",b=n.headers||{},$=p(b,"Accept","application/json"),y=p(b,"Content-Type","application/json");if(d.test($))v="json";else if(f.test($))v="xml";var x=i._$uniqueID();e[x]={s:n.onload||_,f:n.onerror||_};n.method=n.method||"GET";if(s.test(n.method.trim())){i._$forIn(u,g);n.query=u;u=null}else if(d.test(y))u=JSON.stringify(u);n.type=v;n.data=u;n.headers=b;n.onload=h._$bind(null,x);n.onerror=m._$bind(null,x);return a._$request(t,n)}}();s._$abort=function(e){a._$abort(e)};o._$$CustomEvent._$allocate({element:window,event:"resterror"});if(!0)e.P("nej.j")._$requestByREST=s._$request;return s},"c27e07105db4b2613e9811a6e5ceab90","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","afa71b55d933063687962bda51d6839c","ba59bcf74b0f62bae6020b0801aef10c","73178fa1c529e77edd2d067795ed0e51");I$("087c2edf29756ea870d4bccbdec28e97",function(e,t,i,n,a,o){a._$doRequest=function(e,a){if(e){var o=function(e){e=e||{};var i=a.onerror;if(t._$isFunction(i))i.call(this,e,a)};var s=function(e){if(e&&0===(""+e.code).indexOf("2")){var i=a.onload;if(t._$isFunction(i))i.call(this,e.result,e)}else o.call(this,e)};var r=window.setting||{},_=!r.token?"":"?token="+r.token,c=t._$merge({cookie:!0},a,{type:"json",method:a.method||"POST",onload:s._$bind(this),onerror:o._$bind(this)});if(e.indexOf("://")<0)e=(r.remoteRoot||"")+e+_;return!a.rest?i._$request(e,c):n._$request(e,c)}else console.error("not found request url")};a._$abort=function(e,t){!t?i._$abort(e):n._$abort(e)}},"7c0d5856d6e99d0fb30abadfe6db5ad1","2ad7178887dc8cdca6f726aa3bb0d129","ba59bcf74b0f62bae6020b0801aef10c","1881be8712b8041a97ba2180f1b66981");I$("1288ff76976254a55a8e9b1f47a95126",'{#if status == \'pending\' }\n\t  <button type="button" class="u-btn u-btn-sixth" disabled=true >\n        {text}中...\n    </button>\n{#elseif status == \'success\' || _status == \'success\'}\n\t<button type="button" class=" u-btn u-btn-sixth" disabled = true>\n\t  <i class="u-icon-tickwhite"></i> {text}成功\n\t</button>\n{#else}\n\t<button type="button" class="u-btn" on-click = {this.onClick($event)} data-log={dataLog} {#if dataLogLabel!==undefined}data-log-label={dataLogLabel}{/if} r-class={{"u-btn-disabled": (status == \'disabled\' || !!disabled)}} disabled = {(status == \'disabled\' || !!disabled)}>\n\t\t{text}\n  </button>\n{/if}');I$("c5318f8201d51b7c14c2fd76c5079950",function(e,t,i,n){var a=t.Component;n=a.extend({name:"button-save",template:i,config:function(e){var t=this;e.status=e.defstatus||"";e.text=e.text||"保存";e.saveOnce=e.saveOnce||!1;t.uiState={};var i="";this.$watch("status",function(e,n){i="disabled"==e?e:"";if("success"==e&&!t.data.saveOnce){if(t.uiState.timingOne)clearTimeout(t.uiState.timingOne);t.uiState.timingOne=setTimeout(function(){t.data.status=i;t.$update()},3e3)}if("error"==e)t.data.status="";if("disabled"==e&&""!==n&&void 0!==n){t.data._status="success";if(t.uiState.timingTwo)clearTimeout(t.uiState.timingTwo);t.uiState.timingTwo=setTimeout(function(){t.data.status=i;t.data._status="";t.$update()},3e3)}});this.supr()},onClick:function(e){this.$emit("click",e)}});return n},"94d9d8160f6796571e634a2c97783051","9b9850ee999a4712f1c1f999792a35ed","1288ff76976254a55a8e9b1f47a95126");I$("7a3b840dd877a2cdb8d13ddcbb56c331",'<div class="u-select" r-class={{"u-report-disabled-status-select": disable == true}}>\n    <div class="select-sel j-ipt" on-click={this.toggle($event)} tabindex=0 on-blur={this.selectBlur($event)} ref="selectbody">\n        <span>{value||\'--请选择--\'}</span>\n        <i class="u-icon u-icon-down"></i>\n    </div>\n    <div class="select-cnt" r-hide={!show}>\n        <div class="list scro_list">\n            <ul>\n                <li class="itm z-title-hover" r-hide="!needefault">\n                    <h4 class="title-level-1" on-click={this.select($event,{text:"",value:""})}>\n                        <span class="txt">--请选择</span><i class="u-icon-tickblue"></i>\n                    </h4>\n                </li>\n                {#list list as item}\n                <li class="itm z-title-hover">\n                    <h4 class="title-level-1" on-click={this.select($event,item)}>\n                        <span class="txt" >{item[textkey]}</span><i class="u-icon-tickblue"></i>\n                    </h4>\n                </li>\n                {/list}\n            </ul>\n        </div>\n    </div>\n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');I$("c382cb10589438602dab4c7a57783dd0",function(e,t,i,n,a,o,s){var r=e.Component.extend({name:"wgt-custom-select",template:o,config:function(e){this.data=a._$extend(e,{value:"",show:!1,textkey:"text",error:"",required:!1,list:[{text:"aa",value:12},{text:"bb",value:12},{text:"cc",value:12},{text:"dd",value:12},{text:"ee",value:12}]});this.supr(e)},init:function(){this.supr();t._$addEvent(document,"click",this.hideOpts._$bind(this))},hideOpts:function(){this.data.show=!1;this.$update()},toggle:function(e){e.stop();t._$dispatchEvent(document,"click");if(!this.data.disable)this.data.show=!this.data.show},select:function(e,i){t._$stopBubble(e);this.data.value=i[this.data.textkey];this.data.show=!1;if(this.validate())this.$emit("select",i)},validate:function(){if(this.data.required&&""==this.data.value){this.data.error="必填项不能为空";return!1}this.data.error="";return!0},isValidate:function(){if(this.data.required&&""==this.data.value)return!1;else return!0},selectBlur:function(){},destroy:function(){this.supr()}});return r},"9b9850ee999a4712f1c1f999792a35ed","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","5bd21216eb7851bb48d84acf022ca85f","94d9d8160f6796571e634a2c97783051","7a3b840dd877a2cdb8d13ddcbb56c331");
I$("013e3b24595fafd1529134d15cf239ef",'<div class="ipts ipts-clear">\n    <input class="u-ipt j-ipt" placeholder={@(placeholder?placeholder:(isNumber?"请输入数字":"请输入内容"))} r-model={value} on-keyup={this.onkeyup($event)} on-focus={this.onfocus($event)} on-blur={this.onblur($event)} type={@(type)} maxlength={@(max)} style="ime-mode:Disabled" ref="j-edit-input">\n    <i class="u-icon-clear" on-mousedown={this.clearCnt()} r-class={{ \'f-dn\' : !value}} r-hide={!(value && _delIcon)}></i> \n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');I$("f462400f2699d025503e4d1ce492e932",function(e,t,i,n,a){var o=i.Component;a=o.extend({name:"wgt-custom-input",template:n,config:function(e){t._$extend(e,{value:"",oldNumber:"",required:!1,isNumber:!1,max:20,error:"",type:e.type||"text",errorInfo:e.errorInfo||"必填项不能为空",rules:[]})},validate:function(){if(!this.data.value&&this.data.required){this.data.error=this.data.errorInfo;return!1}var e=this.data.rules;for(var t=0;t<e.length;t++){var i=e[t].regExp;if(!i.test(this.data.value)){this.data.error=e[t].errorMsg;return!1}}this.data.error="";return!0},isValidate:function(){if(!this.data.value&&this.data.required)return!1;var e=this.data.rules;for(var t=0;t<e.length;t++){var i=e[t].regExp;if(!i.test(this.data.value))return!1}return!0},onblur:function(t){e._$stopBubble(t.event);this.data._delIcon=!1;if(t.target.value!=t.target.oldVal){if(this.validate())this.$emit("eBlur",this.data.value)}else if(!this.data.value&&this.data.required)this.data.error=this.data.errorInfo},onfocus:function(t){e._$stopBubble(t.event);t.target.oldVal=t.target.value;this.data._delIcon=!0},onkeyup:function(t){e._$stopBubble(t.event);if(this.data.isNumber)if(/^[+-]?(\d+\.?\d*)?$/.test(this.data.value))this.data.oldNumber=this.data.value;else this.data.value=this.data.oldNumber;this.$emit("eKeyup",this.data.value)},clearCnt:function(){this.data.value="";this.data.oldNumber="";this.validate();this.$emit("eKeyup",this.data.value)},$getValue:function(){var e=this.data;return{id:e.id,name:e.name,value:e.value}}});return a},"7b946b5cd842c1aceab62d37f3506966","94d9d8160f6796571e634a2c97783051","9b9850ee999a4712f1c1f999792a35ed","013e3b24595fafd1529134d15cf239ef");I$("d3f8aeff00051214ab690309e644d413",'<label class="m-check-item {checked?\'checked\':\'\'}" onselectstart="return false" title={text}>\n    <input type="checkbox" r-model={checked} r-hide={!showCheckbox}>\n    <span>{text}</span>\n    <i class="u-icon-tickblue"></i>\n</label>\n');I$("ebea8e58b322210ffeca34ec0719ccb2",".m-check-item {\n    cursor: pointer;\n    display: inline-block;\n    position: relative;\n    height: 26px;\n    line-height: 16px;\n    width: 120px;\n    font-size: 14px;\n    color: #333333;\n    border: 1px solid #e8e8e8;\n    border-radius: 2px;\n    padding: 4px 20px;\n    box-sizing: border-box;\n    text-align: center;\n    margin-top: 10px;\n    margin-right: 9px;\n}\n\n.m-check-item:last-child {\n    margin-right: 0px;\n}\n\n.m-check-item.checked {\n    border-color: #5092e1;\n}\n\n.m-check-item>input {\n    display: inline-block\\9;\n    position: absolute;\n    left: 5px;\n    top: 3px;\n}\n\n.m-check-item>span {\n    display: inline-block;\n    width: 100%;\n    overflow: hidden;\n    word-wrap: normal;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.m-check-item>i {\n    position: absolute;\n    display: none;\n    top: 6px;\n    right: 4px;\n}\n\n.m-check-item.checked>i {\n    border-color: #5092e1;\n    display: block;\n\n}\n");I$("f86462a230dd02ffd4152bfb1d78cef1",function(e,t,i,n,a,o){i._$pushCSSText(o);i._$dumpCSSText();return e.Component.extend({name:"wgt-check-item",template:a,config:function(e){t._$extend(e,{checked:!1,showCheckbox:!1})},init:function(){}})},"9b9850ee999a4712f1c1f999792a35ed","94d9d8160f6796571e634a2c97783051","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","d3f8aeff00051214ab690309e644d413","ebea8e58b322210ffeca34ec0719ccb2");I$("9f14c9d418ef8eda7ee66ba96036218e",'<div class="m-select-mul" onselectstart="return false" on-click={this.delegate($event)}>\n    <div class="m-select-mul-sel j-ipt" on-click={this.toggle($event)} tabindex="0" on-blur={this.selectBlur($event)}>\n        <span title={value||\'\'}>{valueAsDefault&&customfieldEdit?\'请选择\':(value||\'请选择\')}</span>\n        <i class="u-icon u-icon-down"></i>\n    </div>\n    <div class="m-select-mul-cnt" r-hide={!show}>\n        <div class="cnt-top">\n            <div class="cnt-head">\n                <label class="m-check-item {isAllSel?\'checked\':\'\'}" onselectstart="return false" title={allText} ref="selAll">\n                    <input type="checkbox" r-model={isAllSel} r-hide={!showCheckbox}>\n                    <span>{allText}</span>\n                    <i class="u-icon-tickblue"></i>\n                </label>\n            </div>\n            <div class="cnt-middle">\n                <div class="level-1-wrap z-show">\n                    <div class="level-1-cnt">\n                        {#list list as c}\n                        <wgt-check-item text="{c[key]}" checked={c.selected} showCheckbox={showCheckbox}></wgt-check-item>\n                        {/list}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="cnt-bottom">\n            <button class="cancel" on-click={this.onCancel()}>取消</button>\n            <button class="ok" on-click={this.onOk()}>确定</button>\n        </div>\n    </div>\n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');I$("833c6a9166ed8361791c195fa63b6ecd",function(e,t,i,n,a,o){return e.Component.extend({name:"wgt-custom-mulselect",template:o,computed:{isAllSel:{get:function(){for(var e=this.data.list.length-1;e>=0;e--)if(!this.data.list[e].selected)return!1;return!0},set:function(e){for(var t=this.data.list.length-1;t>=0;t--)this.data.list[t].selected=e}}},config:function(e){t._$extend(e,{show:!1,key:"name",allText:"所有选项",value:"",error:"",required:!1,isAll:!1,list:[],showCheckbox:t._$isIEX(8)})},init:function(){n._$addEvent(document,"click",this.__hideOpts._$bind(this));this.__initSelected();this.$watch("isAll",function(e,t){e&&this.__doSelectAll(!i._$hasClassName(this.$refs.selAll,"checked"))})},toggleAll:function(e){n._$stopBubble(e.event);this.isAllSel=!this.isAllSel},__initSelected:function(){var e=this.data.value.split(";");for(var t=0;t<this.data.list.length;t++)if(e.indexOf(this.data.list[t][this.data.key])!==-1)this.data.list[t].selected=!0;else this.data.list[t].selected=!1;if(this.data.value)this.data.error=""},__hideOpts:function(){this.data.show=!1;this.$update()},toggle:function(){n._$dispatchEvent(document,"click",{originSrcElement:Regular.dom.element(this)});this.data.show=!0},delegate:function(e){n._$stopBubble(e.event)},onOk:function(){var e=this.__getSelected(),t=e.names;this.data.value=t.join(";");this.data.show=!1;if(this.validate())this.$emit("ok",this.data.value);return!1},onCancel:function(){this.data.show=!1;this.__initSelected();return!1},validate:function(){if(this.data.required&&""==this.data.value){this.data.error="必填项不能为空";return!1}this.data.error="";return!0},isValidate:function(){if(this.data.required&&""==this.data.value)return!1;else return!0},__doSelectAll:function(e){for(var t=this.data.list.length-1;t>=0;t--)this.data.list[t].selected=e},__getSelected:function(){var e=[];for(var t=0;t<this.data.list.length;t++){var i=this.data.list[t];if(i.selected)e.push(i[this.data.key])}return{names:e}},selectBlur:function(){}})},"9b9850ee999a4712f1c1f999792a35ed","94d9d8160f6796571e634a2c97783051","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","f86462a230dd02ffd4152bfb1d78cef1","9f14c9d418ef8eda7ee66ba96036218e");I$("a9e62b4fbb4bc9a8e2218cd038a9330c",'<div class="ipts">\n    <textarea class="u-textarea j-ipt" maxlength={@(max)}  placeholder={@(placeholder?placeholder:"请输入内容")} r-model={value} on-keyup={this.onkeyup($event)} on-focus={this.onfocus($event)} on-blur={this.onblur($event)} ref="j-ipt"></textarea>\n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');I$("b60b89e8432faf1911470eddec53ebe5",function(e,t,i,n,a){var o=i.Component;a=o.extend({name:"wgt-custom-textarea",template:n,config:function(e){t._$extend(e,{value:"",required:!1,max:500,error:"",errorInfo:e.errorInfo||"必填项不能为空"})},validate:function(e){if(!this.data.value&&this.data.required){this.data.error=this.data.errorInfo;return!1}this.data.error="";return!0},isValidate:function(){if(!this.data.value&&this.data.required)return!1;else return!0},onblur:function(t){e._$stopBubble(t.event);if(t.target.value!=t.target.oldVal){if(this.validate()){if(this.data.value.length>this.data.max){this.data.error="";this.data.value=this.data.value.substr(0,this.data.max)}this.$emit("eBlur",this.data.value)}}else if(!this.data.value&&this.data.required)this.data.error=this.data.errorInfo},onfocus:function(t){e._$stopBubble(t.event);t.target.oldVal=t.target.value},onkeyup:function(t){e._$stopBubble(t.event);this.$emit("eKeyup",this.data.value)},$getValue:function(){var e=this.data;return{id:e.id,name:e.name,value:e.value}}});return a},"7b946b5cd842c1aceab62d37f3506966","94d9d8160f6796571e634a2c97783051","9b9850ee999a4712f1c1f999792a35ed","a9e62b4fbb4bc9a8e2218cd038a9330c");I$("a6927c3097a03f70239b577eefe5586b",'<div class="m-custom-fields">\n    {#list fields as field}\n    <div class="u-field-itm" r-class={{\'u-field-itm-time\' : field.type == 3}}>\n        <label class="u-field-title" title="{field.name|escape}">{field.name|escape}\n        </label>\n        {#if field.required}\n            <span class="u-necessary">*</span>\n        {/if}\n        <div class="u-field-cnt" r-class={{\'u-field-cnt-time\' : field.status != 1 && !disabled}}>\n            {#if field.type==0}\n                {#if field.description==0}\n                    {#if field.status==0 || disabled}\n                        <span class="u-field-val">{field.value}</span> \n                    {#else}\n                        <wgt-custom-input value={field.value||\'\'} isNumber={false} required={!!field.required} max={field.maxlength||20} rules={field.rules} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id}></wgt-custom-input>\n                    {/if}                \n                {#elseif field.description==1}\n                    {#if field.status==0 || disabled}\n                        <span class="u-field-val">{field.value}</span> \n                    {#else}\n                        <wgt-custom-input value={field.value||\'\'} isNumber={true} required={!!field.required} max={field.maxlength||20} rules={field.rules} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id}></wgt-custom-input>\n                    {/if}                \n                {#elseif field.description==2}\n                    {#if field.status==0 || disabled}\n                        <div class="ipts">\n                            <textarea class="u-textarea" r-model={field.value} disabled></textarea>\n                        </div>\n                    {#else}\n                        <wgt-custom-textarea value={field.value||\'\'} required={!!field.required} max={field.maxlength||500} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id}></wgt-custom-textarea>\n                    {/if}                \n                {/if} \n            {#elseif field.type==1}\n                {#if field.status==0 || disabled}\n                    <span class="u-field-val">{field.value}</span> \n                {#else}\n                    <wgt-custom-select list={field.description} textkey="text" needefault={true} value={field.value||\'\'} required={!!field.required} on-select={this.changeSelect($event[\'text\'],field)} id={field.id}></wgt-custom-select>\n                {/if}                 \n            {#elseif field.type==2}\n                {#if field.status==0 || disabled}\n                    <span class="u-field-val">{field.value}</span> \n                {#else}\n                    <wgt-custom-mulselect key="text" list={field.description} value={field.value||\'\'} required={!!field.required} on-ok={this.changeSelect($event,field)} id={field.id}></wgt-custom-mulselect>\n                {/if}\n\n\t        {#elseif field.type==3}\n\t            {#if field.status==0 || disabled }\n\t                <span class="u-field-val">{field.value|time}</span>\n\t            {#else}\n\t                <wgt-custom-singletimer value={field.value||\'\'} required={!!field.required} on-change={this.changeTimer($event,field)} id={field.id} maxDate={15079968000000}></wgt-custom-singletimer>\n\t            {/if}\n            {#elseif field.type==-1}\n                <dateTimePicker type="current" startTime={field.startTime} endTime={field.endTime} on-change={this.changeTimer($event,field)}></dateTimePicker>\n            {/if}\n        </div>  \n    </div>\n    {/list}\n</div>\n');
I$("72a2eed686f11b3ce4a763d8fd26f316",function(e,t,i,n,a,o,s,r,_,c){return e.Component.extend({name:"customFields",template:c,config:function(e){t._$extend(e,{fields:[]});this.supr(e)},init:function(){this.supr()},destroy:function(){this.supr()},$getFieldsValue:function(){var e=[];for(var t=0;t<this._children.length;t++){var i=this._children[t],n=i.data.value,a=i.validate(),o=i.data.id;if(a)e.push({id:o,value:n})}return e},$isValidate:function(){return this._children.every(function(e){return e.isValidate()})},iptBlur:function(e,t){this.$emit("iptBlur",{id:t.id,value:e})},iptKeyup:function(e,t){this.$emit("iptKeyup",{id:t.id,value:e})},changeSelect:function(e,t){this.$emit("change",{id:t.id,value:e})},changeTimer:function(e,t){var i=e.startTime+";"+e.endTime;if(t.type==-1)this.$emit("change",{id:t.id,value:i});else this.$emit("change",{id:t.id,value:e.time})}}).filter({time:function(e){return a._$format(Number(e),"yyyy-MM-dd HH:mm")}})},"9b9850ee999a4712f1c1f999792a35ed","94d9d8160f6796571e634a2c97783051","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","c382cb10589438602dab4c7a57783dd0","f462400f2699d025503e4d1ce492e932","833c6a9166ed8361791c195fa63b6ecd","b60b89e8432faf1911470eddec53ebe5","a6927c3097a03f70239b577eefe5586b");I$("445ba8a5da9310aeb4bf5da30088f1b2",'<div class="m-leave" r-class={{\'hasLogo\': !!hasLogo}} r-hide={!isShow}>\n\t<div class="leave-bd">\n\t    <div class="leave-message">\n\t    \t<p class="message">{finish ? \'留言发送成功\' : message}</p>\n\t    </div>\n\t    {#if fields && fields.length}\n\t    <div class="leave-form">\n\t        <customFields ref="cfield" fields={fields} disabled={finish}></customFields>\n\t    \t<p r-hide={!tip} class="tip">{tip}</p>\n\t        <div class="btns" r-hide={finish}>\n\t        \t<button-save ref="saveButton" text="发送" status={this.getBtnStatus()} saveOnce={true} on-click={this.submit($event)}></button-save>\n\t        </div>\n\t    </div>\n\t    {/if}\n\t</div>\n\t<div class="leave-ft" r-hide={!hasLogo}>\n\t\t<img class="taillogo" src="https://qiyukf.nosdn.127.net/sdk/res/img/tailLogo@2x_51a85b19099da606135ca68d814c5d6e.png" alt="网易七鱼提供服务支持">\n\t</div>\n</div>');I$("81b518abf57be8befd9b471db6aae8f1",function(e,t,i,n,a,o,s,r,_){var c={"-3":"email","-2":"mobile","-1":"message"};var d="/webapi/user/getLeaveCustomfield";return e.Component.extend({name:"leave",template:_,config:function(e){t._$extend(e,{hasMobile:!1,hasEmail:!1,message:"当前客服不在线，如需帮助请留言",saveStatus:"",tip:"",isShow:!0,hasLogo:!0});if(!this.data.fields)this.getFields();else this.addDefFields();this.supr(e)},init:function(){this.supr();this.$on("show",this.show._$bind(this));this.$on("sendDone",this.onSendDone._$bind(this))},destroy:function(){this.supr()},getFields:function(){var e=this.data;var t={appkey:e.appkey};if(e.bid)a._$merge(t,{bid:e.bid});o._$doRequest(d,{method:"get",data:t,onload:this.onFieldsLoad._$bind(this),onerror:this.onFieldsLoadErr._$bind(this)})},onFieldsLoad:function(e){a._$forEach(e,function(e){e.id=e.fieldId;e.description=JSON.parse(e.description)});this.data.fields=e;this.addDefFields();this.$update()},onFieldsLoadErr:function(e){this.onFieldsLoad([]);console.error("load error")},addDefFields:function(){var e=this.data;e.fields.push({id:-1,name:"留言",type:0,description:2,required:1,maxlength:4e3});if(e.hasEmail)e.fields.unshift({id:-3,name:"邮箱",type:0,description:0,required:1,maxlength:61,rules:[{regExp:/^\w+[-.\w]*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,errorMsg:"请填写正确的邮箱地址"},{regExp:/^[^@]{1,30}@[^@]{1,30}$/,errorMsg:"请填写正确的邮箱地址"}]});if(e.hasMobile)e.fields.unshift({id:-2,name:"手机",type:0,description:1,required:1,maxlength:11,rules:[{regExp:/^\d{11}$/,errorMsg:"手机号不足11位"}]})},submit:function(e){if("pending"!=this.data.saveStatus&&"success"!=this.data.saveStatus){var t=this.$refs["cfield"];if(t.$isValidate()){this.data.saveStatus="pending";var i=t.$getFieldsValue();var n={},o=[];a._$forEach(i,function(e,t){this.data.fields[t].value=e.value;if(c[e.id])n[c[e.id]]=e.value;else o.push({fieldId:e.id,fieldValue:e.value})}._$bind(this));if(o.length)n.customFields=o;this.$emit("submit",n)}}},onSendDone:function(e){if(e.error){this.data.saveStatus="";if(e.error.trashWords)this.data.tip="消息包含违禁信息，发送失败";else this.data.tip="发送失败"}else{this.data.saveStatus="success";this.data.tip=""}this.$update()},show:function(e){this.data.isShow=e;this.$update()},getBtnStatus:function(){var e=this.data;if(""==e.saveStatus)if(this.$refs["cfield"].$isValidate())ret="";else ret="disabled";else ret=e.saveStatus;return ret}})},"9b9850ee999a4712f1c1f999792a35ed","94d9d8160f6796571e634a2c97783051","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","087c2edf29756ea870d4bccbdec28e97","c5318f8201d51b7c14c2fd76c5079950","72a2eed686f11b3ce4a763d8fd26f316","445ba8a5da9310aeb4bf5da30088f1b2");I$("e61a11c80712c411d29064a2f931ff75",function(e,t,i,n,a,o,s,r,_,c,d,f,l,u,h,m,p,g,v,b,$,y,x,C,w,E,S){E._$$Module=e._$klass();S=E._$$Module._$extend(r._$$Module);S.__init=function(e){this.__super(e);this.__evalModal={};this.__isEvalModalOpen=!1;this.__nScrollContainer=t._$getByClassName(document.body,"f-scrocnt")[0];this.__nUpscroll=t._$getByClassName(document.body,"j-upscroll")[0];this.__upscrollStatus="init";var i=c._$getConfig("client_input");this.__thSendInputContent=$._$throttle(this.__sendInputContent,1e3*i.sendingRate)._$bind(this)};S.__reset=function(e){this.__super(e);this.__doInitDomEvent([[document.body,"click",this.__onClickBox._$bind(this)],[_._$$Cache,"oneval",this.__onEval._$bind(this)],[this.__nScrollContainer,"scroll",this.__onScroll._$bind(this)]]);c._$batEvent({onconnect:this.__onConnect._$bind(this),onfinish:this.__onFinish._$bind(this),ondisconnect:this.__onDisconnect._$bind(this),onkefuerror:this.__onDisconnect._$bind(this),onnokefu:this.__onNokefu._$bind(this),onnokefunoleave:this.__onNokefuNoLeave._$bind(this),onkickout:this.__onFinish._$bind(this),onusererror:this.__onUserErr._$bind(this),onqueuestart:this.__onQueueStart._$bind(this),onqueuechange:this.__onQueue._$bind(this),onqueuefail:this.__onQueueFail._$bind(this),onovertime:this.__onOverTime._$bind(this),onshunt:this.__onShuntEntries._$bind(this),onshuntstatus:this.__onShuntStatus._$bind(this),ontransferresult:this.__onTransferResult._$bind(this),onproducterror:this.__onProductError._$bind(this),onevalresultmsg:this.__cbReceiveResultEvaluate._$bind(this),onbotentry:this.__onBotEntry._$bind(this),unbotentry:this.__unBotEntry._$bind(this),onconfig:this.__onConfig._$bind(this),onleavesend:this.__onLeaveSend._$bind(this),onsamesession:this.__onSameSession._$bind(this)});this.__cache=_._$$Cache._$allocate({onerror:function(e){if(e&&"NotAnImage"===e.code){var t="目前可支持传送jpg/jpeg/png/bmp/gif格式的图片";this.__showTip(t,!0);this.__editor._$resetFile()}}._$bind(this),onhistorylistload:this.__onHistoryListLoad._$bind(this),onhistorylistloaderr:this.__onHistoryListLoadErr._$bind(this),onhistorylistend:this.__onHistoryListEnd._$bind(this)})};S.__destroy=function(){this.__doClearComponent();this.__super()};S.__onNokefu=function(){this.__isChatting=3;this.__hideTip();this.__setCommentBtnState(2);this.__setActionBtnState(0);i._$dispatchEvent(document,"click");t._$clearChildren(this.__box);var e=window.leaveType;this.__cLeave=new w({data:{appkey:c._$getAppkey(),message:window.leaveInfo,hasMobile:0==e||1==e||2==e,hasEmail:0==e||1==e||3==e}}).$inject(this.__box).$on("submit",this.__onLeaveSubmit._$bind(this))};S.__onLeaveSubmit=function(e){c._$sendOfflineMessage(e)};S.__onLeaveSend=function(e){this.__cLeave.$emit("sendDone",e)};S.__doScrollBottom=function(e){var t=this.__nScrollContainer;if(this.__scrollTimer){clearTimeout(this.__scrollTimer);delete this.__scrollTimer}this.__scrollTimer=setTimeout(function(){t.scrollTop=2*t.scrollHeight},100)};S.__doScrollToFill=function(){var e=this.__nScrollContainer;if(this.__upscrollTimer){clearTimeout(this.__upscrollTimer);delete this.__upscrollTimer}this.__upscrollTimer=setTimeout(function(){var i=t._$getByClassName(e,"j-history-split");if(!(i.length<2)){var n=Math.abs(t._$offset(i[0],document.body).y-t._$offset(i[1],document.body).y)-50;e.scrollTop=n<0?0:n}}._$bind(this),100)};S.__onAfterInsert=function(e){if("afterBegin"==e.pos&&this.__historyHasLoad)this.__doScrollToFill();else this.__doScrollBottom()};S.__onAfterUpdate=function(e){var t=e.data;if(this.__isResend&&t.state===-1){this.__isResend=0;var i="网络连接失败，请稍后再试";this.__showTip(i,!0);this.__editor._$resetFile()}};S.__onEmptyList=function(e){e.stopped=!0};S.__onAfterListLoad=function(e){var t=this;t.__doScrollBottom.call(t);if(!this.__isRobot&&1==this.__isChatting)c._$sendPrdMsg();this.__listHasLoad=!0;this.__cache._$getHistory({isFirst:!0})};S.__setCommentBtnState=function(e){if(0===e){t._$replaceClassName(this.__commentBtn,"f-dn","z-dis");this.__commentBtn.disabled=!0;this.__setActionBtnState(0)}else if(1===e){t._$delClassName(this.__commentBtn,"z-dis f-dn");this.__commentBtn.disabled=!1;this.__setActionBtnState(0)}else if(2===e)t._$addClassName(this.__commentBtn,"f-dn")};S.__initEvaluatonForm=function(){var e=c._$getEvaluation();this.__evalModal[e.type]=m._$$EvaluateModal._$allocate({form:e,parent:document.body,submit:this.__evalSubmit._$bind(this),onshow:this.__onEvalModalShow._$bind(this),onhide:this.__onevalModalHide._$bind(this)})};S.__doComment=function(e,i){var n=Number(t._$dataset(e,"initial")||0),a=t._$dataset(e,"sid"),o=t._$dataset(e,"mid"),s=t._$dataset(e,"type")||c._$getEvaluation().type,r=c._$getSessionID();if(n)if(this.__commentBtn.disabled)return;this.__evalModal[s]._$showModal(n,a,o)};S.__evalSubmit=function(e){var i=c._$getSessionID();e=n._$merge(e,{sid:e.sid||i,id:e.id||c._$getEvaluation().id});if(e.flag){var a=t._$getByClassName(document.body,"j-flagcomment");if(a.length){var o=t._$dataset(a[a.length-1],"sid");if(o==i)e.flag=0}}this.__cache._$sendEvalMessage(e,e.flag);if(e.sid==i)this.__setCommentBtnState(0)};S.__cbReceiveResultEvaluate=function(e){if(e.sid==c._$getSessionID())this.__setCommentBtnState(0);
};S.__onEval=function(e){var t=e.msg;var i=document.getElementById("comment_btn");if(i)i.setAttribute("data-mid",t.id);if(!this.__isEvalModalOpen&&e.autoPopup){var n=t.category,a=t.sid,o=t.id;this.__evalModal[n]._$showModal(!1,a,o)}};S.__onEvalModalShow=function(){this.__isEvalModalOpen=!0};S.__onevalModalHide=function(){this.__isEvalModalOpen=!1};S.__onScroll=function(){var e;return function(t){i._$stop(t);if("loading"!=this.__upscrollStatus&&"end"!=this.__upscrollStatus){if(!e)e=this.__nScrollContainer.scrollTop;var n=this.__nScrollContainer.scrollTop<e?"up":"down";if("up"==n&&this.__nScrollContainer.scrollTop<=20){this.__upscrollStatus="loading";this.__renderUpscroll();this.__cache._$getHistory({isFirst:!this.__historyHasLoad})}e=this.__nScrollContainer.scrollTop}}}();S.__renderUpscroll=function(){o._$render(this.__nUpscroll,"upscroll",{status:this.__upscrollStatus,historyHasLoad:this.__historyHasLoad});if("loading"==this.__upscrollStatus||"error"==this.__upscrollStatus)this.__nScrollContainer.scrollTop=0};S.__onHistoryListLoad=function(){this.__upscrollStatus="success";this.__renderUpscroll();this.__historyHasLoad=!0};S.__onHistoryListLoadErr=function(){this.__upscrollStatus="error";this.__renderUpscroll()};S.__onHistoryListEnd=function(){this.__upscrollStatus="end";this.__renderUpscroll()};S.__onBotEntry=function(e){e=e||[];if(0!==e.length){var i=t._$getByClassName(document.body,"j-flag-bot")[0],n=t._$getByClassName(document.body,"f-scrocnt")[0];var a=t._$getStyle(i,"bottom");t._$style(i,{opacity:1});t._$style(n,{bottom:parseInt(a.replace(/px/gi,""))+i.offsetHeight+"px"});if(this.__botentry)this.__botentry._$recycle();this.__botentry=v._$$BotEntry._$allocate({parent:i,list:e,select:this.__onBotSelect._$bind(this)})}};S.__unBotEntry=function(){var e=t._$getByClassName(document.body,"j-flag-bot")[0],i=t._$getByClassName(document.body,"f-scrocnt")[0];t._$style(i,{bottom:t._$getStyle(e,"bottom")});t._$style(e,{opacity:0,"z-index":-100})};S.__onBotSelect=function(e){var t=e.action;if(1==t)this.__sendMsg({type:"text",content:e.label});else if(2==t)window.open(e.url,"bot-"+e.label)};S.__showBotForm=function(e,i){var n=t._$dataset(e,"id"),a=t._$dataset(e,"sid");if(a==c._$getSessionID()&&c._$canSendMessage()){var o=this.__cache._$getItemInCache(n);if(o)this.__initBotForm(o)}else{var s="该会话已结束，表单已失效";this.__showTip(s,!0)}};S.__initBotForm=function(e){this.__editor&&this.__editor._$blur();var t=e.content.template;n._$forEach(t.forms,function(e){e.key=e.id;e.rules=[];if(e.required)e.rules.push({name:"required",value:e.required});if("image"==e.type){var t=navigator.userAgent;var i=t.match(/MicroMessenger\/([\d\.]+)/i);if(/android/.test(t.toLowerCase())&&i&&parseFloat(i[1])>6.3)e.accept="image/*";else e.accept="image/jpg,image/jpeg,image/png,image/bmp,image/gif"}else if("input"==e.type)e.forbidden=["&"]});this.__botForm=y._$$BotForm._$allocate({parent:this.__chatBox||document.body,data:{list:t.forms,title:t.label,icon:e.from.portrait,submitBtn:"提交"},onhide:this.__onBotFormHide._$bind(this,e),onsubmit:this.__onBotFormSubmit._$bind(this,e)})};S.__onBotFormSubmit=function(e,t){var i=e.content.template,a=i.params;n._$forEach(t,function(e){var t="image"==e.type?JSON.stringify(e.value):e.value;var i=e.key+"="+t;a+="&"+i});a+="&msgIdClient="+e.msgIdClient;if(c._$canSendMessage()){this.__cache._$sendMessage({type:"crm-thirdorder",content:{params:a,template:{id:"qiyu_template_botForm",forms:t}}});i.submitted=1;this.__cache._$updateMessage(e);this.__botForm._$recycle()}else{this.__botForm._$recycle();var o="该会话已结束，表单已失效";this.__showTip(o,!0)}};S.__onBotFormHide=function(e,t){var i=e.content.template;n._$forEach(i.forms,function(e,i){e.value=t[i].value});this.__cache._$updateMessage(e)};S.__onSelectBotCard=function(e,n){i._$stop(event);var a=t._$dataset(e,"target"),o=t._$dataset(e,"params"),s=t._$dataset(e,"label"),r=t._$dataset(e,"type");if("popup"==r)C._$$BotDetail._$allocate({parent:document.body,data:{request:{target:a,params:o}}});else if(!a)this.__sendMsg({type:"text",content:s});else this.__sendMsg({content:{target:a,params:o,template:{id:"qiyu_template_text",label:s}},type:"crm-thirdorder"})};S.__onBotDetail=function(e,i){var n=t._$dataset(e,"id"),a=this.__cache._$getItemInCache(n);if(a)C._$$BotDetail._$allocate({parent:document.body,data:{request:{target:a.content.template.target,params:a.content.template.params},content:a.content}})};S.__onMoreBotCard=function(e,i){this.__send(function(){var i=t._$dataset(e,"id"),n=this.__cache._$getItemInCache(i);x._$$BotList._$allocate({parent:document.body,data:n,onselect:this.__onSelectBotCard._$bind(this)})}._$bind(this))};S.__send=function(e){if(this.__isChatting){if(1==c._$keepConnection){c.__doDisConnect();c._$keepConnection=0}if(c._$canSendMessage())e();else{this.__editor&&this.__editor._$resetFile();if(!this.__isRobot)this.__editor&&this.__editor._$toast("请等待连线成功后，再发送消息");if(this.__isChatting||1==window.setting.pushSwitch){window.setting.pushSwitch=0;var i=t._$getByClassName(this.__listConf.parent,"j-finish")[0];t._$remove(i);this.__tmpEventMsg=event;this.__doConnect()}}}};S.__receiveThirdOrder=function(e){n._$merge(e,{type:"crm-thirdorder"});var t=e.content.template;if(t&&"bot_form"==t.id)this.__initBotForm(e)};S.__onSelectThirdOrder=function(e,n){i._$stop(n);var a=t._$dataset(e,"target"),o=t._$dataset(e,"params"),s=t._$dataset(e,"status"),r=t._$dataset(e,"img"),_=t._$dataset(e,"name"),c=t._$dataset(e,"stock"),d=t._$dataset(e,"price"),f=t._$dataset(e,"count");this.__sendMsg({content:{target:a,params:o,template:{id:"qiyu_template_goods",p_status:s,p_img:r,p_name:_,p_stock:c,p_price:d,p_count:f}},type:"crm-thirdorder"})};S.__onSendThirdOrderAction=function(e,n){i._$stop(n);var a=t._$dataset(e,"target"),o=t._$dataset(e,"params"),s=t._$dataset(e,"label");if(!a)this.__sendMsg({type:"text",content:s});else this.__sendMsg({content:{target:a,params:o,template:{id:"qiyu_template_text",label:s}},type:"crm-thirdorder"})};S.__onConfig=function(e){var t=c._$getConfig(e.type);switch(e.type){case"client_input":this.__thSendInputContent=$._$throttle(this.__sendInputContent,1e3*t.sendingRate)}};S.__onInputChange=function(e){if(c._$canSendMessage())this.__thSendInputContent(e.substring(0,4500))};S.__sendInputContent=function(){var e;return function(t){if(t!=e){var i=c._$getConfig("client_input");if(!this.__isRobot&&i["switch"])c._$sendInputContent({sessionId:c._$getSessionID(),content:t});e=t}}}();S.__addTextareaElem=function(e,n,a,o,s){var r=t._$create("textarea");r.value=e;r.spellcheck=!1;r.placeholder=s||"感谢你的评价，请填写具体原因供我们改进";t._$addClassName(r,n);t._$attr(r,"maxlength","200");a.insertAdjacentElement("afterend",r);i._$addEvent(r,"blur",o);r.focus()};S.__quitQueue=function(e,t){this.__isChatting=4;var i=c._$getSessionID();c._$quitQueue(i);this.__hideTip()};S.__onAfterUpdateRender=function(e){if("3"==e.data.evaluation&&"1"==e.data.evaluation_reason)this.__doScrollToEvalcontent(e)};S.__doScrollToEvalcontent=function(e){if("3"==e.data.evaluation&&"1"==e.data.evaluation_reason){var i=t._$getParent(e.parent,"f-scrocnt");var n=e.node;var a=i.offsetHeight;var o=t._$offset(n,document.body).y;var s=t._$offset(i,document.body).y;var r=o+n.offsetHeight-s-a;if(r>0)i.scrollTop=i.scrollTop+r}};S.__onSameSession=function(e){if(1==e.stafftype){if(e.operator_enable)this.__setActionBtnState(1);else this.__setActionBtnState(0);t._$addClassName(this.__errTip[1],"f-dn");this._$disable(!1);this.__isChatting=1}}},"7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","534f28b3a0e1470b8992e7c9593712ec","435c850043af10c6e8c8526a81ff065a","b5fd5227971f68e93c3c9d8c4fce822c","1af021d5c158865e7dd70e474d81c2ea","d4f78b74ede76946bfa040af6decdc10","721eb0d1fc679ff84cb7e25b04a2daff","4dc6938a0c6e195149d0d7dd9992d114","5fbe769443dda80288886727976f0221","c0a456b030471faec92aa0d2ea80dffb","403938ace7e9cded43881ea0073b0c08","d64f649eed070094e05b6ae40a14317e","a7e632f25275a18bf80a6315807aa186","4dd00be5440ebfb77e7dab150ec057ac","ef3981ce516efa5fd67f856e936d95b7","7f31a069b85883a87d9e7be65faf8ba9","8497955fc06dc5bf1d473a237354b87a","0af8f78faaa36ef38268382c56c690df","13aee0f51783d67bfea7c5f1335c8cf4","81b518abf57be8befd9b471db6aae8f1");I$("be47054801bcdc37f93bfc2e8bf494a6",function(e,t,i,n,a,o,s,r,_,c,d,f,l,u,h,m,p,g,v,b,$,y,x){y._$$Module=t._$klass();x=y._$$Module._$extend(e._$$Module);x.__init=function(e){this.__super(e);this.__title=document.title;this.__isChatting=0;var t=i._$getByClassName(document.body,"j-flag");this.__headName=i._$getByClassName(document.body,"j-headflag")[0]?i._$getByClassName(document.body,"j-headflag")[0]:{};this.__headIcon=i._$getByClassName(document.body,"j-iconflag")[0]?i._$getByClassName(document.body,"j-iconflag")[0]:{};this.__box=t[0];this.__sendForm=t[2];v._$media(t[1]);this.__commentBtn=i._$get("comment_btn");this.__actionBtn=i._$get("action_btn");this.__errTip=i._$getByClassName(document.body,"j-tip");this.__pushNode=i._$getByClassName(t[1].parentNode,"j-flagpush")[0];this.__chatBox=i._$getByClassName(this.__box,"j-chat")[0];this.__listConf={limit:1e4,parent:t[1],item:{ext:{},klass:"session-item",config:appConfig,KNOWLEDGE_STATISTICS:window.KNOWLEDGE_STATISTICS,theme:theme,imgfilter:function(e){e=e||"";if(e.indexOf("://")>=0)return e;else return appConfig.path.sdk+e},imgclip:function(e){e=(e||"")+"?imageView&type=png|imageView&thumbnail=76y76&axis=5";if(e.indexOf("://")>=0)return e;else return appConfig.path.sdk+e},filterTagA:function(e){e=e||"";return e.replace(/<a[^>]*>([\s\S]*?)<\/a>/gi,function(e,t){return t})},filterHref:function(e){e=e||"";var t=/(<a)/g;return e.replace(t,'$1 target="_blank"')},fileSizeFormat:$._$fileSizeFormat,fileProgressFormat:function(e){var t=e.content.size,i=0;if(e.progressObj)i=e.progressObj.loaded;if(i>t)i=t;if(t>Math.pow(1024,2))return $._$fileSizeFormat(i,"MB")+"/"+$._$fileSizeFormat(t,"MB")+"MB";else if(t>1024)return $._$fileSizeFormat(i,"KB")+"/"+$._$fileSizeFormat(t,"KB")+"KB";else return $._$fileSizeFormat(i,"B")+"/"+$._$fileSizeFormat(t,"B")+"B";
},formatDownloadUrl:function(e){if(e)return e.replace(/^http:/,"https:")},spliceSuffix:$._$spliceSuffix,text2portrait:h._$text2portrait,complete:c._$completeURL,d2w:v._$dur2width,duration:v._$dur2time,urlFormat:function(e){e=e||"";e=e.trim();var t=/^http[s]?:\/\//.test(e);return t?e:"http://"+e},escapeWithoutSpace:$._$escapeWithoutSpace,trim:$._$trim,formatTrashWords:$._$formatTrashWords},cache:{lkey:"msg-all",klass:c._$$Cache},onafterinsert:this.__onAfterInsert._$bind(this),onafterupdate:this.__onAfterUpdate._$bind(this),onemptylist:this.__onEmptyList._$bind(this),onafterupdaterender:this.__onAfterUpdateRender._$bind(this),onafterlistload:this.__onAfterListLoad._$bind(this)};this.__sopt={parent:t[1].parentNode};s._$extend({timeformat:function(e,t){if(0===t||new Date(t).getFullYear()===new Date(e).getFullYear())return a._$format(e,"HH:mm");else return a._$format(e,"yyyy-MM-dd HH:mm")},timeformatEx:function(e){var t=864e5,i=+new Date;if((new Date).getFullYear()==new Date(e).getFullYear())if(i-e<=t)return"今天"+a._$format(e,"HH:mm:ss");else if(i-e<=2*t)return"昨天"+a._$format(e,"HH:mm:ss");else return a._$format(e,"MM-dd HH:mm:ss");else return a._$format(e,"yyyy-MM-dd HH:mm:ss")}});this.__eopt={popt:{parent:"gbody",col:12},log:"fk-sp",maxLength:4500,parent:t[2],onsubmit:this.__sendMsg._$bind(this),checkcansendfile:this.__checkCanSendFile._$bind(this),oninputchange:this.__onInputChange._$bind(this)};n._$addEvent(window,"message",this.__cbReceiveSdkMsg._$bind(this));n._$addEvent(window,"beforeunload",function(){this.__clearLocalItems(this.__findLocalItems(/YSF-MSGID-/gi));this.__clearLocalItems(this.__findLocalItems(/YSF-SATISFY-/gi))}._$bind(this))};x.__reset=function(e){this.__super(e);this.__doInitDomEvent([[c._$$Cache,"fileuploadprogress",this.__onFileUploadProgress._$bind(this)],[c._$$Cache,"onthirdorder",this.__receiveThirdOrder._$bind(this)],[document,"visibilitychange",this.__onVisibilityChange._$bind(this)]]);d._$batEvent({onpushmessage:this.__cbReceivePushMsg._$bind(this),oncansendfile:this.__onCanSendFile._$bind(this)});d._$addEvent("onmessage",this.__onMessage._$bind(this));n._$addEvent(window,"resize",function(e){if(this.__sclist){this.__calculateCampanyInfo();this.__sclist._$resize()}}._$bind(this));this.__editor=l._$$YSFEditor._$allocate(this.__eopt);this._$disable(!0);this.__editor._$toggleOpr(!0);if(1!=window.setting.dialogStyle){this.__doConnect();n._$addEvent(window,"beforeunload",this.__onBeforeUnload._$bind(this))}if(i._$getByClassName(document.body,"j-comquestions")){this.__calculateCampanyInfo();this.__sclist=f._$$Scrollbar._$allocate({parent:i._$getByClassName(document.body,"j-comquestions")[0]});this.__scinfo=f._$$Scrollbar._$allocate({parent:i._$getByClassName(document.body,"j-announceinfo")[0]})}};x.__destroy=function(){this.__doClearComponent();this.__super()};x.__onClickBox=function(){var e={toqiyu:function(){window.open("https://www.qiyukf.com/")},resend:function(e){this.__sendMsg({id:i._$dataset(e,"id")},!0)},reconnect:function(e){this.__hideTip();var t=i._$getByClassName(this.__listConf.parent,"j-finish")[0];i._$remove(t);d.__sdkWindowStatus=1;this.__doConnect(!1,!0)},reconnectshunt:function(){this.__hideTip();var e=i._$getByClassName(this.__listConf.parent,"j-finish")[0];i._$remove(e);d.__sdkWindowStatus=1;this.__doConnect(!1,!0)},selRobot:function(e){var t=i._$dataset(e,"id");if(t)if(!this.__isRobot){var n=this.__cache._$getRobotItem(t);if(!n)return;var a=n.question;this.__sendMsg({type:"text",content:a})}else this.__send(function(){this.__cache._$sendRobotMessage(t)}._$bind(this))},selShunt:function(e){var t=i._$dataset(e,"id"),n=i._$dataset(e,"type"),a=i._$dataset(e,"disabled"),o=i._$dataset(e,"entryid");if(1!=a&&null!=t&&null!=n&&null!=o){var s=1==n?{staffid:0,groupid:t,entryid:o}:{staffid:t,groupid:0,entryid:o};if(t){window.__shuntdata__=s;d._$sendSelectShunt(s);this.__disableShuntList(1)}}},pictureHref:function(e){var t=i._$dataset(e,"href");window.open(t,"_blank")},productHref:function(e){var t=i._$dataset(e,"href");window.open(t,"_blank")},applyKf:function(e){if(this.__isRobot){this.__botForm&&this.__botForm._$recycle();this._$disable(!0);this.__hideTip();var t=i._$getByClassName(this.__listConf.parent,"j-finish")[0];t&&i._$remove(t);if(d._$canSendMessage()){i._$delClassName(this.__errTip[1],"f-dn");this.__cache._$sendAction("kefu");this.__setCommentBtnState(0);this.__editor._$blur(!0)}else this.__doConnect(!0)}},hideIframe:function(){parent.postMessage("pkg:"+JSON.stringify({category:"closeIframe"}),"*")},comment:function(e,t){this.__doComment(e,t)},richContentDelegate:function(e,t){t=t||window.event;var a=n._$getElement(t,"d:group");if(a){var o=i._$dataset(a,"url");window.open(o,"_blank")}var s=n._$getElement(t,"t:a");if(!s);else{var o=i._$attr(s,"href"),r=i._$dataset(s,"name");if("kefu"==r||"qiyu://action.qiyukf.com?command=applyHumanStaff"==o){n._$stopDefault(t);var _=i._$dataset(s,"id"),c=i._$dataset(s,"disabled");if(c)return;this.__applyHumanStaff(s,_)}else i._$attr(s,"target","_blank")}},close:function(){if(1!=window.setting.dialogStyle)window.close();else parent.postMessage("pkg:"+JSON.stringify({category:"closeIframe"}),"*")},questionlist:function(e){var t=e.parentNode.parentNode,n=e.parentNode.getElementsByTagName("p")[0],a=e.parentNode.getElementsByTagName("i")[0],o=i._$hasClassName(a,"u-icon-infodown");this.__disableQuestionList(t);if(o){i._$delClassName(n,"f-dn");i._$replaceClassName(a,"u-icon-infodown","u-icon-infoup")}else{i._$replaceClassName(a,"u-icon-infoup","u-icon-infodown");i._$addClassName(n,"f-dn")}},openlink:function(e,t){n._$stop(t);var a=i._$attr(e,"href");window.open(a)},thirdorderList:function(e,t){this.__onSelectThirdOrder(e,t)},moreOrder:function(e,t){this.__send(function(){var t=i._$dataset(e,"id"),n=this.__cache._$getItemInCache(t);b._$$ThirdOrderList._$allocate({parent:document.body,data:n,onselect:this.__onSelectThirdOrder._$bind(this)})}._$bind(this))},moreBotCard:function(e,t){this.__onMoreBotCard(e,t)},selectBotCard:function(e,t){this.__onSelectBotCard(e,t)},botCardDetail:function(e,t){this.__onBotDetail(e,t)},thirdorderStatus:function(e,t){this.__onSendThirdOrderAction(e,t)},thirdorderService:function(e,t){this.__onSendThirdOrderAction(e,t)},abortFileTrans:function(e,t){var n=i._$dataset(e,"id");c._$do(function(e){e._$abortFileTrans(n)})},download:function(e,t){var n=i._$dataset(e,"url"),a=i._$dataset(e,"name");var o=(window.setting.remoteRoot||"")+n+"?download="+encodeURIComponent(a);i._$createXFrame({visible:!1,src:o})},evalRobotAnswer:function(e,t){var n=i._$dataset(e,"id"),a=i._$dataset(e,"sid"),o=i._$dataset(e,"idclient"),s=i._$dataset(e,"evaluation");var r=i._$getParent(e,"msg").previousElementSibling;if(!i._$hasClassName(e,"z-sel")){if(a!=d._$getSessionID()&&a!=d._$getRobotSessionID()){_="该会话已结束，暂不支持评价";this.__showTip(_,!0);return}if(!d._$canSendMessage()){var _="会话已结束，暂不支持评价";this.__showTip(_,!0);return}if(!this.__isRobot){var _="当前会话非机器人会话，暂不支持评价";this.__showTip(_,!0);return}d._$evalRobotAnswer({id:o,msgIdClient:o,evaluation:s,evalcontent:""})}},showBotForm:function(e,t){this.__showBotForm(e,t)},changeEvalContent:function(e,t){var n=i._$dataset(e,"id"),a=i._$dataset(e,"sid"),o=i._$dataset(e,"idclient"),s=decodeURIComponent(i._$dataset(e,"evalcontent")||""),r=decodeURIComponent(i._$dataset(e,"evalguide")||"");if(a==d._$getSessionID()||a==d._$getRobotSessionID())if(d._$canSendMessage())if(this.__isRobot){var _=s?s:"";i._$addClassName(e,"z-hidden");this.__addTextareaElem(_,"qa_eval_input",e,function(t){var n=t.target||t.srcElement;var a=n.value.trim();if(s&&a!=s)d._$evaluationContent({id:o,msgIdClient:o,evalcontent:a});else if(!s&&""!=a)d._$evaluationContent({id:o,msgIdClient:o,evalcontent:a});else{i._$remove(n);i._$delClassName(e,"z-hidden")}},r)}else{var c="当前会话非机器人会话，暂不支持评价";this.__showTip(c,!0)}else{var c="会话已结束，暂不支持评价";this.__showTip(c,!0)}else{c="该会话已结束，暂不支持评价";this.__showTip(c,!0)}},quitQueue:function(e,t){this.__quitQueue(e,t)}};return function(t){e.leaveCancel=this.__onCancelLeave;var o=n._$getElement(t,"d:action");if(o){var s=e[i._$dataset(o,"action")];if(a._$isFunction(s))s.call(this,o,t)}}}();x.__doConnect=function(e,t){this.__editor._$toggleOpr(!0);if(this.__isChatting){if(!this.__isRobot)i._$delClassName(this.__errTip[1],"f-dn")}else{if(this.__list)this.__list._$recycle();this.__listConf.parent.innerHTML=o._$getTextTemplate("chat-connecting")}d._$connect(window.setting,e,t)};x.__onConnect=function(e){this.__getWebAnalyticsInfo(e);if(3!==this.__isChatting){this.__hideTip();i._$addClassName(this.__errTip[1],"f-dn");this.__isChatting=1;var t=this.__listConf.item.ext.kefuid;this.__listConf.item.ext.kefuid=e.id;this._$disable(!1);if(!this.__list){this.__list=r._$$ListModuleWF._$allocate(this.__listConf);d._$hasList=1}this.__switchKefuEntry(t,e);if(!e.hasEvaluated){this.__setCommentBtnState(1);if(!e.hasKefuEntry)this.__initEvaluatonForm()}var n=e.isRobot;if(e.isRobot){n=!0;this.__headName.innerHTML=d._$getKefu().nickname||"";if(1==window.setting.dialogStyle){this.__headIcon.style.display=this.__headName.innerHTML?"inline":"none";this.__headIcon.setAttribute("src",d._$getKefu().portrait||appConfig.path.sdk+"res/default/robot_portrait.png")}this.__listConf.item.ext.isRobot=!0;this.__setCommentBtnState(2);this.__editor._$toggleOpr(!0)}else{n=!1;this.__headName.innerHTML=d._$getKefu().nickname||"";this.__listConf.item.ext.isRobot=!1;this.__editor._$toggleOpr(!1);if(1==window.setting.dialogStyle){this.__headIcon.style.display=this.__headName.innerHTML?"inline":"none";this.__headIcon.setAttribute("src",d._$getKefu().portrait||appConfig.path.sdk+"res/img/test/kefu-1.png?imageView&type=png|imageView")}if(!e.hasKefuEntry){if(this.__listHasLoad)d._$sendPrdMsg();d._$sendKefuHeart(d._$getSessionID())}}if(e.hasKefuEntry)this.__setActionBtnState(1);if(this.__isRobot)if(this.__tmpEventMsg)this.__sendMsg(this.__tmpEventMsg);delete this.__tmpEventMsg;this.__isRobot=n}else this.__headName.style&&(this.__headName.style.paddingLeft="10px")};x.__doInitKefu=function(e){
if(2!==this.__isChatting){var t=d._$getKefu();if(!t)return;a._$merge(t,{welcome:e.isRobot?"":e.welcome});this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-kefu",t));this.__doScrollBottom()}};x.__doInitShunt=function(e){if(e.nickname)if(2!==this.__isChatting){var t={nickname:e.nickname,groupname:e.groupname,welcome:e.welcome||""};this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-kefu-shunt",t));this.__doScrollBottom()}};x.__onTransferResult=function(e){if(2!==this.__isChatting){this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("trans-kefu",e));this.__headName.innerHTML=e.staffName;d._$setSessionID(e.sessionId);this.__setCommentBtnState(1);this.__doScrollBottom()}};x.__onFinish=function(e){var t={0:e.message||"客服已关闭会话",1:"由于您长时间不在线，会话已结束",2:e.message||"本次会话已超时结束",4:"客服离开，会话已结束",7:"会话已结束"};var n=i._$getByClassName(this.__listConf.parent,"j-finish")[0];i._$remove(n);if(!e)var a="会话已断开，如需继续咨询";else a=t[e.closeReason]||"";if(this.__isRobot&&1==e.closeReason)a="本次会话已超时结束";this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-finish",{msg:a}));if(!this.__isRobot)if(3===this.__isChatting)this.__setCommentBtnState(2);this.__doScrollBottom()};x.__onDisconnect=function(){if(1!=window.setting.getPushSwitch){i._$addClassName(this.__errTip[1],"f-dn");var e='连接客服失败，你可以尝试<a href="#" data-action="reconnect">重新连接</a>';this.__showTip(e);if(!this.__isChatting)i._$clearChildren(this.__listConf.parent);if(3===this.__isChatting){this.__setCommentBtnState(2);this.__setActionBtnState(0)}else this.__setCommentBtnState(0)}else window.setting.getPushSwitch=0};x.__onNokefuNoLeave=function(e){this.__isChatting=3;this.__hideTip();this.__setCommentBtnState(2);this.__setActionBtnState(0);this.__headName.innerHTML="客服不在线";this.__headName.style&&(this.__headName.style.paddingLeft="10px");this.__headIcon.style&&(this.__headIcon.style.display="none");n._$dispatchEvent(document,"click");i._$addClassName(this.__sendForm,"z-hidden");i._$clearChildren(this.__box);d._$chatNoKefu=1;this.__box.innerHTML=s._$get("chat-nokefunoleave",{leaveOffTips:window.leaveOffTips,qiyuInfoSwitch:window.qiyuInfoSwitch})};x.__onNokefu=function(){this.__super();this.__headName.innerHTML="给我们留言";this.__headName.style&&(this.__headName.style.paddingLeft="10px");this.__headIcon.style&&(this.__headIcon.style.display="none");d._$chatNoKefu=1};x.__onLeaveSend=function(e){this.__super(e);if(!e.error){parent.postMessage("pkg:"+JSON.stringify({category:"leaveOk"}),"*");setTimeout(this.__onCancelLeave._$bind(this),3e3)}};x.__onCancelLeave=function(){window.close()};x.__onUserErr=function(e){i._$addClassName(this.__errTip[1],"f-dn");var t=e||"帐户不合法";this.__showTip(t);if(!this.__isChatting)i._$clearChildren(this.__listConf.parent)};x.__sendMsg=function(e,t){this.__send(function(){if(t){this.__isResend=1;this.__cache._$reSendMessage(e.id)}else this.__cache._$sendMessage(e);if("image"===e.type||"file"==e.type)this.__editor._$resetFile();else this.__editor._$clear({focus:!0})}._$bind(this))};x.__onBeforeUnload=function(e){g._$closeBySessionId();if(d._$canSendMessage()&&3!==this.__isChatting&&!window.setting.unconfirm){e=e||window.event;var t="要离开此网站吗？";if(e)e.returnValue=t;return t}};x.__onQueueStart=function(e){this.__isChatting=2;this.__isRobot=e.robotInQueue;this.__listConf.item.ext.kefuid=null;if(!this.__list)this.__list=r._$$ListModuleWF._$allocate(this.__listConf);i._$addClassName(this.__errTip[1],"f-dn");this.__showQueueInfo(e);if(e.operator_enable)this.__setActionBtnState(1);else this.__setActionBtnState(0);if(this.__isRobot)this.__editor._$toggleOpr(!0);else this.__editor._$toggleOpr(!1);this._$disable(!1)};x.__onQueue=function(e){if(2===this.__isChatting)this.__showQueueInfo(e)};x.__onQueueFail=function(e){if(302==e.code)this.__onNokefu({});else if(303==e.code)this.__onNokefuNoLeave({})};x.__showQueueInfo=function(e){var t;if(e.showNum)t="排队中，您排在第"+e.before+"位，排到将自动接入。";else t=e.inqueueNotify||"您好，当前正在排队，请先简单描述您的问题... ";t+='<a href="#" data-action="quitQueue">退出排队</a>';this.__showTip(t)};x.__onOverTime=function(e){this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-overtime",e));this.__doScrollBottom()};x.__setCommentBtnState=function(e){if(0===e){i._$replaceClassName(this.__commentBtn,"f-dn","z-dis");this.__commentBtn.disabled=!0;this.__setActionBtnState(0)}else if(1===e){i._$delClassName(this.__commentBtn,"z-dis f-dn");this.__commentBtn.disabled=!1;this.__setActionBtnState(0)}else if(2===e)i._$addClassName(this.__commentBtn,"f-dn")};x.__setActionBtnState=function(e){if(0===e)i._$addClassName(this.__actionBtn,"f-dn");else if(1===e){i._$delClassName(this.__actionBtn,"f-dn");this.__setCommentBtnState(2)}};x.__showTip=function(e,t){this.__errTip[0].innerHTML=e;i._$addClassName(this.__box,"z-show");if(t)setTimeout(function(){i._$delClassName(this.__box,"z-show")}._$bind(this),3e3)};x.__hideTip=function(){i._$delClassName(this.__box,"z-show")};x.__onShuntEntries=function(){if(!this.__list){this.__list=r._$$ListModuleWF._$allocate(this.__listConf);d._$hasList=1}this.__isChatting=0;this._$disable(!0);i._$addClassName(this.__errTip[1],"f-dn");this.__setCommentBtnState(0)};x.__onShuntStatus=function(e){this._$disable(!1);this.__disableShuntList(1)};x.__disableShuntList=function(e){var t=i._$getByClassName(this.__box,"j-sel-shunt");for(var n=0;n<t.length;n++){var a=t[n];e?i._$addClassName(a,"u-shunt-disabled"):i._$delClassName(a,"u-shunt-disabled");var o=i._$getByClassName(a,"shunt_child");for(var s=0;s<o.length;s++){var r=o[s];e?i._$dataset(r,"disabled","1"):i._$dataset(r,"disabled","0")}}};x.__disableQuestionList=function(e){var t=e.getElementsByTagName("p"),n=e.getElementsByTagName("i");for(var a=0;a<t.length;a++)i._$addClassName(t[a],"f-dn");for(var a=0;a<n.length;a++)i._$replaceClassName(n[a],"u-icon-infoup","u-icon-infodown")};x._$disable=function(e){this.__editor._$disable(e)};x._$disable2Kefu=function(e){i._$dataset(e,"disabled",!0);i._$setStyle(e,"color","#37474f")};x.__calculateCampanyInfo=function(){var e=i._$getByClassName(document.body,"j-companyinfo-right")[0];try{var t=i._$getByClassName(e,"j-announceinfo")[0],n=i._$getByClassName(e,"j-comquestions")[0],a=e.clientHeight-t.clientHeight-78}catch(o){if(e)a=e.clientHeight-78}finally{if(a>0)n?i._$setStyle(n,"height",a+"px"):""}};x.__onProductError=function(e){console.log("消息过长,发送失败")};x.__preLoadImg=function(e,t){var i=document.createElement("img");i.onload=function(){e.src=t;this.onload=null};i.src=t};x.__findLocalItems=function(e,t){var i,n=[],a;for(i in localStorage)if(i.match(e)||!e&&"string"==typeof i){a=!t?localStorage.getItem(i):JSON.parse(localStorage.getItem(i));n.push({key:i,val:a})}return n};x.__clearLocalItems=function(e){for(var t=0;t<e.length;t++)window.localStorage.removeItem(e[t].key)};x.__cbReceiveSdkMsg=function(e){var t={status:function(e){d.__sdkWindowStatus=e.layerOpen},doconnect:function(e){this.__doConnect()},dopushmsg:function(e){window.setting.pushSwitch=1;d._$pushMsgConnect(setting.appkey,e.pushMsgId);this._$disable(!1)},dogetpushmsg:function(e){window.setting.getPushSwitch=1;window.setting.pushSwitch=1;d._$pushMsgConnect(setting.appkey,e.ids,1);this._$disable(!1)},dopushmsgread:function(e){d._$sendPushMsgStatus(2,e.ids)}};return function(e){try{var i=(e.data||"").split(":"),n=t[(i.shift()||"").toLowerCase()];if(n)n.call(this,JSON.parse(i.join(":")))}catch(a){}}}();x.__cbReceivePushMsg=function(e){if(e.append)this.__pushNode.insertAdjacentHTML("beforeEnd",s._$get("push-message",e));parent.postMessage("pkg:"+JSON.stringify({data:{content:e.content,type:e.type,msgSessionId:e.msgSessionId,sdkAppend:e.sdkAppend},category:"pushMsg"}),"*");d._$sendPushMsgStatus(1,[e.msgSessionId])};x.__switchKefuEntry=function(e,t){if(!t.twiceKefuEntry)if(e!=t.id)if(t.groupname)this.__doInitShunt(t);else this.__doInitKefu(t)};x.__onFileUploadProgress=function(e){var t=e.msg,n=i._$getByClassName(this.__box,"msg_right");var o;a._$forEach(n,function(e){if(i._$attr(e,"id").indexOf(t.id)>-1)o=e});if(o){var s=i._$getByClassName(o,"progress-size")[0],r=i._$getByClassName(o,"progress-bar")[0],_=i._$getByClassName(r,"inner")[0];var c=this.__listConf.item.fileProgressFormat(t);s.innerText=c;var d=i._$getStyle(r,"width").replace("px","");i._$setStyle(_,"width",t.progressObj.percentage/100*d+"px")}};x.__checkCanSendFile=function(e){d._$checkCanSendFile({timestamp:e})};x.__onCanSendFile=function(e){this.__editor._$dispatchEvent("oncansendfile",e)};x.__onMessage=function(){if(!document.hidden)this.__doUnMarqueeTitle();else this.__doMarqueeTitle("在线客服（有新消息）")};x.__onVisibilityChange=function(){if(!document.hidden)this.__doUnMarqueeTitle()};x.__doMarqueeTitle=function(){var e;var t=function(){if(e)document.title=e.join("")};var i=function(){e.push(e.shift());t()};return function(n){if(this.__xtimer)window.clearInterval(this.__xtimer);e=n.split("");this.__xtimer=window.setInterval(i,500);t()}}();x.__doUnMarqueeTitle=function(){if(this.__xtimer){this.__xtimer=window.clearInterval(this.__xtimer);document.title=this.__title}};x.__applyHumanStaff=function(e,t){if(this.__isRobot){this._$disable2Kefu(e);if(d._$canSendMessage()){i._$delClassName(this.__errTip[1],"f-dn");this.__cache._$sendAction("kefu",t);this.__setCommentBtnState(0)}else this.__doConnect(!0)}};x.__getWebAnalyticsInfo=function(e){if(!e.isRobot){var t=function(e,t){t=t||function(){};var i=new Image;i.onerror=function(){console.log("faild to load qa.gif")};i.onload=function(){t()};i.src=e;i.width=1;i.height=1;return i};if(window.localStorage){var i="X-"+setting.appkey.toUpperCase()+"-YSF-WEBANALYTICS",n=localStorage.getItem(i);if(!n)return;var o=a._$query2object(n);var s=window.__YSFDAROOT__+"?ak="+o.ak+"&dv="+o.dv+"&si="+e.sid+"&su="+o.su+"&cup="+o.cup+"&tm="+o.tm+"&cy="+o.cy+"&lp="+o.lp;t(s)}}}},"e61a11c80712c411d29064a2f931ff75","7c0d5856d6e99d0fb30abadfe6db5ad1","5bd21216eb7851bb48d84acf022ca85f","7b946b5cd842c1aceab62d37f3506966","2ad7178887dc8cdca6f726aa3bb0d129","3da49e23d83c707316e52d7e8e62291a","3174a1d30233acba88fa4afe0e1bcf90","534f28b3a0e1470b8992e7c9593712ec","435c850043af10c6e8c8526a81ff065a","b5fd5227971f68e93c3c9d8c4fce822c","1af021d5c158865e7dd70e474d81c2ea","d4f78b74ede76946bfa040af6decdc10","721eb0d1fc679ff84cb7e25b04a2daff","4dc6938a0c6e195149d0d7dd9992d114","5fbe769443dda80288886727976f0221","c0a456b030471faec92aa0d2ea80dffb","403938ace7e9cded43881ea0073b0c08","d64f649eed070094e05b6ae40a14317e","a7e632f25275a18bf80a6315807aa186","ef3981ce516efa5fd67f856e936d95b7","7f31a069b85883a87d9e7be65faf8ba9");
I$("60c13ad55e7248136b818a02504e0994",function(e,t,i,n,a){i._$parseTemplate("template-box");var o=e._$query2object(location.search.substr(1));setting.appkey=o.k||"";setting.fid=o.u;setting.device=o.u||o.d;setting.uuid=o.uuid||"";setting.templateId=o.templateId||0;setting.groupid=o.gid||0;setting.bid=o.bid||-1;setting.staffid=o.sid||0;setting.qtype=o.qtype||0;setting.dvcTimer=o.dvctimer||0;setting.dialogStyle=Number(o.w||0);setting.robotShuntSwitch=o.robotShuntSwitch||0;setting.unconfirm=o.unconfirm||0;setting.robotId=o.robotId||0;if(null!=o.e)setting.email=o.e;if(null!=o.m)setting.mobile=o.m;if(null!=o.n)setting.realname=o.n;if(!setting.device)setting.device=localStorage.getItem("YSF-"+setting.appkey.toUpperCase()+"-UID")||t._$md52hex(e._$uniqueID()+"-"+ +new Date);window.localStorage.setItem("YSF-"+setting.appkey.toUpperCase()+"-UID",setting.device);if(/(iPhone|iPod|iOS|Android)/i.test(navigator.userAgent)||1==o.wp)window.setting.dialogStyle=3;var s=encodeURIComponent(setting.device),r=encodeURIComponent(setting.appkey.toUpperCase());document.cookie="X-"+r+"-DEVICE="+s+";path=/";n._$$Module._$allocate()},"2ad7178887dc8cdca6f726aa3bb0d129","bcb1f11e87c301403d3b823c876c2457","3da49e23d83c707316e52d7e8e62291a","be47054801bcdc37f93bfc2e8bf494a6","1ff28646724649db10b683c38c0b2158");